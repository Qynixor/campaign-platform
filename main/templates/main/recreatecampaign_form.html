{% extends 'main/face.html' %}
{% load static %}
{% block content %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recreate Campaign</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
      <style>
:root {
    --primary: #1877f2;
    --primary-dark: #166fe5;
    --primary-light: #e7f3ff;
    --secondary: #f0f2f5;
    --text-primary: #1c1e21;
    --text-secondary: #65676b;
    --border: #dddfe2;
    --card-bg: #ffffff;
    --success: #42b72a;
    --error: #f02849;
    --warning: #f7b928;
    --canva-pink: #ff4b4b;
    --canva-orange: #ff9c4b;
    --card-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    --transition: all 0.2s ease;
    --input-bg: #ffffff;
    --input-text: #1c1e21;
    --input-placeholder: #8a8d91;
}

body {
    font-family: 'Segoe UI', Helvetica, Arial, sans-serif;
    background-color: var(--secondary);
    color: var(--text-primary);
    line-height: 1.5;
    margin: 0;
    padding: 0;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
}

.create-wrapper {
    flex: 1;
    padding: 20px 12px;
    display: flex;
    flex-direction: column;
}

.create-container {
    max-width: 480px;
    margin: 0 auto;
    width: 100%;
}

.create-card {
    background-color: var(--card-bg);
    border-radius: 12px;
    box-shadow: var(--card-shadow);
    overflow: hidden;
    margin-bottom: 24px;
    transition: var(--transition);
}

.create-card:hover {
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);
}

.card-header {
    padding: 20px 24px;
    border-bottom: 1px solid var(--border);
    display: flex;
    align-items: center;
    background-color: #fafbfc;
}

.card-header h1 {
    margin: 0;
    font-size: 22px;
    font-weight: 700;
    color: var(--text-primary);
    flex: 1;
    display: flex;
    align-items: center;
}

.card-header h1 i {
    margin-right: 12px;
    color: var(--primary);
}

.close-btn {
    background: none;
    border: none;
    font-size: 24px;
    color: var(--text-secondary);
    cursor: pointer;
    padding: 0;
    width: 38px;
    height: 38px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: var(--transition);
}

.close-btn:hover {
    background-color: var(--secondary);
    color: var(--text-primary);
}

.card-body {
    padding: 24px;
}

.form-section {
    margin-bottom: 24px;
    position: relative;
}

.section-label {
    display: flex;
    align-items: center;
    margin-bottom: 16px;
    padding-bottom: 8px;
    border-bottom: 1px solid var(--border);
}

.section-icon {
    width: 32px;
    height: 32px;
    background-color: var(--primary-light);
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 12px;
    color: var(--primary);
}

.section-label-text {
    font-weight: 600;
    font-size: 18px;
    color: var(--text-primary);
}

.form-label {
    display: block;
    font-weight: 600;
    margin-bottom: 8px;
    color: var(--text-primary);
    font-size: 14px;
}

.form-input, .form-select, .form-textarea {
    width: 100%;
    padding: 12px 16px;
    border: 1px solid var(--border);
    border-radius: 8px;
    font-family: inherit;
    font-size: 15px;
    background-color: var(--input-bg);
    color: var(--input-text);
    box-sizing: border-box;
    transition: var(--transition);
}

.form-input:focus, .form-select:focus, .form-textarea:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(24, 119, 242, 0.2);
}

.form-input::placeholder, .form-textarea::placeholder {
    color: var(--input-placeholder);
    opacity: 0.8;
}

.form-textarea {
    min-height: 120px;
    resize: vertical;
    line-height: 1.5;
}

.form-helper {
    color: var(--text-secondary);
    font-size: 13px;
    margin-top: 6px;
    display: block;
}

.file-upload {
    border: 2px dashed var(--border);
    border-radius: 8px;
    padding: 24px;
    text-align: center;
    cursor: pointer;
    transition: var(--transition);
    background-color: #fbfbfb;
}

.file-upload:hover {
    border-color: var(--primary);
    background-color: rgba(24, 119, 242, 0.03);
}

.file-upload i {
    font-size: 28px;
    color: var(--text-secondary);
    margin-bottom: 10px;
}

.file-upload-text {
    font-size: 15px;
    color: var(--text-secondary);
    font-weight: 500;
}

.preview-container {
    margin-top: 16px;
    text-align: center;
}

.preview-image {
    max-width: 100%;
    max-height: 200px;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.submit-button {
    background: linear-gradient(to right, var(--primary), var(--primary-dark));
    color: white;
    border: none;
    border-radius: 8px;
    padding: 14px 28px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition);
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 24px auto 0;
    min-width: 180px;
    box-shadow: 0 2px 6px rgba(24, 119, 242, 0.3);
}

.submit-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(24, 119, 242, 0.4);
}

.submit-button:active {
    transform: translateY(0);
}

.submit-button i {
    margin-right: 8px;
}

.error-container {
    background-color: rgba(240, 40, 73, 0.08);
    border-left: 4px solid var(--error);
    border-radius: 6px;
    padding: 16px;
    margin-bottom: 24px;
    color: var(--error);
    font-size: 14px;
}

.error-container ul {
    margin: 10px 0 0;
    padding-left: 20px;
}

.error-container li {
    margin-bottom: 4px;
}

.two-column {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
}

@media (max-width: 768px) {
    .two-column {
        grid-template-columns: 1fr;
    }
    
    .create-wrapper {
        padding: 12px 8px;
    }
    
    .card-body {
        padding: 16px;
    }
    
    .card-header {
        padding: 16px;
    }
    
    .section-label {
        margin-bottom: 12px;
    }
}

/* Animation for form elements */
.form-section {
    animation: fadeIn 0.4s ease-out;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Social media style tags */
.tag-pill {
    display: inline-block;
    background-color: var(--primary-light);
    color: var(--primary);
    padding: 4px 10px;
    border-radius: 16px;
    font-size: 12px;
    font-weight: 500;
    margin-left: 8px;
}

.progress-bar {
    height: 6px;
    background-color: var(--secondary);
    border-radius: 3px;
    margin-bottom: 24px;
    overflow: hidden;
    position: relative;
}

.progress-fill {
    height: 100%;
    background: linear-gradient(to right, var(--primary), var(--primary-dark));
    width: 0%;
    transition: width 0.5s ease;
    border-radius: 3px;
}

.progress-text {
    position: absolute;
    right: 0;
    top: -24px;
    font-size: 13px;
    color: var(--text-secondary);
}

/* Canva Tool Styles */
.canva-tool {
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 20px;
    margin-bottom: 20px;
    background: linear-gradient(to bottom, #ffffff, #f9f9f9);
    position: relative;
    overflow: hidden;
}

.canva-tool::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(to right, var(--canva-pink), var(--canva-orange));
}

.canva-header {
    display: flex;
    align-items: center;
    margin-bottom: 16px;
}

.canva-logo {
    width: 36px;
    height: 36px;
    margin-right: 12px;
    background: linear-gradient(to right, var(--canva-pink), var(--canva-orange));
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: bold;
    box-shadow: 0 2px 6px rgba(255, 75, 75, 0.3);
}

.canva-title {
    font-weight: 700;
    font-size: 17px;
    color: var(--text-primary);
}

.canva-description {
    color: var(--text-secondary);
    font-size: 14px;
    margin-bottom: 20px;
    line-height: 1.5;
}

.canva-button {
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(to right, var(--canva-pink), var(--canva-orange));
    color: white;
    border: none;
    border-radius: 8px;
    padding: 12px 20px;
    font-weight: 600;
    font-size: 15px;
    cursor: pointer;
    transition: var(--transition);
    width: 100%;
    box-shadow: 0 2px 6px rgba(255, 75, 75, 0.3);
}

.canva-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(255, 75, 75, 0.4);
}

.canva-button:active {
    transform: translateY(0);
}

.canva-button i {
    margin-right: 10px;
}

/* Tool toggle */
.tool-toggle {
    display: flex;
    align-items: center;
    margin-bottom: 16px;
    padding: 12px 16px;
    background-color: #f8f9fa;
    border-radius: 8px;
}

.toggle-text {
    font-size: 15px;
    color: var(--text-primary);
    margin-left: 12px;
    font-weight: 500;
}

.toggle-switch {
    position: relative;
    display: inline-block;
    width: 44px;
    height: 24px;
}

.toggle-switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

.toggle-slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #ccc;
    transition: .4s;
    border-radius: 34px;
}

.toggle-slider:before {
    position: absolute;
    content: "";
    height: 18px;
    width: 18px;
    left: 3px;
    bottom: 3px;
    background-color: white;
    transition: .4s;
    border-radius: 50%;
}

input:checked + .toggle-slider {
    background: linear-gradient(to right, var(--canva-pink), var(--canva-orange));
}

input:checked + .toggle-slider:before {
    transform: translateX(20px);
}

/* Status indicators */
.canva-status {
    margin-top: 16px;
    padding: 12px;
    border-radius: 8px;
    text-align: center;
    font-size: 14px;
    display: none;
}

.status-success {
    background-color: rgba(66, 183, 42, 0.1);
    color: var(--success);
    border: 1px solid rgba(66, 183, 42, 0.2);
}

.status-error {
    background-color: rgba(240, 40, 73, 0.1);
    color: var(--error);
    border: 1px solid rgba(240, 40, 73, 0.2);
}

.status-loading {
    background-color: rgba(24, 119, 242, 0.1);
    color: var(--primary);
    border: 1px solid rgba(24, 119, 242, 0.2);
}

.status-loading .spinner {
    display: inline-block;
    width: 16px;
    height: 16px;
    border: 2px solid rgba(24, 119, 242, 0.3);
    border-radius: 50%;
    border-top-color: var(--primary);
    animation: spin 1s ease-in-out infinite;
    margin-right: 8px;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

.optional-badge {
    display: inline-block;
    background-color: #f0f2f5;
    color: var(--text-secondary);
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: 500;
    margin-left: 8px;
}

/* Audio Restrictions Warning - Light Mode */
.audio-restrictions-warning {
    background: linear-gradient(135deg, #fff9e6 0%, #fff3cd 100%);
    border: 2px solid #ffeaa7;
    border-radius: 12px;
    padding: 20px;
    margin: 15px 0;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.warning-header {
    display: flex;
    align-items: center;
    gap: 10px;
    color: #856404;
    margin-bottom: 15px;
    font-size: 1.1em;
}

.warning-header i {
    font-size: 1.3em;
}

.restriction-content {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin: 15px 0;
}

.allowed-list, .restricted-list {
    padding: 15px;
    border-radius: 8px;
}

.allowed-list {
    background: rgba(40, 167, 69, 0.1);
    border: 1px solid rgba(40, 167, 69, 0.3);
}

.restricted-list {
    background: rgba(220, 53, 69, 0.1);
    border: 1px solid rgba(220, 53, 69, 0.3);
}

.allowed-list h4, .restricted-list h4 {
    margin: 0 0 10px 0;
    font-size: 0.95em;
    display: flex;
    align-items: center;
    gap: 8px;
}

.allowed-list ul, .restricted-list ul {
    margin: 0;
    padding-left: 20px;
    font-size: 0.85em;
    color: #555;
}

.allowed-list li, .restricted-list li {
    margin-bottom: 5px;
    line-height: 1.4;
}

.warning-footer {
    border-top: 1px solid #ffeaa7;
    padding-top: 15px;
    margin-top: 10px;
}

.warning-footer p {
    margin: 0;
    font-size: 0.9em;
    color: #856404;
    text-align: center;
}

/* Audio Preview Styles - Light Mode */
.audio-preview {
    display: flex;
    align-items: center;
    gap: 15px;
    padding: 15px;
    border-radius: 8px;
    margin: 10px 0;
}

.audio-preview.approved {
    background: rgba(40, 167, 69, 0.1);
    border: 1px solid rgba(40, 167, 69, 0.3);
}

.audio-preview.rejected {
    background: rgba(220, 53, 69, 0.1);
    border: 1px solid rgba(220, 53, 69, 0.3);
}

.preview-icon {
    font-size: 1.5em;
}

.preview-icon .fa-check-circle {
    color: #28a745;
}

.preview-icon .fa-exclamation-circle {
    color: #dc3545;
}

.preview-info {
    flex: 1;
}

.audio-details {
    display: flex;
    gap: 15px;
    margin: 5px 0;
    font-size: 0.85em;
    color: #666;
}

.preview-status {
    font-size: 0.9em;
    font-weight: 500;
}

.preview-loading {
    text-align: center;
    padding: 20px;
    color: #666;
}

/* Sub elements styling */
.sub {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 14px;
    padding: 14px;
    border-radius: 10px;
    background: #ffffff;
    border: 1px solid #e5e7eb;
    transition: transform 0.2s ease;
}

.sub:hover {
    transform: translateY(-2px);
}

.sub i {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 38px;
    height: 38px;
    font-size: 16px;
    background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
    color: #4b5563;
    border-radius: 50%;
    flex-shrink: 0;
    border: 1px solid #f9fafb;
}

.sub h2 {
    margin: 0;
    font-size: 18px;
    font-weight: 600;
    color: #1f2937;
}

.sub p {
    margin: 5px 0 0;
    font-size: 13px;
    color: #6b7280;
    line-height: 1.45;
}

/* Responsive design */
@media (max-width: 768px) {
    .restriction-content {
        grid-template-columns: 1fr;
        gap: 15px;
    }
    
    .audio-restrictions-warning {
        padding: 15px;
    }
}

/* Text colors for light mode */
.text-success {
    color: #28a745 !important;
}

.text-danger {
    color: #dc3545 !important;
}

/* Style select dropdown for light mode */
select.form-select {
    appearance: none;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='%2365676b' viewBox='0 0 16 16'%3e%3cpath d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3e%3c/svg%3e");
    background-repeat: no-repeat;
    background-position: right 12px center;
    background-size: 16px 12px;
}

/* Override browser autofill styles for light mode */
input:-webkit-autofill,
input:-webkit-autofill:hover, 
input:-webkit-autofill:focus,
textarea:-webkit-autofill,
textarea:-webkit-autofill:hover,
textarea:-webkit-autofill:focus,
select:-webkit-autofill,
select:-webkit-autofill:hover,
select:-webkit-autofill:focus {
    -webkit-text-fill-color: var(--input-text);
    -webkit-box-shadow: 0 0 0px 1000px var(--input-bg) inset;
    transition: background-color 5000s ease-in-out 0s;
    border: 1px solid var(--border);
}

            </style>


    <style type="text/css">
        


    .sub {
    display: flex;
    align-items: center;
    gap: 12px; /* slightly bigger */
    margin-bottom: 14px; 
    padding: 14px; /* increased */
    border-radius: 10px; 
    background: #ffffff;
    border: 1px solid #e5e7eb;
    transition: transform 0.2s ease;
}

.sub:hover {
    transform: translateY(-2px); 
}

.sub i {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 38px;   /* increased */
    height: 38px;  /* increased */
    font-size: 16px; /* slightly bigger */
    background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
    color: #4b5563;
    border-radius: 50%;
    flex-shrink: 0;
    border: 1px solid #f9fafb;
}

.sub h2 {
    margin: 0;
    font-size: 18px;  /* slightly larger */
    font-weight: 600;
    color: #1f2937;
}

.sub p {
    margin: 5px 0 0;
    font-size: 13px;  /* increased */
    color: #6b7280;
    line-height: 1.45;
}

        /* Dark mode for sub elements */
        body.dark-mode .sub {
            background: #1e1e1e;
            border: 1px solid #333;
        }
        
        body.dark-mode .sub i {
            background: linear-gradient(135deg, #2d2d2d 0%, #252525 100%);
            color: #b0b0b0;
            border: 1px solid #333;
        }
        
        body.dark-mode .sub h2 {
            color: #f0f0f0;
        }
        
        body.dark-mode .sub p {
            color: #a0a0a0;
        }
</style>


<style>
    /* Dark mode styles */
.dark-mode {
    --primary: #2d88ff;
    --primary-dark: #1a7ae6;
    --primary-light: rgba(45, 136, 255, 0.15);
    --secondary: #18191a;
    --text-primary: #e4e6ea;
    --text-secondary: #b0b3b8;
    --border: #3e4042;
    --card-bg: #242526;
    --success: #45d62f;
    --error: #fa3e3e;
    --warning: #f7b928;
    --canva-pink: #ff6b6b;
    --canva-orange: #ffa56b;
    --card-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
    --input-bg: #3a3b3c;
    --input-text: #e4e6ea;
    --input-placeholder: #8a8d91;
}

.dark-mode body {
    background-color: var(--secondary);
    color: var(--text-primary);
}

.dark-mode .create-card {
    background-color: var(--card-bg);
    box-shadow: var(--card-shadow);
}

.dark-mode .create-card:hover {
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.6);
}

.dark-mode .card-header {
    background-color: #2d2d2d;
    border-bottom: 1px solid var(--border);
}

.dark-mode .card-header h1 {
    color: var(--text-primary);
}

.dark-mode .close-btn {
    color: var(--text-secondary);
}

.dark-mode .close-btn:hover {
    background-color: #3a3b3c;
    color: var(--text-primary);
}

.dark-mode .section-label {
    border-bottom: 1px solid var(--border);
}

.dark-mode .section-icon {
    background-color: var(--primary-light);
    color: var(--primary);
}

.dark-mode .section-label-text {
    color: var(--text-primary);
}

.dark-mode .form-label {
    color: var(--text-primary);
}

/* Enhanced input styling for dark mode */
.dark-mode .form-input,
.dark-mode .form-select,
.dark-mode .form-textarea {
    background-color: var(--input-bg);
    border: 1px solid var(--border);
    color: var(--input-text);
    transition: var(--transition);
}

/* Ensure placeholder text is visible */
.dark-mode .form-input::placeholder,
.dark-mode .form-textarea::placeholder {
    color: var(--input-placeholder);
    opacity: 0.8;
}

/* Style select dropdown options */
.dark-mode .form-select option {
    background-color: var(--input-bg);
    color: var(--input-text);
    border: none;
}

.dark-mode .form-input:focus,
.dark-mode .form-select:focus,
.dark-mode .form-textarea:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(45, 136, 255, 0.3);
    background-color: var(--input-bg);
    color: var(--input-text);
}

/* Ensure text remains visible when typing */
.dark-mode .form-input:not(:placeholder-shown),
.dark-mode .form-textarea:not(:placeholder-shown) {
    color: var(--input-text);
    background-color: var(--input-bg);
}

.dark-mode .form-helper {
    color: var(--text-secondary);
}

.dark-mode .file-upload {
    background-color: #2d2d2d;
    border: 2px dashed var(--border);
    color: var(--text-secondary);
}

.dark-mode .file-upload:hover {
    border-color: var(--primary);
    background-color: rgba(45, 136, 255, 0.08);
}

.dark-mode .file-upload i {
    color: var(--text-secondary);
}

.dark-mode .file-upload-text {
    color: var(--text-secondary);
}

.dark-mode .submit-button {
    background: linear-gradient(to right, var(--primary), var(--primary-dark));
    box-shadow: 0 2px 6px rgba(45, 136, 255, 0.4);
    color: white;
}

.dark-mode .submit-button:hover {
    box-shadow: 0 4px 12px rgba(45, 136, 255, 0.6);
    color: white;
}

.dark-mode .error-container {
    background-color: rgba(250, 62, 62, 0.12);
    border-left: 4px solid var(--error);
    color: var(--error);
}

.dark-mode .progress-bar {
    background-color: #3a3b3c;
}

.dark-mode .canva-tool {
    background: linear-gradient(to bottom, #2d2d2d, #242526);
    border: 1px solid var(--border);
}

.dark-mode .canva-tool::before {
    background: linear-gradient(to right, var(--canva-pink), var(--canva-orange));
}

.dark-mode .canva-title {
    color: var(--text-primary);
}

.dark-mode .canva-description {
    color: var(--text-secondary);
}

.dark-mode .canva-button {
    background: linear-gradient(to right, var(--canva-pink), var(--canva-orange));
    box-shadow: 0 2px 6px rgba(255, 107, 107, 0.4);
    color: white;
}

.dark-mode .canva-button:hover {
    box-shadow: 0 4px 12px rgba(255, 107, 107, 0.6);
    color: white;
}

.dark-mode .tool-toggle {
    background-color: #3a3b3c;
}

.dark-mode .toggle-text {
    color: var(--text-primary);
}

.dark-mode .toggle-slider {
    background-color: #5a5b5c;
}

.dark-mode input:checked + .toggle-slider {
    background: linear-gradient(to right, var(--canva-pink), var(--canva-orange));
}

.dark-mode .status-success {
    background-color: rgba(69, 214, 47, 0.12);
    color: var(--success);
    border: 1px solid rgba(69, 214, 47, 0.3);
}

.dark-mode .status-error {
    background-color: rgba(250, 62, 62, 0.12);
    color: var(--error);
    border: 1px solid rgba(250, 62, 62, 0.3);
}

.dark-mode .status-loading {
    background-color: rgba(45, 136, 255, 0.12);
    color: var(--primary);
    border: 1px solid rgba(45, 136, 255, 0.3);
}

.dark-mode .status-loading .spinner {
    border: 2px solid rgba(45, 136, 255, 0.3);
    border-top-color: var(--primary);
}

.dark-mode .optional-badge {
    background-color: #3a3b3c;
    color: var(--text-secondary);
}

.dark-mode .tag-pill {
    background-color: var(--primary-light);
    color: var(--primary);
}

/* Dark mode specific adjustments for better contrast */
.dark-mode .preview-image {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
}

.dark-mode .progress-text {
    color: var(--text-secondary);
}

/* Additional dark mode improvements for better readability */
.dark-mode .form-section {
    color: var(--text-primary);
}

.dark-mode .two-column {
    color: var(--text-primary);
}

/* Ensure all text elements are properly colored in dark mode */
.dark-mode .card-body {
    color: var(--text-primary);
}

.dark-mode .create-container {
    color: var(--text-primary);
}

/* Style for any additional text elements */
.dark-mode .text-muted {
    color: var(--text-secondary) !important;
}

.dark-mode .text-dark {
    color: var(--text-primary) !important;
}

.dark-mode .bg-light {
    background-color: var(--card-bg) !important;
}

.dark-mode .bg-white {
    background-color: var(--card-bg) !important;
}

/* Improved focus states for accessibility */
.dark-mode .form-input:focus::placeholder,
.dark-mode .form-textarea:focus::placeholder {
    color: var(--input-placeholder);
    opacity: 0.6;
}

/* Ensure dropdowns are styled correctly */
.dark-mode select.form-select {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='%23b0b3b8' viewBox='0 0 16 16'%3e%3cpath d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3e%3c/svg%3e");
    background-repeat: no-repeat;
    background-position: right 12px center;
    background-size: 16px 12px;
    appearance: none;
}

/* Style for file input text */
.dark-mode input[type="file"] {
    color: var(--text-primary);
}

.dark-mode input[type="file"]::file-selector-button {
    background-color: var(--primary);
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 6px;
    cursor: pointer;
    transition: var(--transition);
}

.dark-mode input[type="file"]::file-selector-button:hover {
    background-color: var(--primary-dark);
}
</style>

<style>
   

/* Dark Mode Styles for Audio Restrictions Warning */
.dark-mode .audio-restrictions-warning {
    background: linear-gradient(135deg, #2a2a1e 0%, #3d3d2a 100%);
    border: 2px solid #5d5d3d;
    border-radius: 12px;
    padding: 20px;
    margin: 15px 0;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    color: var(--text-primary);
}

.dark-mode .warning-header {
    display: flex;
    align-items: center;
    gap: 10px;
    color: #d4b642;
    margin-bottom: 15px;
    font-size: 1.1em;
}

.dark-mode .warning-header i {
    font-size: 1.3em;
    color: #d4b642;
}

.dark-mode .restriction-content {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin: 15px 0;
}

.dark-mode .allowed-list,
.dark-mode .restricted-list {
    padding: 15px;
    border-radius: 8px;
}

.dark-mode .allowed-list {
    background: rgba(40, 167, 69, 0.15);
    border: 1px solid rgba(40, 167, 69, 0.4);
}

.dark-mode .restricted-list {
    background: rgba(220, 53, 69, 0.15);
    border: 1px solid rgba(220, 53, 69, 0.4);
}

.dark-mode .allowed-list h4,
.dark-mode .restricted-list h4 {
    margin: 0 0 10px 0;
    font-size: 0.95em;
    display: flex;
    align-items: center;
    gap: 8px;
    color: var(--text-primary);
}

.dark-mode .allowed-list ul,
.dark-mode .restricted-list ul {
    margin: 0;
    padding-left: 20px;
    font-size: 0.85em;
    color: var(--text-secondary);
}

.dark-mode .allowed-list li,
.dark-mode .restricted-list li {
    margin-bottom: 5px;
    line-height: 1.4;
}

.dark-mode .warning-footer {
    border-top: 1px solid #5d5d3d;
    padding-top: 15px;
    margin-top: 10px;
}

.dark-mode .warning-footer p {
    margin: 0;
    font-size: 0.9em;
    color: #d4b642;
    text-align: center;
}

/* Dark mode for audio preview states */
.dark-mode .audio-preview.approved {
    background: rgba(40, 167, 69, 0.15);
    border: 1px solid rgba(40, 167, 69, 0.4);
    color: var(--text-primary);
}

.dark-mode .audio-preview.rejected {
    background: rgba(220, 53, 69, 0.15);
    border: 1px solid rgba(220, 53, 69, 0.4);
    color: var(--text-primary);
}

.dark-mode .preview-loading {
    color: var(--text-secondary);
}

.dark-mode .audio-details {
    color: var(--text-secondary);
}

/* Responsive design for dark mode */
@media (max-width: 768px) {
    .dark-mode .restriction-content {
        grid-template-columns: 1fr;
        gap: 15px;
    }
    
    .dark-mode .audio-restrictions-warning {
        padding: 15px;
    }
}

/* Ensure text colors work well in dark mode */
.dark-mode .text-success {
    color: #4cd964 !important;
}

.dark-mode .text-danger {
    color: #ff6b6b !important;
}

.dark-mode .form-helper {
    color: var(--text-secondary);
}

/* Force dark mode styling on all form elements */
.dark-mode input[type="text"],
.dark-mode input[type="number"],
.dark-mode input[type="email"],
.dark-mode input[type="password"],
.dark-mode input[type="url"],
.dark-mode textarea,
.dark-mode select {
    background-color: var(--input-bg) !important;
    border: 1px solid var(--border) !important;
    color: var(--input-text) !important;
    padding: 12px 16px !important;
    border-radius: 8px !important;
    font-family: inherit !important;
    font-size: 15px !important;
    width: 100% !important;
    box-sizing: border-box !important;
}

.dark-mode input[type="text"]:focus,
.dark-mode input[type="number"]:focus,
.dark-mode input[type="email"]:focus,
.dark-mode input[type="password"]:focus,
.dark-mode input[type="url"]:focus,
.dark-mode textarea:focus,
.dark-mode select:focus {
    outline: none !important;
    border-color: var(--primary) !important;
    box-shadow: 0 0 0 3px rgba(45, 136, 255, 0.3) !important;
}

.dark-mode input::placeholder,
.dark-mode textarea::placeholder {
    color: var(--input-placeholder) !important;
    opacity: 0.8 !important;
}

/* Style select dropdown specifically */
.dark-mode select {
    appearance: none !important;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='%23b0b3b8' viewBox='0 0 16 16'%3e%3cpath d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3e%3c/svg%3e") !important;
    background-repeat: no-repeat !important;
    background-position: right 12px center !important;
    background-size: 16px 12px !important;
}

.dark-mode select option {
    background-color: var(--input-bg) !important;
    color: var(--input-text) !important;
}

/* Specific styling for textareas */
.dark-mode textarea {
    min-height: 120px !important;
    resize: vertical !important;
    line-height: 1.5 !important;
}
/* Tags input styling */
.popular-tags {
    margin-top: 10px;
    padding: 10px;
    background: #f8f9fa;
    border-radius: 6px;
}

.popular-tags-title {
    font-size: 12px;
    color: #6c757d;
    margin-bottom: 8px;
    font-weight: 600;
}

.popular-tags-list {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.suggested-tag {
    display: inline-block;
    padding: 4px 12px;
    background: white;
    border: 1px solid #dee2e6;
    border-radius: 20px;
    font-size: 12px;
    color: #495057;
    cursor: pointer;
    transition: all 0.2s;
}

.suggested-tag:hover {
    background: #4a90e2;
    color: white;
    border-color: #4a90e2;
}

/* Transparent Glass Dark Mode for Popular Tags */
.dark-mode .popular-tags {
    margin-top: 10px;
    padding: 12px;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 8px;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
}

.dark-mode .popular-tags-title {
    font-size: 12px;
    color: rgba(255, 255, 255, 0.8);
    margin-bottom: 10px;
    font-weight: 600;
}

.dark-mode .popular-tags-list {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.dark-mode .suggested-tag {
    display: inline-block;
    padding: 5px 14px;
    background: rgba(255, 255, 255, 0.08);
    border: 1px solid rgba(255, 255, 255, 0.15);
    border-radius: 20px;
    font-size: 12px;
    color: rgba(255, 255, 255, 0.9);
    cursor: pointer;
    transition: all 0.3s ease;
    backdrop-filter: blur(5px);
    -webkit-backdrop-filter: blur(5px);
}

.dark-mode .suggested-tag:hover {
    background: rgba(74, 222, 128, 0.2); /* Green tint */
    border-color: rgba(74, 222, 128, 0.4);
    color: #ffffff;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(74, 222, 128, 0.2);
}

/* Optional: Add a subtle glow effect on hover */
.dark-mode .suggested-tag:hover {
    text-shadow: 0 0 8px rgba(255, 255, 255, 0.3);
}

/* Active state when clicked */
.dark-mode .suggested-tag:active {
    transform: translateY(0);
    transition: transform 0.1s ease;
}
</style>
</head>

<body>
    <div class="create-wrapper">
        <div class="create-container">
         
            
            <div class="progress-bar">
                <div class="progress-fill" id="formProgress"></div>
                <div class="progress-text" id="progressText">0% complete</div>
            </div>
            
            <div class="create-card">
                <div class="card-header">
                    <h1><i class="fas fa-redo-alt"></i> Recreate Campaign</h1>
                    <button class="close-btn">&times;</button>
                </div>
                
                <div class="card-body">
                    <form method="post" enctype="multipart/form-data" id="campaignForm">
                        {% csrf_token %}
                        
                        <!-- Display Error Messages -->
                        {% if form.errors %}
                            <div class="error-container">
                                <strong>Please correct the following errors:</strong>
                                <ul>
                                    {% for field in form %}
                                        {% for error in field.errors %}
                                            <li>{{ field.label }}: {{ error }}</li>
                                        {% endfor %}
                                    {% endfor %}
                                </ul>
                            </div>
                        {% endif %}
                        
                        <!-- Campaign Basics Section -->
                        <div class="section-label">
                            <div class="section-icon">
                                <i class="fas fa-edit"></i>
                            </div>
                            <div class="section-label-text">Campaign Basics</div>
                        </div>
                        
                        <!-- Title -->
                        <div class="form-section">
                            <label for="{{ form.title.id_for_label }}" class="form-label">Campaign Title</label>
                            {{ form.title }}
                            <span class="form-helper">Choose a clear and engaging title that describes your campaign</span>
                        </div>
                        
                        <!-- Content -->
                        <div class="form-section">
                            <label for="{{ form.content.id_for_label }}" class="form-label">Description</label>
                            {{ form.content }}
                            <span class="form-helper">Be specific about your goals and how people can help</span>
                        </div>
                        
                        <!-- Design Section -->
                        <div class="section-label">
                            <div class="section-icon">
                                <i class="fas fa-paint-brush"></i>
                            </div>
                            <div class="section-label-text">Design & Media</div>
                        </div>
                        
                        <!-- Canva GIF Creation Tool -->
                        <div class="form-section">
                            <div class="tool-toggle">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="canvaToggle">
                                    <span class="toggle-slider"></span>
                                </label>
                                <span class="toggle-text">Create a GIF poster with Canva</span>
                            </div>
                            
                            <div class="canva-tool" id="canvaTool">
                                <div class="canva-header">
                                    <div class="canva-logo">C</div>
                                    <div class="canva-title">Canva Design</div>
                                </div>
                                <p class="canva-description">Create an eye-catching GIF poster for your campaign with our integrated Canva tool. No design skills needed!</p>
                                <button type="button" class="canva-button" id="openCanva">
                                    <i class="fas fa-paint-brush"></i> Design with Canva
                                </button>
                                
                                <!-- Status indicators -->
                                <div class="canva-status status-loading" id="canvaLoading">
                                    <span class="spinner"></span> Waiting for Canva design...
                                </div>
                                <div class="canva-status status-success" id="canvaSuccess">
                                    <i class="fas fa-check-circle"></i> Poster created successfully!
                                </div>
                                <div class="canva-status status-error" id="canvaError">
                                    <i class="fas fa-exclamation-circle"></i> Could not connect to Canva. Please try again.
                                </div>
                            </div>
                        </div>
                        
                        <!-- Poster Upload -->
                        <div class="form-section">
                            <label class="form-label">Campaign Image / Poster</label>
                            <label for="{{ form.poster.id_for_label }}" class="file-upload">
                                <i class="fas fa-cloud-upload-alt"></i>
                                <div class="file-upload-text">Click to upload or drag and drop</div>
                                <span class="form-helper">PNG, JPG, GIF or WEBP (max. 5MB)</span>
                            </label>
                            {{ form.poster }}
                            <div id="posterPreview" class="preview-container"></div>
                        </div>
                        
                        <!-- Audio Upload -->
                      <!-- Replace your current audio upload section with this -->
<div class="form-section">
    <label class="form-label">Campaign Sound <span class="optional-badge">Optional</span></label>
    
    <!-- Audio Restrictions Warning Box -->
    <div class="audio-restrictions-warning">
        <div class="warning-header">
            <i class="fas fa-exclamation-triangle"></i>
            <strong>Audio Usage Guidelines</strong>
        </div>
        <div class="restriction-content">
            <div class="allowed-list">
                <h4><i class="fas fa-check-circle text-success"></i> Allowed</h4>
                <ul>
                    <li>Your original recordings</li>
                    <li>Royalty-free music</li>
                    <li>Sound effects you created</li>
                    <li>Voice recordings</li>
                </ul>
            </div>
            <div class="restricted-list">
                <h4><i class="fas fa-ban text-danger"></i> Restricted</h4>
                <ul>
                    <li>Copyrighted music (pop songs, albums)</li>
                    <li>Audio from movies, TV shows, games</li>
                    <li>Commercial jingles or advertisements</li>
                    <li>Sample packs without proper license</li>
                </ul>
            </div>
        </div>
        <div class="warning-footer">
            <p><strong>Note:</strong> Violations may result in campaign removal and account suspension.</p>
        </div>
    </div>

    <!-- File Upload Area -->
    <label for="id_audio" class="file-upload">
        <i class="fas fa-music"></i>
        <div class="file-upload-text">Click to upload or drag and drop</div>
        <span class="form-helper">MP3, WAV, or OGG format (max. 5MB, max 30 seconds)</span>
    </label>
    <input type="file" id="id_audio" name="audio" accept="audio/*" style="display: none;" onchange="previewAudio(event)">
    <div id="audioPreview" class="preview-container"></div>
</div>
                        
                        <!-- Settings Section -->
                        <div class="section-label">
                            <div class="section-icon">
                                <i class="fas fa-cog"></i>
                            </div>
                            <div class="section-label-text">Campaign Settings</div>
                        </div>
                        
                        <!-- Category and Visibility -->
                        <div class="two-column">
                            <div class="form-section">
                                <label for="{{ form.category.id_for_label }}" class="form-label">Category</label>
                                {{ form.category }}
                            </div>
                            
<!-- Tags Section -->
<div class="form-section">
    <label for="id_tags_input" class="form-label">Tags <span class="optional-badge">Optional</span></label>
    <input type="text" id="id_tags_input" name="tags_input" class="form-input" 
           placeholder="education, children, school, learning..."
           value="{% if form.tags_input.value %}{{ form.tags_input.value }}{% endif %}">
    <span class="form-helper">
        <i class="fas fa-tags"></i> 
        Add relevant tags separated by commas. This helps people discover your campaign.
    </span>
    
    <!-- Popular tags suggestions -->
    <div class="popular-tags">
        <div class="popular-tags-title">Popular tags:</div>
        <div class="popular-tags-list">
            <span class="suggested-tag" data-tag="education">education</span>
            <span class="suggested-tag" data-tag="children">children</span>
            <span class="suggested-tag" data-tag="community">community</span>
            <span class="suggested-tag" data-tag="health">health</span>
            <span class="suggested-tag" data-tag="environment">environment</span>
            <span class="suggested-tag" data-tag="urgent">urgent</span>
        </div>
    </div>
</div>
                            <div class="form-section">
                                <label for="{{ form.visibility.id_for_label }}" class="form-label">Visibility</label>
                                {{ form.visibility }}
                                <span class="form-helper"><span class="tag-pill">Tip</span> Public campaigns can be discovered by everyone</span>
                            </div>
                        </div>
                        
                        <!-- Duration -->
                        <div class="two-column">
                            <div class="form-section">
                                <label for="{{ form.duration.id_for_label }}" class="form-label">Duration</label>
                                {{ form.duration }}
                            </div>
                            
                            <div class="form-section">
                                <label for="{{ form.duration_unit.id_for_label }}" class="form-label">Unit</label>
                                {{ form.duration_unit }}
                            </div>
                        </div>
                        
                        <!-- Funding Goal -->
                        <div class="form-section">
                            <label for="{{ form.funding_goal.id_for_label }}" class="form-label">Funding Goal <span class="optional-badge">Optional</span></label>
                            {{ form.funding_goal }}
                            <span class="form-helper">Set a fundraising target if needed</span>
                        </div>
                        
                        <!-- Hidden field to store Canva poster data -->
                        <input type="hidden" id="canva_poster_data" name="canva_poster_data">
                        
                        <!-- Submit Button -->
                        <button type="submit" class="submit-button">
                            <i class="fas fa-paper-plane"></i> Recreate Campaign
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>



<script>
      // Image preview function
        function previewImage(event) {
            const fileInput = event.target;
            const previewContainer = document.getElementById('posterPreview');
            previewContainer.innerHTML = '';
            
            const file = fileInput.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const img = document.createElement('img');
                    img.src = e.target.result;
                    img.alt = 'Poster preview';
                    img.className = 'preview-image';
                    previewContainer.appendChild(img);
                };
                reader.readAsDataURL(file);
            }
        }
        
       // Audio preview function - ALTERNATIVE VERSION
function previewAudio(event) {
    const fileInput = event.target;
    const previewContainer = document.getElementById('audioPreview');
    
    // Clean up previous audio preview
    const previousAudio = previewContainer.querySelector('audio');
    if (previousAudio) {
        const previousSrc = previousAudio.src;
        if (previousSrc.startsWith('blob:')) {
            URL.revokeObjectURL(previousSrc);
        }
        previewContainer.innerHTML = '';
    }
    
    const file = fileInput.files[0];
    if (file && file.type.startsWith('audio/')) {
        const audio = document.createElement('audio');
        audio.controls = true;
        audio.style.width = '100%';
        audio.style.marginTop = '10px';
        
        const objectURL = URL.createObjectURL(file);
        audio.src = objectURL;
        
        previewContainer.appendChild(audio);
        
        // Revoke the object URL when the audio element is removed
        // or when a new file is selected (handled at the beginning of this function)
        
    } else if (file) {
        previewContainer.innerHTML = '<p class="form-helper" style="color:#f02849;">Please select a valid audio file</p>';
    }
}
</script>
    <script>
     
        // Form progress indicator
        function updateProgress() {
            const form = document.getElementById('campaignForm');
            const inputs = form.querySelectorAll('input, textarea, select');
            const progressFill = document.getElementById('formProgress');
            const progressText = document.getElementById('progressText');
            
            let filledCount = 0;
            inputs.forEach(input => {
                if (input.type === 'hidden' && input.id === 'canva_poster_data' && input.value) {
                    filledCount++;
                } else if (input.value.trim() !== '' || (input.type === 'file' && input.files.length > 0)) {
                    filledCount++;
                }
            });
            
            const progress = (filledCount / inputs.length) * 100;
            progressFill.style.width = `${progress}%`;
            progressText.textContent = `${Math.round(progress)}% complete`;
        }
        
        // Canva Tool Functionality
        document.addEventListener('DOMContentLoaded', function() {
            const formElements = document.querySelectorAll('input, textarea, select');
            formElements.forEach(element => {
                element.addEventListener('input', updateProgress);
                element.addEventListener('change', updateProgress);
            });
            
            // Initialize progress
            updateProgress();
            
            // Close button functionality
            document.querySelector('.close-btn').addEventListener('click', function() {
                if(confirm('Are you sure you want to cancel? Your progress will be lost.')) {
                    window.history.back();
                }
            });
            
            // Canva tool toggle
            const canvaToggle = document.getElementById('canvaToggle');
            const canvaTool = document.getElementById('canvaTool');
            
            canvaToggle.addEventListener('change', function() {
                canvaTool.style.display = this.checked ? 'block' : 'none';
                updateProgress();
            });
            
            // Initially hide the Canva tool
            canvaTool.style.display = 'none';
            
            // Canva functionality
            const openCanvaButton = document.getElementById('openCanva');
            const canvaLoading = document.getElementById('canvaLoading');
            const canvaSuccess = document.getElementById('canvaSuccess');
            const canvaError = document.getElementById('canvaError');
            const posterPreview = document.getElementById('posterPreview');
            const canvaPosterData = document.getElementById('canva_poster_data');
            
            // Function to show status message
            function showStatus(statusElement) {
                // Hide all status messages first
                canvaLoading.style.display = 'none';
                canvaSuccess.style.display = 'none';
                canvaError.style.display = 'none';
                
                // Show the requested status
                statusElement.style.display = 'block';
            }
            
            // Function to handle Canva poster data
            function handleCanvaPosterData(data) {
                // Store the data in the hidden field
                canvaPosterData.value = JSON.stringify(data);
                
                // Show the poster preview
                posterPreview.innerHTML = `
                    <div style="text-align: center;">
                        <img src="${data.previewUrl}" alt="Canva poster preview" class="preview-image">
                        <p style="margin-top: 10px; font-size: 14px; color: var(--text-secondary);">
                            Poster created with Canva
                        </p>
                    </div>
                `;
                
                // Show success message
                showStatus(canvaSuccess);
                
                // Update form progress
                updateProgress();
            }
            
            // Function to check for Canva response
            function checkForCanvaResponse() {
                // Check if we have a Canva response in localStorage
                const canvaResponse = localStorage.getItem('canva_poster_response');
                if (canvaResponse) {
                    try {
                        const data = JSON.parse(canvaResponse);
                        handleCanvaPosterData(data);
                        
                        // Clear the stored response
                        localStorage.removeItem('canva_poster_response');
                    } catch (e) {
                        console.error('Error parsing Canva response:', e);
                        showStatus(canvaError);
                    }
                }
            }
            
            // Check for Canva response on page load
            checkForCanvaResponse();
            
            // Also check periodically in case the page was already loaded when Canva finished
            const canvaCheckInterval = setInterval(checkForCanvaResponse, 1000);
            
            openCanvaButton.addEventListener('click', function() {
                // Show loading status
                showStatus(canvaLoading);
                
                // Generate a unique ID for this Canva session
                const canvaSessionId = 'canva_' + Date.now();
                
                // Store the session ID to identify responses
                localStorage.setItem('canva_session_id', canvaSessionId);
                
                // Open Canva in a new tab
                const canvaUrl = "{% url 'poster_canva' %}?session_id=" + encodeURIComponent(canvaSessionId);
                window.open(canvaUrl, '_blank');
                
                // Set up a listener for storage events (for cross-tab communication)
                window.addEventListener('storage', function(e) {
                    if (e.key === 'canva_poster_response') {
                        checkForCanvaResponse();
                    }
                });
            });
            
            // Set up a message listener for postMessage communication
            window.addEventListener('message', function(event) {
                // Verify the origin for security
                if (event.origin !== window.location.origin) {
                    return;
                }
                
                // Check if this is a Canva response
                if (event.data && event.data.type === 'canva_poster_data') {
                    handleCanvaPosterData(event.data.payload);
                }
            });
            
            // Add drag and drop functionality for file uploads
            const fileUploads = document.querySelectorAll('.file-upload');
            fileUploads.forEach(upload => {
                upload.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    this.style.borderColor = 'var(--primary)';
                    this.style.backgroundColor = 'rgba(24, 119, 242, 0.05)';
                });
                
                upload.addEventListener('dragleave', function(e) {
                    e.preventDefault();
                    this.style.borderColor = '';
                    this.style.backgroundColor = '';
                });
                
                upload.addEventListener('drop', function(e) {
                    e.preventDefault();
                    this.style.borderColor = '';
                    this.style.backgroundColor = '';
                    
                    const files = e.dataTransfer.files;
                    if (files.length) {
                        const inputId = this.htmlFor;
                        const input = document.getElementById(inputId);
                        if (input) {
                            input.files = files;
                            const event = new Event('change', { bubbles: true });
                            input.dispatchEvent(event);
                        }
                    }
                });
            });
            
            // Set up event listeners for the file inputs
            document.getElementById('{{ form.poster.id_for_label }}').addEventListener('change', previewImage);
            document.getElementById('{{ form.audio.id_for_label }}').addEventListener('change', previewAudio);
        });
        
        // Auto-hide error messages after 5 seconds
        setTimeout(function() {
            const errorDiv = document.querySelector('.error-container');
            if (errorDiv) {
                errorDiv.style.display = 'none';
            }
        }, 5000);
    </script>


    <script>
        // Simple tag suggestions
document.addEventListener('DOMContentLoaded', function() {
    const tagsInput = document.getElementById('id_tags_input');
    const suggestedTags = document.querySelectorAll('.suggested-tag');
    
    // Add suggested tag to input
    suggestedTags.forEach(tag => {
        tag.addEventListener('click', function() {
            const currentValue = tagsInput.value;
            const newTag = this.getAttribute('data-tag');
            
            if (currentValue === '') {
                tagsInput.value = newTag;
            } else {
                // Check if tag already exists
                const existingTags = currentValue.split(',').map(t => t.trim());
                if (!existingTags.includes(newTag)) {
                    tagsInput.value = currentValue + ', ' + newTag;
                }
            }
            
            // Focus back on input
            tagsInput.focus();
        });
    });
    
    // Auto-format as user types (optional)
    tagsInput.addEventListener('blur', function() {
        // Clean up spacing when user leaves the field
        const tags = this.value.split(',')
            .map(tag => tag.trim())
            .filter(tag => tag !== '')
            .join(', ');
        this.value = tags;
    });
});
    </script>
</body>
</html>
{% endblock content %}