{% extends 'main/face.html' %}

{% load custom_filters %} 
{% load static %}

{% block content %}


<style>
/* Simple, accessible styling */
.simple-campaigns-container {
    max-width: 600px;
    margin: 0 auto;
    font-family: Arial, sans-serif;
}

.simple-campaign-card {
    background: white;
    border: 1px solid #e0e0e0;
    border-radius: 10px;
    margin-bottom: 20px;
    overflow: hidden;
}

.creator-info {
    display: flex;
    align-items: center;
    padding: 12px;
    position: relative;
}

.creator-pic img {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    object-fit: cover;
    margin-right: 10px;
}

.creator-details {
    flex-grow: 1;
}


.campaign-time {
    font-size: 12px;
    color: #777;
}

.campaign-menu {
    color: #666;
    cursor: pointer;
    padding: 5px;
}

.menu-dropdown {
    display: none;
    position: absolute;
    right: 10px;
    top: 40px;
    background: white;
    border: 1px solid #ddd;
    border-radius: 5px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    z-index: 10;
}

.menu-dropdown a {
    display: block;
    padding: 8px 15px;
    color: #333;
    text-decoration: none;
    font-size: 14px;
}

.menu-dropdown a:hover {
    background: #f5f5f5;
}

.campaign-image-section {
    position: relative;
}

.main-campaign-image {
    width: 100%;
   
   
    display: block;
}

.no-image-placeholder {
    height: 200px;
    background: #f5f5f5;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    color: #999;
}

.no-image-placeholder i {
    font-size: 40px;
    margin-bottom: 10px;
}


/* ==================== ENHANCED CAMPAIGN CATEGORY STYLES ==================== */

.campaign-category {
    font-weight: bold;
    text-shadow: 0 1px 2px rgba(0,0,0,0.5);
    padding: 6px 14px; /* Added padding */
    border-radius: 20px; /* Rounded corners */
    background: rgba(255, 255, 255, 0.15); /* Semi-transparent background */
    backdrop-filter: blur(8px); /* Frosted glass effect */
    -webkit-backdrop-filter: blur(8px);
    border: 1px solid rgba(255, 255, 255, 0.3); /* Subtle border */
    display: inline-block; /* Make background fit content */
    font-size: 13px;
    color: white;
    margin: 0;
    transition: all 0.3s ease;
    letter-spacing: 0.5px;
    text-transform: uppercase; /* Makes text look more like a badge */
}

/* Hover effect for interactivity */
.campaign-category:hover {
    background: rgba(255, 255, 255, 0.25);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    border-color: rgba(255, 255, 255, 0.5);
}

/* Light mode specific adjustments */
body:not(.dark-mode) .campaign-category {
    background: rgba(0, 0, 0, 0.3); /* Darker background for light mode */
    color: #ffffff;
}

/* Dark mode specific styles */
body.dark-mode .campaign-category {
    color: #ffffff; /* Light text */
    background: rgba(255, 255, 255, 0.1); /* Subtle background in dark mode */
    border-color: rgba(255, 255, 255, 0.2);
}

body.dark-mode .campaign-category:hover {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.4);
}

/* Desktop adjustments */
@media (min-width: 769px) {
    .campaign-category {
        padding: 8px 18px; /* Slightly larger on desktop */
        font-size: 14px;
        margin: 5px 0 0 5px; /* Small margin for positioning */
    }
}

/* Mobile adjustments */
@media (max-width: 768px) {
    .campaign-category {
        padding: 5px 12px; /* Slightly smaller on mobile */
        font-size: 12px;
        margin: 5px 0 0 5px;
    }
}


.join-prompt {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(0,0,0,0.7);
    color: white;
    padding: 10px 15px;
    border-radius: 20px;
    font-size: 14px;
}

.join-prompt i {
    margin-right: 5px;
}
.donate-button-overlay {
    position: absolute;
    bottom: 60px;
    left: 10px;
}

.simple-donate-btn {
    background: #FF5722;
    color: white;
    padding: 8px;
    border-radius: 20px;
    text-decoration: none;
    font-size: 14px;
    display: flex;
    align-items: center;
    transition: all 0.3s ease;
    width: 40px; /* Fixed width for icon-only state */
    overflow: hidden;
    border: 1px solid transparent; /* Add for smooth hover transition */
}

.simple-donate-btn {
    min-width: 40px;
    width: 40px;
}

.donate-text {
    margin-left: 8px;
    white-space: nowrap;
    opacity: 0;
    width: 0;
    transition: all 0.3s ease;
}

.simple-donate-btn:hover {
    width: auto; /* Allow full width on hover */
    padding: 8px 15px;
    background: white; /* White background on hover */
    color: #FF5722; /* Orange text on hover */
    border-color: #FF5722; /* Orange border on hover */
}

.simple-donate-btn:hover .donate-text {
    opacity: 1;
    width: auto;
    margin-left: 8px;
}

/* For accessibility - ensure text is readable when focused */
.simple-donate-btn:focus {
    width: auto;
    padding: 8px 15px;
    background: white;
    color: #FF5722;
    border-color: #FF5722;
}

.campaign-basic-info {
    padding: 12px;
}

.simple-campaign-title {
    margin: 0 0 8px 0;
    font-size: 18px;
    color: #333;
}

.simple-campaign-objective {
    font-size: 14px;
    color: #555;
    line-height: 1.4;
}


/* Time Left Styling */
.time-left-info {
    font-size: 13px;
    color: #666;
    display: flex;
    align-items: center;
    margin-left: 15px;
    padding: 4px 10px;
    border-radius: 15px;
    background: #f5f5f5;
}

.time-left-info i {
    margin-right: 5px;
    font-size: 12px;
}

/* Urgent time styling */
.time-left-info .urgent {
    color: #D32F2F;
    font-weight: 600;
}

.time-left-info .warning {
    color: #F57C00;
    font-weight: 600;
}

/* Dark mode */
.dark-mode .time-left-info {
    color: #b0b0b0;
    background: #2d2d2d;
}

.dark-mode .time-left-info .urgent {
    color: #ff6b6b;
}

.dark-mode .time-left-info .warning {
    color: #ffa726;
}

/* Mobile responsive */
@media (max-width: 480px) {
    .campaign-status {
        flex-wrap: wrap;
        gap: 8px;
    }
    
    .time-left-info {
        margin-left: 0;
        order: 3; /* Move to new line on mobile */
        width: 100%;
        justify-content: center;
        margin-top: 5px;
    }
}



.campaign-status {
    display: flex;
    padding: 0 12px 12px;
    align-items: center;
}

.status-badge {
    padding: 4px 10px;
    border-radius: 15px;
    font-size: 13px;
    margin-right: 10px;
    display: flex;
    align-items: center;
}

.status-badge i {
    margin-right: 5px;
}

.status-badge.active {
    background: #E8F5E9;
    color: #2E7D32;
}

.status-badge.outdated {
    background: #FFEBEE;
    color: #C62828;
}

.runtime-info {
    font-size: 13px;
    color: #666;
}

.runtime-info i {
    margin-right: 5px;
}
/* Instagram-style action buttons */
.simple-actions {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 12px;
    border-top: 1px solid #efefef;
    margin-top: 4px;
}

.action-group {
    display: flex;
    gap: 16px; /* Instagram uses more spacing between icons */
}

.simple-action-btn {
    background: none;
    border: none;
    color: #262626; /* Instagram's dark gray */
    font-size: 14px;
    padding: 8px 0;
    margin-right: 0;
    border-radius: 0;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 6px;
    transition: all 0.2s ease;
}

.simple-action-btn i {
    font-size: 24px; /* Instagram uses larger icons */
    margin-right: 0;
}

/* Like button - Instagram style */
.simple-action-btn.love-btn {
    color: #262626;
}

.simple-action-btn.love-btn i {
    transition: transform 0.2s ease;
}

.simple-action-btn.love-btn:hover i {
    transform: scale(1.1);
}

/* Active/liked state */
.simple-action-btn.love-btn .fas.fa-heart {
    color: #ed4956; /* Instagram's heart red */
}

/* Comment and share icons */
.simple-action-btn i.far.fa-comment,
.simple-action-btn i.fas.fa-share-alt {
    color: #262626;
}

/* Hide the text labels on mobile (Instagram does this) */
@media (max-width: 768px) {
    .simple-action-btn span:not(.action-label) {
        display: none; /* Hide the count numbers on mobile if you want */
    }
    
    .action-group {
        gap: 24px; /* More spacing on mobile */
    }
    
    .simple-action-btn i {
        font-size: 26px; /* Even larger on mobile */
    }
}

/* Dark mode Instagram-style */
.dark-mode .simple-actions {
    border-top-color: #2d2d2d;
}

.dark-mode .simple-action-btn,
.dark-mode .simple-action-btn i {
    color: #f5f5f5;
}

.dark-mode .simple-action-btn.love-btn .fas.fa-heart {
    color: #ed4956; /* Keep heart red even in dark mode */
}

/* Remove hover color changes to keep Instagram's subtle style */
.simple-action-btn:hover {
    color: #262626;
    background-color: transparent;
}

.simple-action-btn.love-btn:hover {
    color: #262626;
}

/* Add subtle active state */
.simple-action-btn:active {
    opacity: 0.7;
    transform: scale(0.98);
}
.simple-join-btn {
    /* Base styles are now inline */
}

.simple-join-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 2px 6px rgba(0,0,0,0.05);
}

.leave-btn:hover {
    background: rgba(237, 73, 86, 0.15) !important;
    border-color: rgba(237, 73, 86, 0.4) !important;
}

.simple-join-btn:not(.leave-btn):hover {
    background: rgba(0, 149, 246, 0.15) !important;
    border-color: rgba(0, 149, 246, 0.4) !important;
}

.simple-join-btn:active {
    transform: translateY(0);
    box-shadow: none;
}

/* Follow button in creator info section */
.creator-follow {
    margin-left: auto;
    display: flex;
    align-items: center;
}

.creator-follow .follow-btn {
    margin-left: 10px;
}

@media (max-width: 480px) {
    .simple-campaign-card {
        border-radius: 0;
        border-left: none;
        border-right: none;
    }

    .simple-action-btn .label {
        display: none;
    }
    
    .creator-follow {
        flex-direction: column;
        align-items: flex-end;
    }
    
    .creator-follow .followers-count {
        margin-left: 0;
        margin-top: 4px;
    }
}

.campaign-participation-links {
    display: flex;
    padding: 0 12px 12px;
    gap: 10px;
}












.participation-link {
    flex: 1;
    background: #f5f5f5;
    padding: 10px;
    border-radius: 8px;
    text-align: center;
    text-decoration: none;
    color: #333;
    font-weight: 500;
    display: flex;
    align-items: center;
    justify-content: center;
}

.participation-link i {
    margin-right: 8px;
    color: #2196F3;
}

.participation-link:hover {
    background: #e0e0e0;
}


/* ===== Dark Mode Styles ===== */
.dark-mode .simple-campaigns-container {
    background-color: #121212;
}

.dark-mode .simple-campaign-card {
    background: #1e1e1e;
    border-color: #333;
}

.dark-mode .creator-name,
.dark-mode .simple-campaign-title,
.dark-mode .campaign-caption strong {
    color: #f0f0f0;
}

.dark-mode .campaign-time,
.dark-mode .simple-campaign-objective,
.dark-mode .campaign-caption,
.dark-mode .campaign-content-points,
.dark-mode .runtime-info {
    color: #b0b0b0;
}

.dark-mode .campaign-menu {
    color: #b0b0b0;
}

.dark-mode .menu-dropdown {
    background: #2d2d2d;
    border-color: #444;
}

.dark-mode .menu-dropdown a {
    color: #e0e0e0;
}

.dark-mode .menu-dropdown a:hover {
    background: #383838;
}

.dark-mode .no-image-placeholder {
    background: #2a2a2a;
    color: #666;
}

.dark-mode .status-badge.active {
    background: #1b5e20;
    color: #a5d6a7;
}

.dark-mode .status-badge.outdated {
    background: #b71c1c;
    color: #ffcdd2;
}

.dark-mode .simple-actions {
    border-top-color: #333;
}

.dark-mode .simple-action-btn {
    color: #b0b0b0;
}

.dark-mode .simple-action-btn:hover {
    color: #e0e0e0;
    background-color: rgba(255, 255, 255, 0.05);
}

.dark-mode .simple-action-btn.love-btn {
    color: #ff2d55;
}

.dark-mode .simple-action-btn.love-btn:hover {
    color: #ff6b8b;
}

.dark-mode .participation-link {
    background: #2a2a2a;
    color: #e0e0e0;
}

.dark-mode .participation-link:hover {
    background: #383838;
}

.dark-mode .participation-link i {
    color: #64b5f6;
}

.dark-mode .see-more-btn,
.dark-mode .see-less-btn {
    color: #64b5f6;
}

.dark-mode .see-more-btn:hover,
.dark-mode .see-less-btn:hover {
    background: rgba(255, 255, 255, 0.05);
    color: #90caf9;
}

/* Dark mode follow button styles */
.dark-mode .follow-btn {
    background: #1e1e1e;
    color: #1DA1F2;
    border-color: #1DA1F2;
}

.dark-mode .follow-btn:hover {
    background: rgba(29, 161, 242, 0.2);
}

.dark-mode .follow-btn.following {
    background: #1DA1F2;
    color: white;
}

.dark-mode .follow-btn.following:hover {
    background: #e0245e;
}

.dark-mode .followers-count {
    color: #b0b0b0;
}

/* Overlay elements in dark mode */
.dark-mode .join-prompt,
.dark-mode .campaign-views-overlay {
    background: rgba(0, 0, 0, 0.8);
}

.dark-mode .campaign-views-overlay:hover {
    background: rgba(0, 0, 0, 0.9);
}

/* Progress bar adjustments */
.dark-mode .progress-bar {
    background: rgba(255, 255, 255, 0.1);
}

/* Donate button in dark mode */
.dark-mode .simple-donate-btn {
    background: #ff7043;
}

/* Join/Leave buttons in dark mode */
.dark-mode .simple-join-btn {
    background: #1976d2;
}

.dark-mode .simple-join-btn.leave-btn {
    background: #d32f2f;
}

/* List bullets in dark mode */
.dark-mode .campaign-content-points li:before {
    color: #666;
}

/* Mobile adjustments for dark mode */
@media (max-width: 480px) {
    .dark-mode .simple-campaign-card {
        border-color: #333;
    }
}

/* Views Counter with Tooltip */
.campaign-views-overlay {
    position: absolute;
    top: 10px;
    right: 10px;
    background: rgba(0, 0, 0, 0.6);
    color: white;
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 13px;
    display: flex;
    align-items: center;
    gap: 5px;
    backdrop-filter: blur(2px);
    cursor: pointer;
    transition: all 0.2s ease;
    z-index: 2;
}

.campaign-views-overlay:hover {
    background: rgba(0, 0, 0, 0.8);
}

.campaign-views-overlay i {
    font-size: 12px;
}

.views-tooltip {
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0,0,0,0.8);
    color: white;
    padding: 6px 10px;
    border-radius: 4px;
    font-size: 12px;
    white-space: nowrap;
    opacity: 0;
    visibility: hidden;
    transition: all 0.2s ease;
    margin-bottom: 8px;
    pointer-events: none;
}

.views-tooltip:after {
    content: "";
    position: absolute;
    top: 100%;
    left: 50%;
    margin-left: -5px;
    border-width: 5px;
    border-style: solid;
    border-color: rgba(0,0,0,0.8) transparent transparent transparent;
}

.campaign-views-overlay:hover .views-tooltip {
    opacity: 1;
    visibility: visible;
    transform: translateX(-50%) translateY(0);
}

/* Blinking Animation */
@keyframes blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0; }
}

.blink-5s {
    animation: blink 5s infinite;
    /* Optional: Add these for smoother transitions */
    transition: opacity 0.5s ease;
    animation-timing-function: ease-in-out;
}

/* If you want it to fade instead of blink sharply */
@keyframes gentleBlink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.3; }
}

/* Alternative: Fade in/out every 5s */
@keyframes fadePulse {
    0%, 100% { 
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
    }
    50% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.95);
    }
}

/* Apply the animation */
.join-prompt {
    /* Your existing styles */
    animation: fadePulse 5s infinite;
}
.heart {
    position: fixed;
    pointer-events: none;
    background-color: #ff2d55;
    display: inline-block;
    transform: rotate(-45deg);
    z-index: 1000;
}

.heart:before, .heart:after {
    content: "";
    background-color: #ff2d55;
    border-radius: 50%;
    position: absolute;
    width: 100%;
    height: 100%;
}

.heart:before {
    top: -50%;
    left: 0;
}

.heart:after {
    top: 0;
    left: 50%;
}

@keyframes float {
    0% {
        transform: translate(0, 0) rotate(-45deg);
        opacity: 1;
    }
    100% {
        transform: translate(
            calc(var(--random-x) * 100px), 
            calc(var(--random-y) * -150px)
        ) rotate(-45deg);
        opacity: 0;
    }
}

/* Love button styles */
.loved {
    color: #ff2d55 !important;
}

/* Mobile-specific styles */
@media (max-width: 768px) {
    .love-btn {
        display: flex;
        align-items: center;
        gap: 5px;
    }
    
    .love-count-mobile {
        display: inline-block;
        font-size: 14px;
    }
    
    /* Hide desktop count on mobile if needed */
    .love-count-desktop {
        display: none;
    }
}

/* Desktop styles */
@media (min-width: 769px) {
    .love-count-mobile {
        display: none;
    }
    
    .love-count-desktop {
        display: inline-block;
    }
}

/* Light mode (default) */
.filter-form {
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    gap: 10px;
    padding-left: 20px;
}

.filter-label {
    font-size: 14px;
    color: #333;
    font-weight: 500;
}

.filter-select {
    padding: 8px 12px;
    border: 1px solid #ddd;
    border-radius: 6px;
    background-color: #f9f9f9;
    font-size: 14px;
    color: #555;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.filter-select:hover {
    border-color: #bbb;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

.filter-select:focus {
    outline: none;
    border-color: #007bff;
    box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.25);
}

/* Dark mode */
.dark-mode .filter-form {
    background-color: transparent; /* Ensure form background doesn't conflict */
}

.dark-mode .filter-label {
    color: #f0f0f0; /* Light text for dark mode */
}

.dark-mode .filter-select {
    background-color: #333; /* Dark background for select */
    border-color: #555; /* Darker border */
    color: #f0f0f0; /* Light text */
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3); /* Darker shadow */
}

.dark-mode .filter-select:hover {
    border-color: #777; /* Lighter border on hover */
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.5); /* Stronger shadow on hover */
}

.dark-mode .filter-select:focus {
    border-color: #007bff; /* Keep focus color consistent */
    box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.5); /* Brighter focus shadow */
}

/* Mobile version */
@media (max-width: 768px) {
    .filter-form {
        flex-direction: column; /* Stack elements vertically */
        align-items: flex-start; /* Align items to the start */
        padding-left: 10px; /* Reduce padding */
        gap: 8px; /* Reduce gap between elements */
    }

    .filter-label {
        font-size: 13px;
    }
}
</style>
<style>
.cause-title-container.small {
    text-align: center;
    margin: 5px 0;
    padding: 0 10px;
}
.cause-title.small {
    font-size: 1.2rem;
    font-weight: 500;
    color: #2c3e50;
}
</style>


<style>
/* Simple, accessible styling */
.simple-campaigns-container {
    max-width: 600px;
    margin: 0 auto;
    font-family: Arial, sans-serif;
}

.simple-campaign-card {
    background: white;
    border: 1px solid #e0e0e0;
    border-radius: 10px;
    margin-bottom: 20px;
    overflow: hidden;
}

.creator-info {
    display: flex;
    align-items: center;
    padding: 12px;
    position: relative;
}

.creator-pic img {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    object-fit: cover;
    margin-right: 10px;
}

.creator-details {
    flex-grow: 1;
}


.campaign-time {
    font-size: 12px;
    color: #777;
}

.campaign-menu {
    color: #666;
    cursor: pointer;
    padding: 5px;
}

.menu-dropdown {
    display: none;
    position: absolute;
    right: 10px;
    top: 40px;
    background: white;
    border: 1px solid #ddd;
    border-radius: 5px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    z-index: 10;
}

.menu-dropdown a {
    display: block;
    padding: 8px 15px;
    color: #333;
    text-decoration: none;
    font-size: 14px;
}

.menu-dropdown a:hover {
    background: #f5f5f5;
}

.campaign-image-section {
    position: relative;
}

.main-campaign-image {
    width: 100%;
   
   
    display: block;
}

.no-image-placeholder {
    height: 200px;
    background: #f5f5f5;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    color: #999;
}

.no-image-placeholder i {
    font-size: 40px;
    margin-bottom: 10px;
}


/* ==================== ENHANCED CAMPAIGN CATEGORY STYLES ==================== */

.campaign-category {
    font-weight: bold;
    text-shadow: 0 1px 2px rgba(0,0,0,0.5);
    padding: 6px 14px; /* Added padding */
    border-radius: 20px; /* Rounded corners */
    background: rgba(255, 255, 255, 0.15); /* Semi-transparent background */
    backdrop-filter: blur(8px); /* Frosted glass effect */
    -webkit-backdrop-filter: blur(8px);
    border: 1px solid rgba(255, 255, 255, 0.3); /* Subtle border */
    display: inline-block; /* Make background fit content */
    font-size: 13px;
    color: white;
    margin: 0;
    transition: all 0.3s ease;
    letter-spacing: 0.5px;
    text-transform: uppercase; /* Makes text look more like a badge */
}

/* Hover effect for interactivity */
.campaign-category:hover {
    background: rgba(255, 255, 255, 0.25);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    border-color: rgba(255, 255, 255, 0.5);
}

/* Light mode specific adjustments */
body:not(.dark-mode) .campaign-category {
    background: rgba(0, 0, 0, 0.3); /* Darker background for light mode */
    color: #ffffff;
}

/* Dark mode specific styles */
body.dark-mode .campaign-category {
    color: #ffffff; /* Light text */
    background: rgba(255, 255, 255, 0.1); /* Subtle background in dark mode */
    border-color: rgba(255, 255, 255, 0.2);
}

body.dark-mode .campaign-category:hover {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.4);
}

/* Desktop adjustments */
@media (min-width: 769px) {
    .campaign-category {
        padding: 8px 18px; /* Slightly larger on desktop */
        font-size: 14px;
        margin: 5px 0 0 5px; /* Small margin for positioning */
    }
}

/* Mobile adjustments */
@media (max-width: 768px) {
    .campaign-category {
        padding: 5px 12px; /* Slightly smaller on mobile */
        font-size: 12px;
        margin: 5px 0 0 5px;
    }
}


.join-prompt {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(0,0,0,0.7);
    color: white;
    padding: 10px 15px;
    border-radius: 20px;
    font-size: 14px;
}

.join-prompt i {
    margin-right: 5px;
}
.donate-button-overlay {
    position: absolute;
    bottom: 60px;
    left: 10px;
}

.simple-donate-btn {
    background: #FF5722;
    color: white;
    padding: 8px;
    border-radius: 20px;
    text-decoration: none;
    font-size: 14px;
    display: flex;
    align-items: center;
    transition: all 0.3s ease;
    width: 40px; /* Fixed width for icon-only state */
    overflow: hidden;
    border: 1px solid transparent; /* Add for smooth hover transition */
}

.simple-donate-btn {
    min-width: 40px;
    width: 40px;
}

.donate-text {
    margin-left: 8px;
    white-space: nowrap;
    opacity: 0;
    width: 0;
    transition: all 0.3s ease;
}

.simple-donate-btn:hover {
    width: auto; /* Allow full width on hover */
    padding: 8px 15px;
    background: white; /* White background on hover */
    color: #FF5722; /* Orange text on hover */
    border-color: #FF5722; /* Orange border on hover */
}

.simple-donate-btn:hover .donate-text {
    opacity: 1;
    width: auto;
    margin-left: 8px;
}

/* For accessibility - ensure text is readable when focused */
.simple-donate-btn:focus {
    width: auto;
    padding: 8px 15px;
    background: white;
    color: #FF5722;
    border-color: #FF5722;
}

.campaign-basic-info {
    padding: 12px;
}

.simple-campaign-title {
    margin: 0 0 8px 0;
    font-size: 18px;
    color: #333;
}

.simple-campaign-objective {
    font-size: 14px;
    color: #555;
    line-height: 1.4;
}


/* Time Left Styling */
.time-left-info {
    font-size: 13px;
    color: #666;
    display: flex;
    align-items: center;
    margin-left: 15px;
    padding: 4px 10px;
    border-radius: 15px;
    background: #f5f5f5;
}

.time-left-info i {
    margin-right: 5px;
    font-size: 12px;
}

/* Urgent time styling */
.time-left-info .urgent {
    color: #D32F2F;
    font-weight: 600;
}

.time-left-info .warning {
    color: #F57C00;
    font-weight: 600;
}

/* Dark mode */
.dark-mode .time-left-info {
    color: #b0b0b0;
    background: #2d2d2d;
}

.dark-mode .time-left-info .urgent {
    color: #ff6b6b;
}

.dark-mode .time-left-info .warning {
    color: #ffa726;
}

/* Mobile responsive */
@media (max-width: 480px) {
    .campaign-status {
        flex-wrap: wrap;
        gap: 8px;
    }
    
    .time-left-info {
        margin-left: 0;
        order: 3; /* Move to new line on mobile */
        width: 100%;
        justify-content: center;
        margin-top: 5px;
    }
}



.campaign-status {
    display: flex;
    padding: 0 12px 12px;
    align-items: center;
}

.status-badge {
    padding: 4px 10px;
    border-radius: 15px;
    font-size: 13px;
    margin-right: 10px;
    display: flex;
    align-items: center;
}

.status-badge i {
    margin-right: 5px;
}

.status-badge.active {
    background: #E8F5E9;
    color: #2E7D32;
}

.status-badge.outdated {
    background: #FFEBEE;
    color: #C62828;
}

.runtime-info {
    font-size: 13px;
    color: #666;
}

.runtime-info i {
    margin-right: 5px;
}
/* Instagram-style action buttons */
.simple-actions {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 12px;
    border-top: 1px solid #efefef;
    margin-top: 4px;
}

.action-group {
    display: flex;
    gap: 16px; /* Instagram uses more spacing between icons */
}

.simple-action-btn {
    background: none;
    border: none;
    color: #262626; /* Instagram's dark gray */
    font-size: 14px;
    padding: 8px 0;
    margin-right: 0;
    border-radius: 0;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 6px;
    transition: all 0.2s ease;
}

.simple-action-btn i {
    font-size: 24px; /* Instagram uses larger icons */
    margin-right: 0;
}

/* Like button - Instagram style */
.simple-action-btn.love-btn {
    color: #262626;
}

.simple-action-btn.love-btn i {
    transition: transform 0.2s ease;
}

.simple-action-btn.love-btn:hover i {
    transform: scale(1.1);
}

/* Active/liked state */
.simple-action-btn.love-btn .fas.fa-heart {
    color: #ed4956; /* Instagram's heart red */
}

/* Comment and share icons */
.simple-action-btn i.far.fa-comment,
.simple-action-btn i.fas.fa-share-alt {
    color: #262626;
}

/* Hide the text labels on mobile (Instagram does this) */
@media (max-width: 768px) {
    .simple-action-btn span:not(.action-label) {
        display: none; /* Hide the count numbers on mobile if you want */
    }
    
    .action-group {
        gap: 24px; /* More spacing on mobile */
    }
    
    .simple-action-btn i {
        font-size: 26px; /* Even larger on mobile */
    }
}

/* Dark mode Instagram-style */
.dark-mode .simple-actions {
    border-top-color: #2d2d2d;
}

.dark-mode .simple-action-btn,
.dark-mode .simple-action-btn i {
    color: #f5f5f5;
}

.dark-mode .simple-action-btn.love-btn .fas.fa-heart {
    color: #ed4956; /* Keep heart red even in dark mode */
}

/* Remove hover color changes to keep Instagram's subtle style */
.simple-action-btn:hover {
    color: #262626;
    background-color: transparent;
}

.simple-action-btn.love-btn:hover {
    color: #262626;
}

/* Add subtle active state */
.simple-action-btn:active {
    opacity: 0.7;
    transform: scale(0.98);
}
.simple-join-btn {
    /* Base styles are now inline */
}

.simple-join-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 2px 6px rgba(0,0,0,0.05);
}

.leave-btn:hover {
    background: rgba(237, 73, 86, 0.15) !important;
    border-color: rgba(237, 73, 86, 0.4) !important;
}

.simple-join-btn:not(.leave-btn):hover {
    background: rgba(0, 149, 246, 0.15) !important;
    border-color: rgba(0, 149, 246, 0.4) !important;
}

.simple-join-btn:active {
    transform: translateY(0);
    box-shadow: none;
}

/* Follow button in creator info section */
.creator-follow {
    margin-left: auto;
    display: flex;
    align-items: center;
}

.creator-follow .follow-btn {
    margin-left: 10px;
}

@media (max-width: 480px) {
    .simple-campaign-card {
        border-radius: 0;
        border-left: none;
        border-right: none;
    }

    .simple-action-btn .label {
        display: none;
    }
    
    .creator-follow {
        flex-direction: column;
        align-items: flex-end;
    }
    
    .creator-follow .followers-count {
        margin-left: 0;
        margin-top: 4px;
    }
}

.campaign-participation-links {
    display: flex;
    padding: 0 12px 12px;
    gap: 10px;
}












.participation-link {
    flex: 1;
    background: #f5f5f5;
    padding: 10px;
    border-radius: 8px;
    text-align: center;
    text-decoration: none;
    color: #333;
    font-weight: 500;
    display: flex;
    align-items: center;
    justify-content: center;
}

.participation-link i {
    margin-right: 8px;
    color: #2196F3;
}

.participation-link:hover {
    background: #e0e0e0;
}


/* ===== Dark Mode Styles ===== */
.dark-mode .simple-campaigns-container {
    background-color: #121212;
}

.dark-mode .simple-campaign-card {
    background: #1e1e1e;
    border-color: #333;
}

.dark-mode .creator-name,
.dark-mode .simple-campaign-title,
.dark-mode .campaign-caption strong {
    color: #f0f0f0;
}

.dark-mode .campaign-time,
.dark-mode .simple-campaign-objective,
.dark-mode .campaign-caption,
.dark-mode .campaign-content-points,
.dark-mode .runtime-info {
    color: #b0b0b0;
}

.dark-mode .campaign-menu {
    color: #b0b0b0;
}

.dark-mode .menu-dropdown {
    background: #2d2d2d;
    border-color: #444;
}

.dark-mode .menu-dropdown a {
    color: #e0e0e0;
}

.dark-mode .menu-dropdown a:hover {
    background: #383838;
}

.dark-mode .no-image-placeholder {
    background: #2a2a2a;
    color: #666;
}

.dark-mode .status-badge.active {
    background: #1b5e20;
    color: #a5d6a7;
}

.dark-mode .status-badge.outdated {
    background: #b71c1c;
    color: #ffcdd2;
}

.dark-mode .simple-actions {
    border-top-color: #333;
}

.dark-mode .simple-action-btn {
    color: #b0b0b0;
}

.dark-mode .simple-action-btn:hover {
    color: #e0e0e0;
    background-color: rgba(255, 255, 255, 0.05);
}

.dark-mode .simple-action-btn.love-btn {
    color: #ff2d55;
}

.dark-mode .simple-action-btn.love-btn:hover {
    color: #ff6b8b;
}

.dark-mode .participation-link {
    background: #2a2a2a;
    color: #e0e0e0;
}

.dark-mode .participation-link:hover {
    background: #383838;
}

.dark-mode .participation-link i {
    color: #64b5f6;
}

.dark-mode .see-more-btn,
.dark-mode .see-less-btn {
    color: #64b5f6;
}

.dark-mode .see-more-btn:hover,
.dark-mode .see-less-btn:hover {
    background: rgba(255, 255, 255, 0.05);
    color: #90caf9;
}

/* Dark mode follow button styles */
.dark-mode .follow-btn {
    background: #1e1e1e;
    color: #1DA1F2;
    border-color: #1DA1F2;
}

.dark-mode .follow-btn:hover {
    background: rgba(29, 161, 242, 0.2);
}

.dark-mode .follow-btn.following {
    background: #1DA1F2;
    color: white;
}

.dark-mode .follow-btn.following:hover {
    background: #e0245e;
}

.dark-mode .followers-count {
    color: #b0b0b0;
}

/* Overlay elements in dark mode */
.dark-mode .join-prompt,
.dark-mode .campaign-views-overlay {
    background: rgba(0, 0, 0, 0.8);
}

.dark-mode .campaign-views-overlay:hover {
    background: rgba(0, 0, 0, 0.9);
}

/* Progress bar adjustments */
.dark-mode .progress-bar {
    background: rgba(255, 255, 255, 0.1);
}

/* Donate button in dark mode */
.dark-mode .simple-donate-btn {
    background: #ff7043;
}

/* Join/Leave buttons in dark mode */
.dark-mode .simple-join-btn {
    background: #1976d2;
}

.dark-mode .simple-join-btn.leave-btn {
    background: #d32f2f;
}

/* List bullets in dark mode */
.dark-mode .campaign-content-points li:before {
    color: #666;
}

/* Mobile adjustments for dark mode */
@media (max-width: 480px) {
    .dark-mode .simple-campaign-card {
        border-color: #333;
    }
}

/* Views Counter with Tooltip */
.campaign-views-overlay {
    position: absolute;
    top: 10px;
    right: 10px;
    background: rgba(0, 0, 0, 0.6);
    color: white;
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 13px;
    display: flex;
    align-items: center;
    gap: 5px;
    backdrop-filter: blur(2px);
    cursor: pointer;
    transition: all 0.2s ease;
    z-index: 2;
}

.campaign-views-overlay:hover {
    background: rgba(0, 0, 0, 0.8);
}

.campaign-views-overlay i {
    font-size: 12px;
}

.views-tooltip {
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0,0,0,0.8);
    color: white;
    padding: 6px 10px;
    border-radius: 4px;
    font-size: 12px;
    white-space: nowrap;
    opacity: 0;
    visibility: hidden;
    transition: all 0.2s ease;
    margin-bottom: 8px;
    pointer-events: none;
}

.views-tooltip:after {
    content: "";
    position: absolute;
    top: 100%;
    left: 50%;
    margin-left: -5px;
    border-width: 5px;
    border-style: solid;
    border-color: rgba(0,0,0,0.8) transparent transparent transparent;
}

.campaign-views-overlay:hover .views-tooltip {
    opacity: 1;
    visibility: visible;
    transform: translateX(-50%) translateY(0);
}

/* Blinking Animation */
@keyframes blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0; }
}

.blink-5s {
    animation: blink 5s infinite;
    /* Optional: Add these for smoother transitions */
    transition: opacity 0.5s ease;
    animation-timing-function: ease-in-out;
}

/* If you want it to fade instead of blink sharply */
@keyframes gentleBlink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.3; }
}

/* Alternative: Fade in/out every 5s */
@keyframes fadePulse {
    0%, 100% { 
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
    }
    50% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.95);
    }
}

/* Apply the animation */
.join-prompt {
    /* Your existing styles */
    animation: fadePulse 5s infinite;
}
.heart {
    position: fixed;
    pointer-events: none;
    background-color: #ff2d55;
    display: inline-block;
    transform: rotate(-45deg);
    z-index: 1000;
}

.heart:before, .heart:after {
    content: "";
    background-color: #ff2d55;
    border-radius: 50%;
    position: absolute;
    width: 100%;
    height: 100%;
}

.heart:before {
    top: -50%;
    left: 0;
}

.heart:after {
    top: 0;
    left: 50%;
}

@keyframes float {
    0% {
        transform: translate(0, 0) rotate(-45deg);
        opacity: 1;
    }
    100% {
        transform: translate(
            calc(var(--random-x) * 100px), 
            calc(var(--random-y) * -150px)
        ) rotate(-45deg);
        opacity: 0;
    }
}

/* Love button styles */
.loved {
    color: #ff2d55 !important;
}

/* Mobile-specific styles */
@media (max-width: 768px) {
    .love-btn {
        display: flex;
        align-items: center;
        gap: 5px;
    }
    
    .love-count-mobile {
        display: inline-block;
        font-size: 14px;
    }
    
    /* Hide desktop count on mobile if needed */
    .love-count-desktop {
        display: none;
    }
}

/* Desktop styles */
@media (min-width: 769px) {
    .love-count-mobile {
        display: none;
    }
    
    .love-count-desktop {
        display: inline-block;
    }
}

/* Light mode (default) */
.filter-form {
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    gap: 10px;
    padding-left: 20px;
}

.filter-label {
    font-size: 14px;
    color: #333;
    font-weight: 500;
}

.filter-select {
    padding: 8px 12px;
    border: 1px solid #ddd;
    border-radius: 6px;
    background-color: #f9f9f9;
    font-size: 14px;
    color: #555;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.filter-select:hover {
    border-color: #bbb;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

.filter-select:focus {
    outline: none;
    border-color: #007bff;
    box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.25);
}

/* Dark mode */
.dark-mode .filter-form {
    background-color: transparent; /* Ensure form background doesn't conflict */
}

.dark-mode .filter-label {
    color: #f0f0f0; /* Light text for dark mode */
}

.dark-mode .filter-select {
    background-color: #333; /* Dark background for select */
    border-color: #555; /* Darker border */
    color: #f0f0f0; /* Light text */
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3); /* Darker shadow */
}

.dark-mode .filter-select:hover {
    border-color: #777; /* Lighter border on hover */
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.5); /* Stronger shadow on hover */
}

.dark-mode .filter-select:focus {
    border-color: #007bff; /* Keep focus color consistent */
    box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.5); /* Brighter focus shadow */
}

/* Mobile version */
@media (max-width: 768px) {
    .filter-form {
        flex-direction: column; /* Stack elements vertically */
        align-items: flex-start; /* Align items to the start */
        padding-left: 10px; /* Reduce padding */
        gap: 8px; /* Reduce gap between elements */
    }

    .filter-label {
        font-size: 13px;
    }
}
</style>


<style type="text/css">
  

/* ===== CREATOR INFO LINE BREAKS ===== */

/* Desktop version - all in one line */
.creator-info-line.web-version {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: 8px;
    margin-bottom: 4px;
}

/* Mobile version - hidden by default */
.creator-info-line.mobile-version {
    display: none;
}

/* Mobile badges styling */
.mobile-line-1 {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: 5px;
    margin-bottom: 4px;
    width: 100%;
}

.mobile-line-2 {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: 8px;
    width: 100%;
}



/* Follow text styling */
.follow-text {
    font-size: 13px;
    color: #3897f0;
    cursor: pointer;
    padding: 2px 6px;
    border-radius: 10px;
    transition: all 0.2s ease;
    text-decoration: none;
    background: transparent;
    border: none;
    white-space: nowrap;
}

.follow-text:hover {
    background: rgba(56, 151, 240, 0.1);
}

.follow-text.following {
    color: #666;
}

.follow-text.following:hover {
    color: #ed4956;
    background: rgba(237, 73, 86, 0.1);
}


/* Mobile responsive */
@media (max-width: 768px) {
    /* Hide desktop version on mobile */
    .creator-info-line.web-version {
        display: none !important;
    }
    
    /* Show mobile version on mobile */
    .creator-info-line.mobile-version {
        display: block !important;
    }
    
   
    }
    
    .follow-text {
        font-size: 12px;
        padding: 2px 5px;
    }
    
    
    .changemaker-badge {
        font-size: 11px;
        padding: 2px 6px;
    }
    
    /* Ensure badges don't overflow */
    .mobile-line-2 {
        gap: 6px;
    }
}

/* Desktop specific */
@media (min-width: 769px) {
    /* Show desktop version */
    .creator-info-line.web-version {
        display: flex !important;
    }
    
    /* Hide mobile version */
    .creator-info-line.mobile-version {
        display: none !important;
    }
}

/* Ensure the menu button stays in place */
.campaign-menu {
    margin-left: auto;
}
/* Campaign menu positioning */
.campaign-menu {
    position: relative;
    color: #666;
    cursor: pointer;
    padding: 5px;
    margin-left: 10px;
    flex-shrink: 0; /* Don't allow menu to shrink */
}

/* Menu dropdown positioning */
.menu-dropdown {
    display: none;
    position: absolute;
    right: 0;
    top: 100%;
    background: white;
    border: 1px solid #ddd;
    border-radius: 5px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    z-index: 10;
    min-width: 200px;
}

.menu-dropdown a {
    display: block;
    padding: 8px 15px;
    color: #333;
    text-decoration: none;
    font-size: 14px;
}

.menu-dropdown a:hover {
    background: #f5f5f5;
}

/* Mobile adjustments for menu */
@media (max-width: 768px) {
    .campaign-menu {
        margin-left: 5px;
        padding: 3px;
    }
    
    .menu-dropdown {
        min-width: 180px;
        right: -10px;
    }
}

/* Dark mode adjustments */
.dark-mode .campaign-menu {
    color: #b0b0b0;
}

.dark-mode .menu-dropdown {
    background: #2d2d2d;
    border-color: #444;
}

.dark-mode .menu-dropdown a {
    color: #e0e0e0;
}

.dark-mode .menu-dropdown a:hover {
    background: #383838;
}


/* Fix for RALLYNEX text visibility */
.rallynex-name span {
    background: linear-gradient(135deg, #ffffff 0%, #e6f7ff 100%);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    text-shadow: 0 1px 2px rgba(29, 155, 240, 0.3);
}




/* Make sure the logo container has proper contrast */
.rallynex-header-container {
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
}

/* Mobile search icon hover state */
.rallynex-mobile-search-icon:hover {
    background-color: rgba(255, 255, 255, 0.15) !important;
}

/* Ensure mobile search popup has proper positioning */
@media (max-width: 768px) {
    .rallynex-mobile-search-popup.active {
        position: fixed !important;
        top: 60px !important;
        left: 0;
        right: 0;
        z-index: 9999 !important;
        background: white;
        padding: 15px;
        display: flex;
        align-items: center;
        gap: 12px;
    }
    
    .dark-mode .rallynex-mobile-search-popup.active {
        background: #1a1a1a;
    }
}






/* Make the bottom overlay more subtle or remove it */
.image-overlay-bottom {
    background: linear-gradient(to top, 
        rgba(0, 0, 0, 0.3) 0%,    /* Reduced from 0.7 to 0.3 */
        rgba(0, 0, 0, 0.15) 50%,  /* Reduced from 0.4 to 0.15 */
        rgba(0, 0, 0, 0) 100%) !important;
}

/* Alternative: Remove it completely if you don't need text readability */
.image-overlay-bottom {
    background: none !important;
}

/* Adjust for dark mode too */
.dark-mode .image-overlay-bottom {
    background: linear-gradient(to top, 
        rgba(0, 0, 0, 0.3) 0%, 
        rgba(0, 0, 0, 0.15) 50%, 
        rgba(0, 0, 0, 0) 100%) !important;
}






/* ===== CREATOR INFO SECTION - MODERN PROFESSIONAL DESIGN ===== */
.creator-info {
    display: flex;
    align-items: center;
    padding: 16px 16px 12px 16px;
    position: relative;
    background: linear-gradient(145deg, #ffffff, #fafafa);
    border-bottom: 1px solid rgba(0,0,0,0.05);
}

/* Dark mode */
.dark-mode .creator-info {
    background: linear-gradient(145deg, #1e1e1e, #1a1a1a);
    border-bottom: 1px solid rgba(255,255,255,0.05);
}

/* Creator profile picture */
.creator-pic {
    position: relative;
    margin-right: 14px;
}

.creator-pic img {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid #1DA1F2;
    box-shadow: 0 4px 12px rgba(29, 161, 242, 0.2);
    transition: all 0.3s ease;
}

.creator-pic img:hover {
    transform: scale(1.05);
    border-color: #0c85d0;
    box-shadow: 0 6px 16px rgba(29, 161, 242, 0.3);
}

/* Dark mode profile pic */
.dark-mode .creator-pic img {
    border-color: #64b5f6;
    box-shadow: 0 4px 12px rgba(100, 181, 246, 0.2);
}

/* Creator details container */
.creator-details {
    flex-grow: 1;
    min-width: 0;
}

/* Creator name styling */
.creator-name-text {
    font-weight: 700;
    font-size: 16px;
    color: #1a1a1a;
    display: inline-block;
    line-height: 1.5;
    letter-spacing: -0.2px;
}

.dark-mode .creator-name-text {
    color: #ffffff;
}

/* Verified badge - matches name size */
.verified-badge {
    display: inline-flex;
    align-items: center;
    color: #1DA1F2;
    font-size: 16px;
    margin-left: 6px;
    vertical-align: middle;
    position: relative;
    cursor: help;
}

.verified-badge i {
    font-size: 16px;
    filter: drop-shadow(0 2px 4px rgba(29, 161, 242, 0.3));
}

/* Tooltip on hover */
.verified-badge {
    position: relative; /* make sure parent is positioned */
}

.verified-badge:hover::after {
    content: "Verified User";
    position: absolute;
    top: 100%;                 /* move below */
    left: 50%;
    transform: translateX(-50%);
    background: #1a1a1a;
    color: white;
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 11px;
    font-weight: 500;
    white-space: nowrap;
    margin-top: 8px;           /* spacing below text */
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    z-index: 10;
    letter-spacing: normal;
}

.verified-badge:hover::before {
    content: '';
    position: absolute;
    top: 100%;                 /* move below */
    left: 50%;
    transform: translateX(-50%);
    border: 6px solid transparent;
    border-bottom-color: #1a1a1a;  /* arrow pointing up */
    margin-top: -4px;
    z-index: 10;
}

/* Dark mode tooltip */
.dark-mode .verified-badge:hover::after {
    background: #2d2d2d;
    color: #ffffff;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
}

.dark-mode .verified-badge:hover::before {
    border-bottom-color: #2d2d2d;
}

/* Changemaker badge */
.changemaker-badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, #FFD700, #FFA500);
    color: #1a1a1a;
    width: 22px;
    height: 22px;
    border-radius: 50%;
    margin-left: 6px;
    font-size: 12px;
    box-shadow: 0 2px 8px rgba(255, 215, 0, 0.4);
    cursor: help;
    position: relative;
}

.changemaker-badge i {
    font-size: 12px;
}

.changemaker-badge:hover::after {
    content: "Changemaker";
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    background: #1a1a1a;
    color: white;
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 11px;
    font-weight: 500;
    white-space: nowrap;
    margin-bottom: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    z-index: 10;
}

.changemaker-badge:hover::before {
    content: '';
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    border: 6px solid transparent;
    border-bottom-color: #1a1a1a;
    margin-top: -4px;
    z-index: 10;
}

/* Dark mode changemaker */
.dark-mode .changemaker-badge {
    background: linear-gradient(135deg, #FFA500, #FF8C00);
    box-shadow: 0 2px 8px rgba(255, 165, 0, 0.3);
}

.dark-mode .changemaker-badge:hover::after {
    background: #2d2d2d;
}

.dark-mode .changemaker-badge:hover::before {
    border-bottom-color: #2d2d2d;
}
/* Follow button text */
.follow-text {
    font-size: 14px;
    font-weight: 600;
    color: #1DA1F2;
    cursor: pointer;
    padding: 4px 12px;
    border-radius: 20px;
    background: rgba(29, 161, 242, 0.1);
    margin-left: 8px;
    transition: all 0.2s ease;
    display: inline-block;
}

.follow-text:hover {
    background: rgba(29, 161, 242, 0.15);
    transform: translateY(-1px);
}

.follow-text.following {
    color: #666;
    background: rgba(0, 0, 0, 0.05);
}

.follow-text.following:hover {
    color: #E0245E;
    background: rgba(224, 36, 94, 0.1);
}

/* Dark mode follow */
.dark-mode .follow-text {
    background: rgba(100, 181, 246, 0.15);
    color: #64b5f6;
}

.dark-mode .follow-text:hover {
    background: rgba(100, 181, 246, 0.25);
}

.dark-mode .follow-text.following {
    color: #b0b0b0;
    background: rgba(255, 255, 255, 0.05);
}

.dark-mode .follow-text.following:hover {
    color: #ff6b6b;
    background: rgba(255, 107, 107, 0.15);
}

/* Campaign time with icon */
.campaign-time {
    font-size: 13px;
    color: #657786;
    margin-top: 4px;
    display: flex;
    align-items: center;
    gap: 6px;
    line-height: 1.5;
}

.campaign-time::before {
    content: '\f017'; /* Clock icon */
    font-family: 'Font Awesome 5 Free';
    font-weight: 400;
    font-size: 12px;
    color: #1DA1F2;
    opacity: 0.8;
}






/* ===== MOBILE VERSION - NAME, BADGES, FOLLOW ALL ON ONE LINE ===== */
@media (max-width: 768px) {
    /* Show mobile version, hide desktop */
    .creator-info-line.web-version {
        display: none !important;
    }
    
    .creator-info-line.mobile-version {
        display: block !important;
    }
    
    /* Mobile line 1 - all elements in a row */
    .mobile-line-1 {
        display: flex;
        align-items: center;
        flex-wrap: wrap;
        gap: 6px;
        margin-bottom: 4px;
        width: 100%;
    }
    
    /* Creator name */
    .creator-name-text {
        font-size: 15px;
        font-weight: 700;
        color: #1a1a1a;
        line-height: 1.4;
    }
    
    .dark-mode .creator-name-text {
        color: #ffffff;
    }
    
    /* Verified badge - matches name size */
    .verified-badge {
        display: inline-flex;
        align-items: center;
        color: #1DA1F2;
        font-size: 15px;
        margin: 0;
        vertical-align: middle;
        position: relative;
        cursor: help;
    }
    
    .verified-badge i {
        font-size: 15px;
        filter: drop-shadow(0 2px 4px rgba(29, 161, 242, 0.3));
    }
    
    /* Changemaker badge - compact */
    .changemaker-badge {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(135deg, #FFD700, #FFA500);
        color: #1a1a1a;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        font-size: 11px;
        box-shadow: 0 2px 6px rgba(255, 215, 0, 0.4);
        cursor: help;
        position: relative;
        margin: 0;
    }
    
    .changemaker-badge i {
        font-size: 11px;
    }
    
    /* Follow button - compact for mobile */
    .follow-text {
        font-size: 13px;
        font-weight: 600;
        color: #1DA1F2;
        cursor: pointer;
        padding: 3px 10px;
        border-radius: 16px;
        background: rgba(29, 161, 242, 0.1);
        transition: all 0.2s ease;
        display: inline-block;
        margin-left: auto; /* Push to the right if needed */
        white-space: nowrap;
    }
    
    .follow-text.following {
        color: #666;
        background: rgba(0, 0, 0, 0.05);
    }
    
    .follow-text.following:hover {
        color: #E0245E;
        background: rgba(224, 36, 94, 0.1);
    }
    
    /* Mobile line 2 - time and location */
    .mobile-line-2 {
        width: 100%;
        margin-top: 2px;
    }
    
    .campaign-time {
        font-size: 12px;
        color: #657786;
        display: flex;
        align-items: center;
        gap: 4px;
        flex-wrap: wrap;
    }
    
    .campaign-time i {
        font-size: 11px;
        color: #1DA1F2;
        opacity: 0.8;
    }
    
    .campaign-time .location-dot {
        color: #1DA1F2;
        font-weight: bold;
        margin: 0 2px;
    }
    
    /* Tooltips - adjust for mobile */
    .verified-badge:hover::after,
    .changemaker-badge:hover::after {
        display: none; /* Hide tooltips on mobile, or keep them */
    }
    
    /* If you want to keep tooltips on mobile */
    .verified-badge:active::after,
    .changemaker-badge:active::after {
        content: attr(data-tooltip);
        position: absolute;
        bottom: 100%;
        left: 50%;
        transform: translateX(-50%);
        background: #1a1a1a;
        color: white;
        padding: 4px 8px;
        border-radius: 16px;
        font-size: 10px;
        white-space: nowrap;
        margin-bottom: 6px;
        z-index: 100;
        box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    }
    
    /* Dark mode mobile */
    .dark-mode .creator-name-text {
        color: #ffffff;
    }
    
    .dark-mode .follow-text {
        background: rgba(100, 181, 246, 0.15);
        color: #64b5f6;
    }
    
    .dark-mode .follow-text.following {
        color: #b0b0b0;
        background: rgba(255, 255, 255, 0.05);
    }
    
    .dark-mode .campaign-time {
        color: #8899a6;
    }
    
    .dark-mode .campaign-time i {
        color: #64b5f6;
    }
    
    .dark-mode .changemaker-badge {
        background: linear-gradient(135deg, #FFA500, #FF8C00);
        box-shadow: 0 2px 6px rgba(255, 165, 0, 0.3);
    }
}

/* Very small screens */
@media (max-width: 380px) {
    .mobile-line-1 {
        gap: 4px;
    }
    
    .creator-name-text {
        font-size: 14px;
    }
    
    .verified-badge {
        font-size: 14px;
    }
    
    .verified-badge i {
        font-size: 14px;
    }
    
    .follow-text {
        font-size: 12px;
        padding: 2px 8px;
    }
    
    .campaign-time {
        font-size: 11px;
    }
}




/* Web version time */
.web-version-time {
    font-size: 13px;
    color: #657786;
    margin-top: 4px;
    display: flex;
    align-items: center;
    gap: 6px;
}

.web-version-time i {
    font-size: 12px;
    color: #1DA1F2;
    opacity: 0.8;
}

.web-version-time .location-dot {
    color: #1DA1F2;
    font-weight: bold;
    margin: 0 2px;
}

/* Dark mode web time */
.dark-mode .web-version-time {
    color: #8899a6;
}

.dark-mode .web-version-time i {
    color: #64b5f6;
}

/* Hide mobile time on desktop, hide desktop time on mobile */
@media (min-width: 769px) {
    .mobile-version {
        display: none !important;
    }
    .web-version-time {
        display: flex !important;
    }
}

@media (max-width: 768px) {
    .web-version-time {
        display: none !important;
    }
    .mobile-version {
        display: block !important;
    }
}









/* ===== CAMPAIGN ACTION BUTTONS - UNIQUE PREFIX ===== */

/* Main action bar */
.camp-action-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 12px;
    border-top: 1px solid #efefef;
    margin-top: 4px;
}

/* Action group container */
.camp-action-group {
    display: flex;
    gap: 16px;
}

/* Base action button */
.camp-action-btn {
    background: none;
    border: none;
    color: #262626;
    font-size: 14px;
    padding: 8px 0;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 6px;
    transition: all 0.2s ease;
    position: relative;
}

/* Icons */
.camp-action-btn i {
    font-size: 24px;
}

/* Count numbers */
.camp-count {
    font-weight: 500;
    color: #262626;
}

/* Tooltip labels */
.camp-label {
    position: absolute;
    bottom: -30px;
    left: 50%;
    transform: translateX(-50%);
    background: #262626;
    color: white;
    font-size: 11px;
    padding: 4px 8px;
    border-radius: 4px;
    white-space: nowrap;
    opacity: 0;
    visibility: hidden;
    transition: all 0.2s ease;
    pointer-events: none;
    z-index: 100;
}

.camp-label::after {
    content: '';
    position: absolute;
    top: -5px;
    left: 50%;
    transform: translateX(-50%);
    border-width: 0 5px 5px 5px;
    border-style: solid;
    border-color: transparent transparent #262626 transparent;
}

.camp-action-btn:hover .camp-label {
    opacity: 1;
    visibility: visible;
    bottom: -35px;
}

/* Love button specific */
.camp-love-btn .fas.fa-heart {
    color: #ed4956;
}

.camp-love-btn .far.fa-heart {
    color: #262626;
}

.camp-love-btn:hover i {
    transform: scale(1.1);
}

/* Comment button */
.camp-comment-btn i,
.camp-share-btn i {
    color: #262626;
}

/* Active/pressed state */
.camp-action-btn:active {
    transform: scale(0.95);
}

/* Join/Leave button */
/* Base button styles */
.camp-join-btn {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 8px 18px;
    background: linear-gradient(145deg, #f8f9ff, #ffffff);
    color: #2d3436;
    border: 1.5px solid #e9ecef;
    border-radius: 30px;
    font-size: 14px;
    font-weight: 600;
    letter-spacing: 0.3px;
    text-decoration: none;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.03);
    position: relative;
    overflow: hidden;
}

.camp-join-btn i {
    font-size: 15px;
    transition: transform 0.3s ease;
}

.camp-join-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 16px rgba(0, 149, 246, 0.15);
    border-color: #0095f6;
}

.camp-join-btn:hover i {
    transform: scale(1.1);
}

.camp-join-btn:active {
    transform: translateY(0);
    box-shadow: 0 2px 4px rgba(0, 149, 246, 0.1);
}

/* Join button specific styles */
.camp-join-btn:not(.joined) {
    background: linear-gradient(145deg, #f0f7ff, #e8f0fe);
    color: #0095f6;
    border-color: rgba(0, 149, 246, 0.3);
}

.camp-join-btn:not(.joined):hover {
    background: linear-gradient(145deg, #e3f0ff, #d9ebff);
    border-color: #0095f6;
}

/* Leave button styles - Modern Redesign */
.camp-join-btn.joined {
    background: linear-gradient(145deg, #fff5f5, #fff0f0);
    color: #e03131;
    border-color: rgba(224, 49, 49, 0.25);
    box-shadow: 0 2px 8px rgba(224, 49, 49, 0.08);
}

.camp-join-btn.joined i {
    color: #e03131;
}

.camp-join-btn.joined:hover {
    background: linear-gradient(145deg, #ffe9e9, #ffe3e3);
    border-color: #e03131;
    box-shadow: 0 10px 20px rgba(224, 49, 49, 0.2);
    color: #c92a2a;
}

.camp-join-btn.joined:hover i {
    color: #c92a2a;
    transform: scale(1.1) rotate(180deg);
}

.camp-join-btn.joined:active {
    background: linear-gradient(145deg, #ffd6d6, #ffd1d1);
    transform: scale(0.98);
}

/* Modern glass morphism variant */
.camp-join-btn.joined.glass {
    background: rgba(224, 49, 49, 0.1);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    border: 1px solid rgba(224, 49, 49, 0.2);
    box-shadow: 0 4px 12px rgba(224, 49, 49, 0.1);
}

.camp-join-btn.joined.glass:hover {
    background: rgba(224, 49, 49, 0.15);
    border-color: rgba(224, 49, 49, 0.35);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
}

/* Gradient variant */
.camp-join-btn.joined.gradient {
    background: linear-gradient(145deg, #ff6b6b, #e03131);
    color: white;
    border: none;
    box-shadow: 0 4px 12px rgba(224, 49, 49, 0.3);
}

.camp-join-btn.joined.gradient i {
    color: white;
}

.camp-join-btn.joined.gradient:hover {
    background: linear-gradient(145deg, #ff8787, #f03e3e);
    box-shadow: 0 8px 18px rgba(224, 49, 49, 0.4);
    transform: translateY(-3px);
}

/* Outline variant */
.camp-join-btn.joined.outline {
    background: transparent;
    border: 2px solid #e03131;
    color: #e03131;
    box-shadow: none;
}

.camp-join-btn.joined.outline:hover {
    background: rgba(224, 49, 49, 0.05);
    border-color: #c92a2a;
    color: #c92a2a;
    transform: scale(1.02);
}

/* Soft shadow variant */
.camp-join-btn.joined.soft {
    background: white;
    border: 1px solid #ffd7d7;
    color: #e03131;
    box-shadow: 0 8px 20px rgba(224, 49, 49, 0.15);
}

.camp-join-btn.joined.soft:hover {
    box-shadow: 0 12px 24px rgba(224, 49, 49, 0.25);
    border-color: #e03131;
}

/* Button with count badge */
.join-btn-count {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: 22px;
    height: 22px;
    padding: 0 6px;
    background: rgba(0, 149, 246, 0.12);
    border-radius: 30px;
    font-size: 12px;
    font-weight: 600;
    color: #0095f6;
    margin-left: 2px;
    transition: all 0.2s ease;
}

.camp-join-btn.joined .join-btn-count {
    background: rgba(224, 49, 49, 0.12);
    color: #e03131;
}

.camp-join-btn:hover .join-btn-count {
    transform: scale(1.1);
}

/* Loading animation */
@keyframes leavePulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(0.95); }
}

.camp-join-btn.joined.loading {
    animation: leavePulse 1.5s ease infinite;
    pointer-events: none;
    opacity: 0.8;
}

.camp-join-btn.joined.loading i {
    animation: spin 1s linear infinite;
}

@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

/* Ripple effect */
.camp-join-btn.joined::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 5px;
    height: 5px;
    background: rgba(224, 49, 49, 0.3);
    opacity: 0;
    border-radius: 100%;
    transform: scale(1, 1) translate(-50%);
    transform-origin: 50% 50%;
}

.camp-join-btn.joined:focus:not(:active)::after {
    animation: ripple 0.8s ease-out;
}

@keyframes ripple {
    0% {
        transform: scale(0, 0);
        opacity: 0.5;
    }
    100% {
        transform: scale(20, 20);
        opacity: 0;
    }
}

/* Responsive design */
@media (max-width: 768px) {
    .camp-join-btn {
        padding: 6px 14px;
        font-size: 13px;
    }
    
    .camp-join-btn i {
        font-size: 14px;
    }
    
    .camp-join-btn.joined:hover {
        transform: translateY(-1px);
    }
}

/* Dark mode support */
@media (prefers-color-scheme: dark) {
    .camp-join-btn {
        background: linear-gradient(145deg, #2d3436, #1e272e);
        color: #ecf0f1;
        border-color: #3d4a5a;
    }
    
    .camp-join-btn.joined {
        background: linear-gradient(145deg, #2c1a1a, #241414);
        color: #ff6b6b;
        border-color: rgba(255, 107, 107, 0.25);
    }
    
    .camp-join-btn.joined:hover {
        background: linear-gradient(145deg, #3a2222, #321e1e);
    }
}

/* ===== DARK MODE ===== */
.dark-mode .camp-action-bar {
    border-top-color: #2d2d2d;
}

.dark-mode .camp-action-btn,
.dark-mode .camp-count {
    color: #f5f5f5;
}

.dark-mode .camp-comment-btn i,
.dark-mode .camp-share-btn i {
    color: #f5f5f5;
}

.dark-mode .camp-love-btn .far.fa-heart {
    color: #f5f5f5;
}

.dark-mode .camp-join-btn {
    background: rgba(100, 181, 246, 0.15);
    color: #64b5f6;
    border-color: rgba(100, 181, 246, 0.3);
}

.dark-mode .camp-leave-btn {
    background: rgba(255, 107, 107, 0.15);
    color: #ff6b6b;
    border-color: rgba(255, 107, 107, 0.3);
}

/* ===== MOBILE RESPONSIVE ===== */
@media (max-width: 768px) {
    .camp-action-group {
        gap: 20px;
    }
    
    .camp-action-btn i {
        font-size: 26px;
    }
    
    .camp-count {
        font-size: 13px;
    }
    
    /* Hide count on very small screens */
    @media (max-width: 380px) {
        .camp-count {
            display: none;
        }
    }
}
/* ===== COMPLETE FIX FOR CAMPAIGN IMAGE OVERLAY ===== */

/* Main overlay container */
.image-overlay-bottom {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    padding: 20px 20px 70px 20px; /* Bottom padding leaves space for dots */
    background: linear-gradient(to top, 
        rgba(0,0,0,0.8) 0%, 
        rgba(0,0,0,0.5) 50%, 
        transparent 100%);
    display: flex;
    flex-direction: column;
    align-items: center;
    z-index: 15;
    pointer-events: none; /* Container doesn't block clicks */
}

/* Allow clicks on interactive elements */
.image-overlay-bottom a,
.image-overlay-bottom button,
.image-overlay-bottom .campaign-action-icons,
.image-overlay-bottom .action-icon,
.image-overlay-bottom .join-prompt {
    pointer-events: auto;
}

/* ===== ACTION ICONS ===== */
.campaign-action-icons {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 30px;
    margin: 10px 0 15px 0;
    width: 100%;
    z-index: 20;
}

.action-icon {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-decoration: none;
    color: white;
    width: 70px;
    height: 70px;
    transition: all 0.2s ease;
    cursor: pointer;
    border-radius: 8px;
    background: rgba(0, 0, 0, 0.25);
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
}

.action-icon i {
    font-size: 26px;
    margin-bottom: 4px;
    color: white;
    display: block;
}

.action-icon .tooltip {
    font-size: 11px;
    font-weight: 500;
    color: rgba(255, 255, 255, 0.9);
    text-transform: uppercase;
    letter-spacing: 0.3px;
    display: block;
}

/* Hover effects */
.action-icon:hover {
    background: rgba(29, 161, 242, 0.3);
    transform: translateY(-2px);
}

/* ===== PROGRESS SECTION (DESKTOP) ===== */
.progress-info {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: auto;
    min-width: 300px;
    max-width: 400px;
    margin: 5px auto;
    padding: 8px 20px;
    background: rgba(0, 0, 0, 0.3);
    backdrop-filter: blur(4px);
    border-radius: 30px;
    color: white;
    font-size: 13px;
    z-index: 20;
}

.progress-info span:first-child {
    color: #4ECDC4;
    font-weight: 600;
    margin-right: 20px;
}

.progress-container {
    width: 80%;
    max-width: 400px;
    height: 6px;
    margin: 8px auto;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 3px;
    overflow: hidden;
    z-index: 20;
}

.progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #4ECDC4, #2ecc71);
    border-radius: 3px;
    transition: width 0.3s ease;
}

.campaign-stats {
    display: flex;
    justify-content: space-between;
    width: auto;
    min-width: 300px;
    max-width: 400px;
    margin: 5px auto;
    padding: 5px 20px;
    color: rgba(255, 255, 255, 0.9);
    font-size: 12px;
    z-index: 20;
}

.campaign-stats span:first-child {
    color: #4ECDC4;
    font-weight: 600;
    margin-right: 20px;
}

/* ===== MOBILE GOAL DISPLAY ===== */
.mobile-goal-display {
    display: none; /* Hidden by default, shown on mobile */
    text-align: center;
    color: white;
    font-size: 13px;
    font-weight: 500;
    margin: 10px auto;
    padding: 8px 20px;
    background: rgba(0, 0, 0, 0.4);
    backdrop-filter: blur(4px);
    border-radius: 30px;
    width: fit-content;
    z-index: 20;
}

/* ===== JOIN PROMPT ===== */
.join-prompt {
    position: absolute;
    bottom: 80px; /* Positioned above dots */
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(4px);
    color: white;
    padding: 8px 20px;
    border-radius: 30px;
    font-size: 13px;
    z-index: 30;
    white-space: nowrap;
    border: 1px solid rgba(255, 255, 255, 0.15);
    pointer-events: auto;
    cursor: pointer;
}

.join-prompt i {
    margin-right: 8px;
    color: #4ECDC4;
}

/* Blinking animation */
@keyframes gentlePulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
}

.blink-5s {
    animation: gentlePulse 5s infinite;
}

/* ===== SLIDESHOW DOTS ===== */
.slideshow-dots {
    position: absolute !important;
    bottom: 20px !important;
    left: 0 !important;
    right: 0 !important;
    display: flex !important;
    justify-content: center !important;
    gap: 8px !important;
    z-index: 25 !important;
    pointer-events: auto !important;
}

.dot {
    width: 8px !important;
    height: 8px !important;
    border-radius: 50% !important;
    background: rgba(255, 255, 255, 0.5) !important;
    border: none !important;
    cursor: pointer !important;
    padding: 0 !important;
    transition: all 0.2s ease !important;
}

.dot.active {
    background: white !important;
    transform: scale(1.2) !important;
}

/* ===== MOBILE STYLES (COMPREHENSIVE) ===== */
@media (max-width: 768px) {
    /* Adjust overlay padding for mobile */
    .image-overlay-bottom {
        padding: 15px 15px 80px 15px;
    }
    
    /* Action icons - smaller for mobile */
    .campaign-action-icons {
        gap: 15px;
        margin: 5px 0 10px 0;
    }
    
    .action-icon {
        width: 60px;
        height: 60px;
    }
    
    .action-icon i {
        font-size: 22px;
    }
    
    .action-icon .tooltip {
        font-size: 10px;
    }
    
/* Mobile version fixes */
.mobile-version .mobile-line-1 {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: 0;
    width: auto; /* Change from 100% to auto */
    max-width: 100%; /* Allow it to take space but not force stretching */
}

.mobile-version .creator-name-text {
    margin-right: 0;
    line-height: 1.4;
    white-space: nowrap; /* Prevent username from wrapping */
}

/* Badge dot styling - appears BETWEEN elements */
.mobile-version .badge-dot {
    color: #777;
    font-size: 14px;
    margin: 0 4px;
    display: inline-flex;
    align-items: center;
    line-height: 1;
    white-space: nowrap;
}

/* Badge containers */
.mobile-version .verified-badge,
.mobile-version .changemaker-badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 20px;
    height: 20px;
    flex-shrink: 0; /* Prevent badges from shrinking */
}

.mobile-version .verified-badge i,
.mobile-version .changemaker-badge i {
    display: flex;
    align-items: center;
    justify-content: center;
    line-height: 1;
    font-size: 14px;
}

.mobile-version .verified-badge i {
    color: #3897f0;
}

.mobile-version .follow-text {
    color: #0095f6;
    font-weight: 500;
    cursor: pointer;
    font-size: 14px;
    display: inline-flex;
    align-items: center;
    line-height: 1.4;
    white-space: nowrap;
    margin-left: 0; /* Remove any left margin */
    flex-shrink: 0; /* Prevent follow button from shrinking */
}

.mobile-version .follow-text.following {
    color: #777;
}

/* Fix for the container */
.creator-details {
    flex-grow: 1;
    min-width: 0; /* Allow text to truncate properly */
    display: flex;
    flex-direction: column;
}

/* Make sure the mobile version doesn't stretch */
.mobile-version {
    width: 100%;
}

/* Ensure the menu button stays in place */
.campaign-menu {
    margin-left: auto;
    flex-shrink: 0; /* Prevent menu from shrinking */
}

/* Fix the creator-info to properly align items */
.creator-info {
    display: flex;
    align-items: center;
    padding: 12px;
    position: relative;
    justify-content: space-between;
    width: 100%;
}
    /* Hide desktop progress elements on mobile */
    .progress-info,
    .progress-container,
    .campaign-stats {
        display: none !important;
    }
    
    /* Show mobile goal display */
    .mobile-goal-display {
        display: block;
        margin: 5px auto 15px auto;
        font-size: 12px;
        padding: 6px 16px;
    }
    
    /* Adjust join prompt for mobile */
    .join-prompt {
        bottom: 70px;
        font-size: 12px;
        padding: 6px 16px;
        white-space: normal;
        max-width: 80%;
        text-align: center;
    }
    
    /* Adjust dots for mobile */
    .slideshow-dots {
        bottom: 15px !important;
        gap: 6px !important;
    }
    
    .dot {
        width: 6px !important;
        height: 6px !important;
    }
}

/* ===== VERY SMALL MOBILE (UNDER 400px) ===== */
@media (max-width: 400px) {
    .image-overlay-bottom {
        padding: 10px 10px 70px 10px;
    }
    
    .campaign-action-icons {
        gap: 8px;
    }
    
    .action-icon {
        width: 55px;
        height: 55px;
    }
    
    .action-icon i {
        font-size: 20px;
    }
    
    .action-icon .tooltip {
        font-size: 9px;
    }
    
    .mobile-goal-display {
        font-size: 11px;
        padding: 5px 12px;
    }
    
    .join-prompt {
        bottom: 65px;
        font-size: 11px;
        padding: 5px 12px;
    }
    
    .slideshow-dots {
        bottom: 12px !important;
    }
    
    .dot {
        width: 5px !important;
        height: 5px !important;
    }
}

/* ===== DESKTOP STYLES ===== */
@media (min-width: 769px) {
    .mobile-goal-display {
        display: none !important;
    }
    
    .slideshow-dots {
        bottom: 20px !important;
    }
}

/* ===== DARK MODE ===== */
.dark-mode .action-icon {
    background: rgba(255, 255, 255, 0.1);
}

.dark-mode .progress-info,
.dark-mode .mobile-goal-display,
.dark-mode .join-prompt {
    background: rgba(0, 0, 0, 0.7);
    border-color: rgba(255, 255, 255, 0.1);
}

/* ===== ENSURE CLICKABILITY ===== */
.action-icon,
.join-prompt,
.dot {
    -webkit-tap-highlight-color: rgba(29, 161, 242, 0.3);
    cursor: pointer;
}



/* ===== CAMPAIGN AUDIO TRIGGER - COMPLETELY REWRITTEN ===== */

/* Container - fixed positioning */
.campaign-audio-trigger {
    position: absolute;
    top: 16px;
    left: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 44px;
    height: 44px;
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
    border-radius: 30px;
    cursor: pointer;
    z-index: 100;
    transition: all 0.2s ease;
    border: 1px solid rgba(255, 255, 255, 0.2);
}

/* Icon */
.campaign-audio-trigger i {
    font-size: 20px;
    color: white;
    transition: all 0.2s ease;
}

/* Count badge */
.audio-listener-count {
    position: absolute;
    top: -4px;
    right: -4px;
    min-width: 18px;
    height: 18px;
    padding: 0 4px;
    background: #4ECDC4;
    color: #000;
    font-size: 10px;
    font-weight: 700;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 20px;
    border: 2px solid white;
}

/* Hover effect */
.campaign-audio-trigger:hover {
    background: rgba(29, 161, 242, 0.5);
    transform: scale(1.05);
}

.campaign-audio-trigger:hover i {
    color: white;
}

/* Mobile adjustment */
@media (max-width: 768px) {
    .campaign-audio-trigger {
        top: 12px;
        left: 12px;
        width: 40px;
        height: 40px;
    }
    
    .campaign-audio-trigger i {
        font-size: 18px;
    }
}

/* Dark mode compatibility */
.dark-mode .campaign-audio-trigger {
    background: rgba(0, 0, 0, 0.7);
    border-color: rgba(255, 255, 255, 0.15);
}



/* DEBUG - Add temporarily to check visibility */
.campaign-audio-trigger {
    border: 2px solid red !important;
    opacity: 1 !important;
    visibility: visible !important;
    display: flex !important;
    background: rgba(255, 0, 0, 0.5) !important;
}




.activities-link-container {
    margin-top: 20px;
    padding-top: 15px;
    border-top: 1px solid rgba(0,0,0,0.1);
    text-align: center;
}

.view-activities-btn {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
    padding: 12px 24px;
    border-radius: 50px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
    width: 100%;
    max-width: 280px;
    margin: 0 auto;
}

.view-activities-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
}

.view-activities-btn i {
    margin: 0 8px;
}

.activities-hint {
    font-size: 12px;
    color: #666;
    margin-top: 8px;
    font-style: italic;
}


/* Optional: Add transition for smooth color change */
.camp-join-btn {
    transition: all 0.3s ease;
}
.views-info {
    font-size: 13px;
    color: #666;
    margin-right: 10px;
}


/* # icon with transparent background - like YouTube */
.campaign-views-overlay {
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    background: transparent;  /* Fully transparent */
    color: #606060;  /* YouTube gray */
    font-size: 20px;
    font-weight: 400;
    transition: all 0.2s ease;
    border-radius: 50%;
}

.campaign-views-overlay:hover {
    background: rgba(0, 0, 0, 0.04);  /* Very subtle hover effect */
    color: #0f0f0f;  /* Darker on hover */
}

/* Even simpler version - just text, no background at all */
.campaign-views-overlay.simpler {
    cursor: pointer;
    color: #606060;
    font-size: 20px;
    padding: 4px 8px;
    background: transparent;
}

.campaign-views-overlay.simpler:hover {
    color: #0f0f0f;
}

/* Popup overlay */
.campaign-tags-popup {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 1000;
    justify-content: center;
    align-items: center;
}

/* Popup content */
.tags-popup-content {
    background-color: white;
    border-radius: 8px;
    padding: 20px;
    max-width: 400px;
    width: 90%;
    max-height: 80vh;
    overflow-y: auto;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
}

/* Popup header */
.tags-popup-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
    padding-bottom: 10px;
    border-bottom: 1px solid #eee;
}

.tags-popup-header span {
    font-size: 18px;
    font-weight: 600;
    color: #333;
}

.close-popup {
    background: none;
    border: none;
    font-size: 24px;
    cursor: pointer;
    color: #666;
    padding: 0 5px;
}

.close-popup:hover {
    color: #333;
}

/* Tags list */
.tags-list {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
}

.popup-tag-badge {
    background-color: #f0f0f0;
    color: #333;
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 14px;
    transition: background-color 0.2s;
}

.popup-tag-badge:hover {
    background-color: #e0e0e0;
}

.no-tags {
    color: #999;
    font-style: italic;
    padding: 10px 0;
}
/* ==================== CAMPAIGN INTERACTION BUTTONS (formerly campaign-action-icons) ==================== */
.campaign-interaction-buttons {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 20px;
    margin: 15px 0;
    z-index: 15;
}

/* Individual Interaction Button (formerly action-icon) */
.interaction-btn {
    position: relative;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.25);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 2px solid rgba(255, 255, 255, 0.6);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 24px;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    text-decoration: none;
    overflow: hidden;
}

.interaction-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(circle at center, rgba(255,255,255,0.4) 0%, transparent 70%);
    opacity: 0;
    transition: opacity 0.3s ease;
}

.interaction-btn:hover {
    transform: translateY(-5px) scale(1.1);
    background: rgba(255, 255, 255, 0.35);
    border-color: white;
    box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
}

.interaction-btn:hover::before {
    opacity: 1;
}

.interaction-btn:active {
    transform: translateY(-2px) scale(1.05);
}

.interaction-btn i {
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
    z-index: 2;
}

/* Individual Button Color Variants */
.interaction-btn.donate-btn {
    background: linear-gradient(135deg, rgba(255, 107, 107, 0.3), rgba(255, 107, 107, 0.5));
    border-color: rgba(255, 107, 107, 0.8);
}

.interaction-btn.pledge-btn {
    background: linear-gradient(135deg, rgba(78, 205, 196, 0.3), rgba(78, 205, 196, 0.5));
    border-color: rgba(78, 205, 196, 0.8);
}

.interaction-btn.shop-btn {
    background: linear-gradient(135deg, rgba(255, 209, 102, 0.3), rgba(255, 209, 102, 0.5));
    border-color: rgba(255, 209, 102, 0.8);
}

/* Tooltip for Interaction Buttons (formerly just .tooltip) */
.interaction-tooltip {
    position: absolute;
    bottom: -30px;
    left: 50%;
    transform: translateX(-50%) scale(0.8);
    background: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
    color: white;
    font-size: 12px;
    font-weight: 500;
    padding: 4px 10px;
    border-radius: 20px;
    white-space: nowrap;
    opacity: 0;
    visibility: hidden;
    transition: all 0.2s ease;
    pointer-events: none;
    border: 1px solid rgba(255, 255, 255, 0.2);
    letter-spacing: 0.5px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    z-index: 30;
}

.interaction-btn:hover .interaction-tooltip {
    opacity: 1;
    visibility: visible;
    transform: translateX(-50%) scale(1);
    bottom: -40px;
}

/* Pulse Animation for Interaction Buttons */
.interaction-btn.pulse-animation {
    animation: softPulse 2s infinite;
}

@keyframes softPulse {
    0%, 100% {
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
    }
    50% {
        box-shadow: 0 8px 30px rgba(255, 255, 255, 0.4);
    }
}

/* Mobile styles for interaction buttons */
@media (max-width: 768px) {
    .campaign-interaction-buttons {
        gap: 25px;
        margin-bottom: 20px;
        margin-top: 25px;
    }
    
    .interaction-btn {
        width: 65px;
        height: 65px;
        font-size: 26px;
        border-width: 2.5px;
        background: rgba(255, 255, 255, 0.3);
    }
    
    /* Ensure touch targets are large enough */
    .interaction-btn {
        min-width: 56px;
        min-height: 56px;
    }
    
    /* Adjust tooltip for mobile */
    .interaction-tooltip {
        font-size: 11px;
        padding: 5px 12px;
        bottom: -35px;
    }
    
    .interaction-btn:hover .interaction-tooltip {
        bottom: -45px;
    }
}

/* Small mobile devices */
@media (max-width: 480px) {
    .campaign-interaction-buttons {
        gap: 20px;
    }
    
    .interaction-btn {
        width: 55px;
        height: 55px;
        font-size: 22px;
    }
    
    .interaction-tooltip {
        font-size: 10px;
        padding: 4px 10px;
    }
}

/* Dark mode adjustments */
.dark-mode .interaction-btn {
    background: rgba(30, 30, 30, 0.4);
    border-color: rgba(255, 255, 255, 0.5);
}

.dark-mode .interaction-btn.donate-btn {
    background: linear-gradient(135deg, rgba(255, 107, 107, 0.4), rgba(255, 107, 107, 0.6));
}

.dark-mode .interaction-btn.pledge-btn {
    background: linear-gradient(135deg, rgba(78, 205, 196, 0.4), rgba(78, 205, 196, 0.6));
}

.dark-mode .interaction-btn.shop-btn {
    background: linear-gradient(135deg, rgba(255, 209, 102, 0.4), rgba(255, 209, 102, 0.6));
}

.dark-mode .interaction-tooltip {
    background: rgba(40, 40, 40, 0.9);
    border-color: rgba(255, 255, 255, 0.15);
}

/* Optional: Add a subtle glow effect for primary actions */
.interaction-btn.primary-action {
    border-color: #FFD700;
    box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
}

.interaction-btn.primary-action:hover {
    box-shadow: 0 0 30px rgba(255, 215, 0, 0.5);
}

 
</style>
<style>
/* ============================= */
/* SUB SECTION - LIGHT MODE */
/* ============================= */

.sub {
    display: flex;
    align-items: center;
    gap: 14px;

    padding: 18px;
    border-radius: 14px;

    background: #ffffff;
    border: 1px solid #e5e7eb;

    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.04);

    transition: all 0.25s ease;
    position: relative;
    z-index: 1;
    cursor: pointer;
}

.sub:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
    border-color: #1DA1F2; /* Twitter blue */
}

/* Icon */
.sub i {
    font-size: 20px;
    color: #1DA1F2;
    background: rgba(29, 161, 242, 0.1);
    padding: 12px;
    border-radius: 12px;
}

/* Title */
.sub h2 {
    font-size: 16px;
    font-weight: 600;
    margin: 0;
    color: #111827;
}

/* Description */
.sub p {
    font-size: 13px;
    margin: 4px 0 0;
    color: #6b7280;
}


/* ============================= */
/* SUB SECTION - DARK MODE */
/* ============================= */

.dark-mode .sub {
    background: #1f2937;
    border: 1px solid #374151;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
}

.dark-mode .sub:hover {
    border-color: #1DA1F2;
    box-shadow: 0 8px 25px rgba(29, 161, 242, 0.2);
}

.dark-mode .sub i {
    background: rgba(29, 161, 242, 0.2);
    color: #1DA1F2;
}

.dark-mode .sub h2 {
    color: #f9fafb;
}

.dark-mode .sub p {
    color: #9ca3af;
}





/* Make the bottom overlay more subtle or remove it */
.image-overlay-bottom {
    background: linear-gradient(to top, 
        rgba(0, 0, 0, 0.3) 0%,    /* Reduced from 0.7 to 0.3 */
        rgba(0, 0, 0, 0.15) 50%,  /* Reduced from 0.4 to 0.15 */
        rgba(0, 0, 0, 0) 100%) !important;
}

/* Alternative: Remove it completely if you don't need text readability */
.image-overlay-bottom {
    background: none !important;
}

/* Adjust for dark mode too */
.dark-mode .image-overlay-bottom {
    background: linear-gradient(to top, 
        rgba(0, 0, 0, 0.3) 0%, 
        rgba(0, 0, 0, 0.15) 50%, 
        rgba(0, 0, 0, 0) 100%) !important;
}

/* ===== COMPLETE FIX FOR CAMPAIGN IMAGE OVERLAY ===== */

/* Main overlay container */
.image-overlay-bottom {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    padding: 20px 20px 70px 20px; /* Bottom padding leaves space for dots */
    background: linear-gradient(to top, 
        rgba(0,0,0,0.8) 0%, 
        rgba(0,0,0,0.5) 50%, 
        transparent 100%);
    display: flex;
    flex-direction: column;
    align-items: center;
    z-index: 15;
    pointer-events: none; /* Container doesn't block clicks */
}

/* Allow clicks on interactive elements */
.image-overlay-bottom a,
.image-overlay-bottom button,
.image-overlay-bottom .campaign-action-icons,
.image-overlay-bottom .action-icon,
.image-overlay-bottom .join-prompt {
    pointer-events: auto;
}

/* ===== ACTION ICONS ===== */
.campaign-action-icons {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 30px;
    margin: 10px 0 15px 0;
    width: 100%;
    z-index: 20;
}

.action-icon {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-decoration: none;
    color: white;
    width: 70px;
    height: 70px;
    transition: all 0.2s ease;
    cursor: pointer;
    border-radius: 8px;
    background: rgba(0, 0, 0, 0.25);
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
}

.action-icon i {
    font-size: 26px;
    margin-bottom: 4px;
    color: white;
    display: block;
}

.action-icon .tooltip {
    font-size: 11px;
    font-weight: 500;
    color: rgba(255, 255, 255, 0.9);
    text-transform: uppercase;
    letter-spacing: 0.3px;
    display: block;
}

/* Hover effects */
.action-icon:hover {
    background: rgba(29, 161, 242, 0.3);
    transform: translateY(-2px);
}

/* ===== PROGRESS SECTION (DESKTOP) ===== */
.progress-info {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: auto;
    min-width: 300px;
    max-width: 400px;
    margin: 5px auto;
    padding: 8px 20px;
    background: rgba(0, 0, 0, 0.3);
    backdrop-filter: blur(4px);
    border-radius: 30px;
    color: white;
    font-size: 13px;
    z-index: 20;
}

.progress-info span:first-child {
    color: #4ECDC4;
    font-weight: 600;
    margin-right: 20px;
}

.progress-container {
    width: 80%;
    max-width: 400px;
    height: 6px;
    margin: 8px auto;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 3px;
    overflow: hidden;
    z-index: 20;
}

.progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #4ECDC4, #2ecc71);
    border-radius: 3px;
    transition: width 0.3s ease;
}

.campaign-stats {
    display: flex;
    justify-content: space-between;
    width: auto;
    min-width: 300px;
    max-width: 400px;
    margin: 5px auto;
    padding: 5px 20px;
    color: rgba(255, 255, 255, 0.9);
    font-size: 12px;
    z-index: 20;
}

.campaign-stats span:first-child {
    color: #4ECDC4;
    font-weight: 600;
    margin-right: 20px;
}

/* ===== MOBILE GOAL DISPLAY ===== */
.mobile-goal-display {
    display: none; /* Hidden by default, shown on mobile */
    text-align: center;
    color: white;
    font-size: 13px;
    font-weight: 500;
    margin: 10px auto;
    padding: 8px 20px;
    background: rgba(0, 0, 0, 0.4);
    backdrop-filter: blur(4px);
    border-radius: 30px;
    width: fit-content;
    z-index: 20;
}

/* ===== JOIN PROMPT ===== */
.join-prompt {
    position: absolute;
    bottom: 80px; /* Positioned above dots */
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(4px);
    color: white;
    padding: 8px 20px;
    border-radius: 30px;
    font-size: 13px;
    z-index: 30;
    white-space: nowrap;
    border: 1px solid rgba(255, 255, 255, 0.15);
    pointer-events: auto;
    cursor: pointer;
}

.join-prompt i {
    margin-right: 8px;
    color: #4ECDC4;
}

/* Blinking animation */
@keyframes gentlePulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
}

.blink-5s {
    animation: gentlePulse 5s infinite;
}

/* ===== SLIDESHOW DOTS ===== */
.slideshow-dots {
    position: absolute !important;
    bottom: 20px !important;
    left: 0 !important;
    right: 0 !important;
    display: flex !important;
    justify-content: center !important;
    gap: 8px !important;
    z-index: 25 !important;
    pointer-events: auto !important;
}

.dot {
    width: 8px !important;
    height: 8px !important;
    border-radius: 50% !important;
    background: rgba(255, 255, 255, 0.5) !important;
    border: none !important;
    cursor: pointer !important;
    padding: 0 !important;
    transition: all 0.2s ease !important;
}

.dot.active {
    background: white !important;
    transform: scale(1.2) !important;
}

/* ===== MOBILE STYLES (COMPREHENSIVE) ===== */
@media (max-width: 768px) {
    /* Adjust overlay padding for mobile */
    .image-overlay-bottom {
        padding: 15px 15px 80px 15px;
    }
    
    /* Action icons - smaller for mobile */
    .campaign-action-icons {
        gap: 15px;
        margin: 5px 0 10px 0;
    }
    
    .action-icon {
        width: 60px;
        height: 60px;
    }
    
    .action-icon i {
        font-size: 22px;
    }
    
    .action-icon .tooltip {
        font-size: 10px;
    }
    
/* Mobile version fixes */
.mobile-version .mobile-line-1 {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: 0;
    width: auto; /* Change from 100% to auto */
    max-width: 100%; /* Allow it to take space but not force stretching */
}

.mobile-version .creator-name-text {
    margin-right: 0;
    line-height: 1.4;
    white-space: nowrap; /* Prevent username from wrapping */
}

/* Badge dot styling - appears BETWEEN elements */
.mobile-version .badge-dot {
    color: #777;
    font-size: 14px;
    margin: 0 4px;
    display: inline-flex;
    align-items: center;
    line-height: 1;
    white-space: nowrap;
}

/* Badge containers */
.mobile-version .verified-badge,
.mobile-version .changemaker-badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 20px;
    height: 20px;
    flex-shrink: 0; /* Prevent badges from shrinking */
}

.mobile-version .verified-badge i,
.mobile-version .changemaker-badge i {
    display: flex;
    align-items: center;
    justify-content: center;
    line-height: 1;
    font-size: 14px;
}

.mobile-version .verified-badge i {
    color: #3897f0;
}

.mobile-version .follow-text {
    color: #0095f6;
    font-weight: 500;
    cursor: pointer;
    font-size: 14px;
    display: inline-flex;
    align-items: center;
    line-height: 1.4;
    white-space: nowrap;
    margin-left: 0; /* Remove any left margin */
    flex-shrink: 0; /* Prevent follow button from shrinking */
}

.mobile-version .follow-text.following {
    color: #777;
}

/* Fix for the container */
.creator-details {
    flex-grow: 1;
    min-width: 0; /* Allow text to truncate properly */
    display: flex;
    flex-direction: column;
}

/* Make sure the mobile version doesn't stretch */
.mobile-version {
    width: 100%;
}

/* Ensure the menu button stays in place */
.campaign-menu {
    margin-left: auto;
    flex-shrink: 0; /* Prevent menu from shrinking */
}

/* Fix the creator-info to properly align items */
.creator-info {
    display: flex;
    align-items: center;
    padding: 12px;
    position: relative;
    justify-content: space-between;
    width: 100%;
}
    /* Hide desktop progress elements on mobile */
    .progress-info,
    .progress-container,
    .campaign-stats {
        display: none !important;
    }
    
    /* Show mobile goal display */
    .mobile-goal-display {
        display: block;
        margin: 5px auto 15px auto;
        font-size: 12px;
        padding: 6px 16px;
    }
    
    /* Adjust join prompt for mobile */
    .join-prompt {
        bottom: 70px;
        font-size: 12px;
        padding: 6px 16px;
        white-space: normal;
        max-width: 80%;
        text-align: center;
    }
    
    /* Adjust dots for mobile */
    .slideshow-dots {
        bottom: 15px !important;
        gap: 6px !important;
    }
    
    .dot {
        width: 6px !important;
        height: 6px !important;
    }
}

/* ===== VERY SMALL MOBILE (UNDER 400px) ===== */
@media (max-width: 400px) {
    .image-overlay-bottom {
        padding: 10px 10px 70px 10px;
    }
    
    .campaign-action-icons {
        gap: 8px;
    }
    
    .action-icon {
        width: 55px;
        height: 55px;
    }
    
    .action-icon i {
        font-size: 20px;
    }
    
    .action-icon .tooltip {
        font-size: 9px;
    }
    
    .mobile-goal-display {
        font-size: 11px;
        padding: 5px 12px;
    }
    
    .join-prompt {
        bottom: 65px;
        font-size: 11px;
        padding: 5px 12px;
    }
    
    .slideshow-dots {
        bottom: 12px !important;
    }
    
    .dot {
        width: 5px !important;
        height: 5px !important;
    }
}

/* ===== DESKTOP STYLES ===== */
@media (min-width: 769px) {
    .mobile-goal-display {
        display: none !important;
    }
    
    .slideshow-dots {
        bottom: 20px !important;
    }
}

/* ===== DARK MODE ===== */
.dark-mode .action-icon {
    background: rgba(255, 255, 255, 0.1);
}

.dark-mode .progress-info,
.dark-mode .mobile-goal-display,
.dark-mode .join-prompt {
    background: rgba(0, 0, 0, 0.7);
    border-color: rgba(255, 255, 255, 0.1);
}

/* ===== ENSURE CLICKABILITY ===== */
.action-icon,
.join-prompt,
.dot {
    -webkit-tap-highlight-color: rgba(29, 161, 242, 0.3);
    cursor: pointer;
}



/* ===== CAMPAIGN AUDIO TRIGGER - COMPLETELY REWRITTEN ===== */

/* Container - fixed positioning */
.campaign-audio-trigger {
    position: absolute;
    top: 16px;
    left: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 44px;
    height: 44px;
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
    border-radius: 30px;
    cursor: pointer;
    z-index: 100;
    transition: all 0.2s ease;
    border: 1px solid rgba(255, 255, 255, 0.2);
}

/* Icon */
.campaign-audio-trigger i {
    font-size: 20px;
    color: white;
    transition: all 0.2s ease;
}

/* Count badge */
.audio-listener-count {
    position: absolute;
    top: -4px;
    right: -4px;
    min-width: 18px;
    height: 18px;
    padding: 0 4px;
    background: #4ECDC4;
    color: #000;
    font-size: 10px;
    font-weight: 700;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 20px;
    border: 2px solid white;
}

/* Hover effect */
.campaign-audio-trigger:hover {
    background: rgba(29, 161, 242, 0.5);
    transform: scale(1.05);
}

.campaign-audio-trigger:hover i {
    color: white;
}

/* Mobile adjustment */
@media (max-width: 768px) {
    .campaign-audio-trigger {
        top: 12px;
        left: 12px;
        width: 40px;
        height: 40px;
    }
    
    .campaign-audio-trigger i {
        font-size: 18px;
    }
}

/* Dark mode compatibility */
.dark-mode .campaign-audio-trigger {
    background: rgba(0, 0, 0, 0.7);
    border-color: rgba(255, 255, 255, 0.15);
}



/* DEBUG - Add temporarily to check visibility */
.campaign-audio-trigger {
    border: 2px solid red !important;
    opacity: 1 !important;
    visibility: visible !important;
    display: flex !important;
    background: rgba(255, 0, 0, 0.5) !important;
}




.activities-link-container {
    margin-top: 20px;
    padding-top: 15px;
    border-top: 1px solid rgba(0,0,0,0.1);
    text-align: center;
}

.view-activities-btn {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
    padding: 12px 24px;
    border-radius: 50px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
    width: 100%;
    max-width: 280px;
    margin: 0 auto;
}

.view-activities-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
}

.view-activities-btn i {
    margin: 0 8px;
}

.activities-hint {
    font-size: 12px;
    color: #666;
    margin-top: 8px;
    font-style: italic;
}


/* Optional: Add transition for smooth color change */
.camp-join-btn {
    transition: all 0.3s ease;
}
.views-info {
    font-size: 13px;
    color: #666;
    margin-right: 10px;
}

/* Campaign Tags Popup */
.campaign-tags-popup {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 10000;
    justify-content: center;
    align-items: center;
    backdrop-filter: blur(4px);
}

.campaign-tags-popup.active {
    display: flex;
}

/* Popup content - transparent like YouTube */
.tags-popup-content {
    background: transparent;
    padding: 20px;
    max-width: 400px;
    width: 90%;
    max-height: 80vh;
    overflow-y: auto;
    animation: tagsPopupFade 0.2s ease;
}

/* Tags container */
.tags-container {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    justify-content: center;
    align-items: center;
    min-height: 100px;
}

/* Individual tag badge - transparent style */
.tag-badge {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    color: white;
    padding: 12px 24px;
    border-radius: 40px;
    font-size: 18px;
    font-weight: 500;
    letter-spacing: 0.5px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    transition: all 0.2s ease;
    cursor: pointer;
    animation: tagPopIn 0.3s cubic-bezier(0.18, 0.89, 0.32, 1.28);
}

.tag-badge:hover {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.4);
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
}

.tag-badge i {
    margin-right: 8px;
    font-size: 16px;
    opacity: 0.9;
}

/* Close button */
.tags-close-btn {
    position: absolute;
    top: 20px;
    right: 20px;
    width: 44px;
    height: 44px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: white;
    font-size: 24px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
    z-index: 10001;
}

.tags-close-btn:hover {
    background: rgba(255, 255, 255, 0.2);
    transform: rotate(90deg);
}

/* Empty state */
.no-tags-message {
    text-align: center;
    color: white;
    font-size: 18px;
    padding: 30px;
    background: rgba(0, 0, 0, 0.3);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    border-radius: 60px;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.no-tags-message i {
    font-size: 36px;
    margin-bottom: 10px;
    opacity: 0.8;
    display: block;
}

/* Dark mode adjustments */
.dark-mode .tag-badge {
    background: rgba(0, 0, 0, 0.3);
    border-color: rgba(255, 255, 255, 0.1);
    color: #e4e6eb;
}

.dark-mode .no-tags-message {
    background: rgba(0, 0, 0, 0.5);
    color: #e4e6eb;
}

/* Animations */
@keyframes tagsPopupFade {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

@keyframes tagPopIn {
    from {
        opacity: 0;
        transform: scale(0.8);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

/* Mobile responsive */
@media (max-width: 768px) {
    .tags-popup-content {
        padding: 16px;
    }
    
    .tag-badge {
        padding: 10px 20px;
        font-size: 16px;
    }
    
    .tags-close-btn {
        top: 10px;
        right: 10px;
        width: 40px;
        height: 40px;
        font-size: 20px;
    }
}
/* # icon with transparent background - like YouTube */
.campaign-views-overlay {
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    background: transparent;  /* Fully transparent */
    color: #606060;  /* YouTube gray */
    font-size: 20px;
    font-weight: 400;
    transition: all 0.2s ease;
    border-radius: 50%;
}

.campaign-views-overlay:hover {
    background: rgba(0, 0, 0, 0.04);  /* Very subtle hover effect */
    color: #0f0f0f;  /* Darker on hover */
}

/* Even simpler version - just text, no background at all */
.campaign-views-overlay.simpler {
    cursor: pointer;
    color: #606060;
    font-size: 20px;
    padding: 4px 8px;
    background: transparent;
}

.campaign-views-overlay.simpler:hover {
    color: #0f0f0f;
}

/* Popup overlay */
.campaign-tags-popup {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 1000;
    justify-content: center;
    align-items: center;
}

/* Popup content */
.tags-popup-content {
    background-color: white;
    border-radius: 8px;
    padding: 20px;
    max-width: 400px;
    width: 90%;
    max-height: 80vh;
    overflow-y: auto;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
}

/* Popup header */
.tags-popup-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
    padding-bottom: 10px;
    border-bottom: 1px solid #eee;
}

.tags-popup-header span {
    font-size: 18px;
    font-weight: 600;
    color: #333;
}

.close-popup {
    background: none;
    border: none;
    font-size: 24px;
    cursor: pointer;
    color: #666;
    padding: 0 5px;
}

.close-popup:hover {
    color: #333;
}

/* Tags list */
.tags-list {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
}

.popup-tag-badge {
    background-color: #f0f0f0;
    color: #333;
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 14px;
    transition: background-color 0.2s;
}

.popup-tag-badge:hover {
    background-color: #e0e0e0;
}

.no-tags {
    color: #999;
    font-style: italic;
    padding: 10px 0;
}
</style>

<style>
.campaign-caption {
    font-size: 15px;
    line-height: 1.5;
    padding: 8px 16px;
    color: #262626;
}

.campaign-content-points {
    position: relative;
}

.content-preview {
    display: inline;
    line-height: 1.5;
    color: #262626;
}

/* Inline See More button */
.inline-see-more {
    background: none;
    border: none;
    color: #0095f6;
    font-size: 15px;
    font-weight: 500;
    padding: 0 4px;
    cursor: pointer;
    display: inline;
    transition: all 0.2s ease;
}

.inline-see-more:hover {
    color: #1877f2;
    text-decoration: underline;
}

/* Full content styling */
.full-content {
    margin-top: 0;
    line-height: 1.5;
}

.full-text {
    margin-bottom: 8px;
    color: #262626;
}

/* See Less button */
.see-less-btn {
    background: none;
    border: none;
    color: #0095f6;
    font-size: 14px;
    font-weight: 500;
    padding: 4px 0;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 4px;
    transition: all 0.2s ease;
}

.see-less-btn:hover {
    color: #1877f2;
    text-decoration: underline;
}

.see-less-btn i {
    font-size: 12px;
}

/* Dark mode */
.dark-mode .campaign-caption,
.dark-mode .content-preview,
.dark-mode .full-text {
    color: #e4e6eb;
}

.dark-mode .inline-see-more,
.dark-mode .see-less-btn {
    color: #64b5f6;
}

.dark-mode .inline-see-more:hover,
.dark-mode .see-less-btn:hover {
    color: #90caf9;
}

/* Mobile adjustments */
@media (max-width: 768px) {
    .campaign-caption {
        font-size: 14px;
        padding: 6px 12px;
    }
    
    .inline-see-more {
        font-size: 14px;
    }
}

/* Hide appropriate versions */
@media (min-width: 769px) {
    .mobile-version {
        display: none;
    }
}

@media (max-width: 768px) {
    .web-version {
        display: none;
    }
}
</style>



<style>
/* Hide desktop on mobile, hide mobile on desktop - WITH !important to override */
@media (min-width: 769px) {
    .mobile-version {
        display: none !important;
    }
    .web-version {
        display: block !important;
    }
}

@media (max-width: 768px) {
    .web-version {
        display: none !important;
    }
    .mobile-version {
        display: block !important;
    }
}

.campaign-caption {
    font-size: 15px;
    line-height: 1.5;
    padding: 8px 16px;
    color: #262626;
}

.campaign-content-points {
    position: relative;
}

.content-preview {
    display: block;
    line-height: 1.5;
    color: #262626;
}

/* Inline See More button */
.inline-see-more {
    background: none;
    border: none;
    color: #0095f6;
    font-size: 15px;
    font-weight: 500;
    padding: 0 4px;
    cursor: pointer;
    display: inline;
    transition: all 0.2s ease;
}

.inline-see-more:hover {
    color: #1877f2;
    text-decoration: underline;
}

/* Full content styling */
.full-content {
    margin-top: 0;
    line-height: 1.5;
}

.full-text {
    margin-bottom: 8px;
    color: #262626;
}

/* See Less button */
.see-less-btn {
    background: none;
    border: none;
    color: #0095f6;
    font-size: 14px;
    font-weight: 500;
    padding: 4px 0;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 4px;
    transition: all 0.2s ease;
}

.see-less-btn:hover {
    color: #1877f2;
    text-decoration: underline;
}

.see-less-btn i {
    font-size: 12px;
}

/* Dark mode */
.dark-mode .campaign-caption,
.dark-mode .content-preview,
.dark-mode .full-text {
    color: #e4e6eb;
}

.dark-mode .inline-see-more,
.dark-mode .see-less-btn {
    color: #64b5f6;
}

.dark-mode .inline-see-more:hover,
.dark-mode .see-less-btn:hover {
    color: #90caf9;
}

/* Mobile adjustments */
@media (max-width: 768px) {
    .campaign-caption {
        font-size: 14px;
        padding: 6px 12px;
    }
    
    .inline-see-more {
        font-size: 14px;
    }
}



.sound-tribe-popup {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 9999;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
}

.sound-tribe-popup.active {
    display: block;
}

.popup-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(8px);
    animation: overlayFade 0.2s ease;
}

.popup-container {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 100%;
    max-width: 500px;
    padding: 16px;
    animation: modalSlideUp 0.3s cubic-bezier(0.18, 0.89, 0.32, 1.28);
}

/* Popup Card */
.popup-card {
    background: #ffffff;
    border-radius: 24px;
    overflow: hidden;
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
    position: relative;
    max-height: 85vh;
    display: flex;
    flex-direction: column;
}

/* Loader */
.popup-loader {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(255, 255, 255, 0.9);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 10;
    backdrop-filter: blur(4px);
}

.loader-spinner {
    width: 48px;
    height: 48px;
    border: 3px solid #e0e0e0;
    border-top-color: #1DA1F2;
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
}

/* Header */
.popup-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 16px 20px;
    border-bottom: 1px solid #f0f0f0;
    flex-shrink: 0;
}

.header-left {
    display: flex;
    align-items: center;
    gap: 12px;
}

.header-icon {
    width: 40px;
    height: 40px;
    background: linear-gradient(135deg, #667eea 0%, #1DA1F2 100%);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.header-icon i {
    color: white;
    font-size: 20px;
}

.popup-header h2 {
    font-size: 20px;
    font-weight: 700;
    color: #1a1a1a;
    margin: 0;
}

.popup-close {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    border: none;
    background: #f0f0f0;
    color: #666;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
}

.popup-close:hover {
    background: #e0e0e0;
    color: #333;
    transform: rotate(90deg);
}

/* Cover Image */
.popup-cover {
    height: 100px;
    background: linear-gradient(135deg, #667eea 0%, #1DA1F2 100%);
    position: relative;
    flex-shrink: 0;
}

.cover-gradient {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(180deg, transparent 0%, rgba(0,0,0,0.3) 100%);
}

.cover-content {
    position: absolute;
    bottom: -20px;
    left: 20px;
}

.tribe-badge {
    background: white;
    padding: 6px 16px;
    border-radius: 30px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    display: inline-flex;
    align-items: center;
    gap: 8px;
    font-weight: 600;
    font-size: 14px;
    color: #1a1a1a;
}

.tribe-badge i {
    color: #1DA1F2;
    font-size: 14px;
}

/* Body */
.popup-body {
    padding: 32px 20px 20px;
    overflow-y: auto;
    flex: 1;
}

/* Tribe Info */
.tribe-info {
    text-align: center;
    margin-bottom: 20px;
}

.tribe-info h3 {
    font-size: 22px;
    font-weight: 700;
    color: #1a1a1a;
    margin: 0 0 4px 0;
}

.tribe-info p {
    font-size: 14px;
    color: #666;
    margin: 0;
}

/* Stats Card */
.stats-card {
    background: #f8f9fa;
    border-radius: 16px;
    padding: 16px;
    display: flex;
    align-items: center;
    justify-content: space-around;
    margin-bottom: 20px;
    border: 1px solid #f0f0f0;
}

.stat-item {
    text-align: center;
    flex: 1;
}

.stat-value {
    display: block;
    font-size: 26px;
    font-weight: 800;
    color: #1DA1F2;
    line-height: 1.2;
}

.stat-label {
    font-size: 12px;
    color: #666;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.stat-divider {
    width: 1px;
    height: 35px;
    background: #e0e0e0;
}

/* Action Section */
.action-section {
    margin-bottom: 20px;
}

/* Join Button */
.join-button {
    width: 100%;
    padding: 14px;
    background: linear-gradient(135deg, #667eea 0%, #1DA1F2 100%);
    border: none;
    border-radius: 12px;
    color: white;
    font-weight: 600;
    font-size: 15px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(29, 161, 242, 0.3);
}

.join-button:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(29, 161, 242, 0.4);
}

.join-button:disabled {
    opacity: 0.7;
    cursor: not-allowed;
    background: linear-gradient(135deg, #a5a5a5 0%, #808080 100%);
    box-shadow: none;
}

.join-button.joined {
    background: linear-gradient(135deg, #34c759 0%, #30b650 100%);
}

/* Activities Container */
.activities-container {
    margin-top: 16px;
    animation: slideDown 0.3s ease;
}

.activities-divider {
    text-align: center;
    margin-bottom: 12px;
    position: relative;
}

.activities-divider::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 0;
    right: 0;
    height: 1px;
    background: #f0f0f0;
    z-index: 1;
}

.activities-divider span {
    background: white;
    padding: 0 12px;
    color: #666;
    font-size: 12px;
    font-weight: 600;
    position: relative;
    z-index: 2;
}

/* Activities Button */
.activities-button {
    width: 100%;
    padding: 16px;
    background: #f0f7ff;
    border: 2px solid #e1f0ff;
    border-radius: 16px;
    display: flex;
    align-items: center;
    gap: 12px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.activities-button:hover {
    background: #e1f0ff;
    border-color: #1DA1F2;
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(29, 161, 242, 0.15);
}

.activities-icon {
    width: 44px;
    height: 44px;
    background: linear-gradient(135deg, #667eea 0%, #1DA1F2 100%);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.activities-icon i {
    color: white;
    font-size: 22px;
}

.activities-text {
    flex: 1;
    text-align: left;
}

.activities-title {
    display: block;
    font-weight: 700;
    color: #1a1a1a;
    font-size: 15px;
    margin-bottom: 2px;
}

.activities-subtitle {
    display: block;
    font-size: 12px;
    color: #666;
}

.activities-arrow {
    color: #1DA1F2;
    font-size: 18px;
    transition: transform 0.2s ease;
    flex-shrink: 0;
}

.activities-button:hover .activities-arrow {
    transform: translateX(5px);
}

/* Members Section */
.members-section {
    background: #f8f9fa;
    border-radius: 16px;
    padding: 16px;
    border: 1px solid #f0f0f0;
}

.members-header {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 16px;
    color: #1a1a1a;
    font-weight: 600;
    font-size: 14px;
}

.members-header i {
    color: #1DA1F2;
    font-size: 16px;
}

.members-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    min-height: 60px;
}

.member-badge {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    background: white;
    padding: 6px 12px 6px 6px;
    border-radius: 40px;
    text-decoration: none;
    color: #1a1a1a;
    border: 1px solid #f0f0f0;
    transition: all 0.2s ease;
    font-size: 13px;
    max-width: 100%;
}

.member-badge:hover {
    border-color: #1DA1F2;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(29, 161, 242, 0.15);
}

.member-avatar {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid white;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    flex-shrink: 0;
}

.member-username {
    font-weight: 600;
    max-width: 100px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.member-reaction {
    font-size: 14px;
    flex-shrink: 0;
}

.empty-state {
    text-align: center;
    padding: 20px;
    width: 100%;
    color: #666;
}

.empty-state i {
    font-size: 28px;
    color: #1DA1F2;
    opacity: 0.5;
    margin-bottom: 6px;
    display: block;
}

.empty-state p {
    margin: 0;
    font-size: 13px;
}

/* Dark Mode Styles */
.dark-mode .popup-card {
    background: #1a1a1a;
}

.dark-mode .popup-header {
    border-bottom-color: #333;
    background: #1a1a1a;
}

.dark-mode .popup-header h2 {
    color: #fff;
}

.dark-mode .popup-close {
    background: #333;
    color: #999;
}

.dark-mode .tribe-badge {
    background: #2d2d2d;
    color: #fff;
    border: 1px solid #404040;
}

.dark-mode .tribe-info h3 {
    color: #fff;
}

.dark-mode .tribe-info p {
    color: #999;
}

.dark-mode .stats-card {
    background: #2d2d2d;
    border-color: #404040;
}

.dark-mode .stat-value {
    color: #1DA1F2;
}

.dark-mode .stat-label {
    color: #999;
}

.dark-mode .stat-divider {
    background: #404040;
}

.dark-mode .activities-divider span {
    background: #1a1a1a;
    color: #999;
}

.dark-mode .activities-divider::before {
    background: #333;
}

.dark-mode .activities-button {
    background: #2d2d2d;
    border-color: #404040;
}

.dark-mode .activities-button:hover {
    background: #333;
    border-color: #1DA1F2;
}

.dark-mode .activities-title {
    color: #fff;
}

.dark-mode .activities-subtitle {
    color: #999;
}

.dark-mode .members-section {
    background: #2d2d2d;
    border-color: #404040;
}

.dark-mode .members-header {
    color: #fff;
}

.dark-mode .member-badge {
    background: #1a1a1a;
    border-color: #404040;
    color: #fff;
}

.dark-mode .member-badge:hover {
    border-color: #1DA1F2;
}

.dark-mode .empty-state {
    color: #999;
}

.dark-mode .empty-state i {
    color: #1DA1F2;
    opacity: 0.5;
}

.dark-mode .popup-loader {
    background: rgba(26, 26, 26, 0.9);
}

/* Animations */
@keyframes overlayFade {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes modalSlideUp {
    from {
        opacity: 0;
        transform: translate(-50%, -30%);
    }
    to {
        opacity: 1;
        transform: translate(-50%, -50%);
    }
}

@keyframes slideDown {
    from {
        opacity: 0;
        transform: translateY(-15px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* Mobile Responsive */
@media (max-width: 480px) {
    .popup-container {
        padding: 12px;
    }
    
    .popup-card {
        border-radius: 20px;
    }
    
    .popup-header {
        padding: 14px 16px;
    }
    
    .popup-cover {
        height: 80px;
    }
    
    .cover-content {
        bottom: -16px;
        left: 16px;
    }
    
    .tribe-badge {
        padding: 4px 14px;
        font-size: 13px;
    }
    
    .popup-body {
        padding: 28px 16px 16px;
    }
    
    .tribe-info h3 {
        font-size: 20px;
    }
    
    .tribe-info p {
        font-size: 13px;
    }
    
    .stat-value {
        font-size: 22px;
    }
    
    .stat-label {
        font-size: 11px;
    }
    
    .join-button {
        padding: 12px;
        font-size: 14px;
    }
    
    .activities-button {
        padding: 14px;
    }
    
    .activities-icon {
        width: 40px;
        height: 40px;
    }
    
    .activities-icon i {
        font-size: 20px;
    }
    
    .activities-title {
        font-size: 14px;
    }
    
    .activities-subtitle {
        font-size: 11px;
    }
    
    .members-section {
        padding: 14px;
    }
    
    .member-badge {
        padding: 4px 10px 4px 4px;
        font-size: 12px;
    }
    
    .member-avatar {
        width: 24px;
        height: 24px;
    }
    
    .member-username {
        max-width: 70px;
    }
}

/* Small height screens */
@media (max-height: 700px) {
    .popup-card {
        max-height: 90vh;
    }
    
    .popup-cover {
        height: 70px;
    }
    
    .popup-body {
        padding: 24px 16px 16px;
    }
    
    .tribe-info {
        margin-bottom: 16px;
    }
    
    .stats-card {
        padding: 12px;
        margin-bottom: 16px;
    }
    
    .action-section {
        margin-bottom: 16px;
    }
    
    .members-section {
        padding: 12px;
    }
}

/* Reduced Motion */
@media (prefers-reduced-motion: reduce) {
    .popup-container,
    .popup-close,
    .join-button,
    .activities-button,
    .member-badge,
    .loader-spinner,
    .activities-container {
        animation: none;
        transition: none;
    }
}

/* Dark mode support for PWA button */
.dark-mode .pwa-install-link,
[data-theme="dark"] .pwa-install-link {
    background: rgba(29, 155, 240, 0.15) !important;
    color: #71c7ff !important;
    border-color: rgba(29, 155, 240, 0.4) !important;
}

.dark-mode .pwa-install-link:hover,
[data-theme="dark"] .pwa-install-link:hover {
    background: rgba(29, 155, 240, 0.25) !important;
}

.dark-mode .pwa-help-text,
[data-theme="dark"] .pwa-help-text {
    color: #888 !important;
}

/* Campaign Tags Popup */
.campaign-tags-popup {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 10000;
    justify-content: center;
    align-items: flex-start; /* Changed from center to start for better scrolling */
    overflow-y: auto; /* Allow page scrolling if popup is taller than viewport */
    backdrop-filter: blur(4px);
    padding: 20px 0; /* Add padding for better spacing */
}

.campaign-tags-popup.active {
    display: flex;
}

/* Popup content - now scrollable and positioned */
.tags-popup-content {
    background: transparent;
    padding: 30px 20px;
    max-width: 800px; /* Increased max-width for many tags */
    width: 95%;
    margin: 40px auto; /* Center with margin instead of flex centering */
    max-height: none; /* Remove max-height restriction */
    position: relative;
}

/* Tags container - improved grid layout */
.tags-container {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    justify-content: center;
    align-items: center;
    padding: 20px;
    background: rgba(0, 0, 0, 0.2); /* Subtle background to make tags pop */
    border-radius: 60px;
    min-height: 100px;
}

/* Individual tag badge - with max-width and text truncation for very long tags */
.tag-badge {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    color: #333 !important;
    padding: 12px 24px;
    border-radius: 40px;
    font-size: 18px;
    font-weight: 500;
    letter-spacing: 0.5px;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    transition: all 0.2s ease;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    max-width: 300px; /* Prevent tags from getting too wide */
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* For very long tags, show full on hover */
.tag-badge:hover {
    background: white;
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
    max-width: none; /* Show full text on hover */
    white-space: normal;
    word-break: break-word;
    z-index: 10;
}

.tag-badge i {
    color: #1DA1F2;
    font-size: 18px;
    flex-shrink: 0; /* Prevent icon from shrinking */
}

/* Close button - fixed position */
.tags-close-btn {
    position: fixed; /* Changed to fixed so it's always accessible */
    top: 20px;
    right: 20px;
    width: 44px;
    height: 44px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.95);
    border: 1px solid rgba(0, 0, 0, 0.1);
    color: #333;
    font-size: 24px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
    z-index: 10001;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
}

/* Empty state */
.no-tags-message {
    text-align: center;
    color: white;
    font-size: 18px;
    padding: 40px;
    background: rgba(0, 0, 0, 0.3);
    backdrop-filter: blur(8px);
    border-radius: 60px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    width: 100%;
}

/* Tag counter badge (optional - shows total tag count) */
.tag-counter {
    position: absolute;
    top: -10px;
    right: 20px;
    background: rgba(255, 255, 255, 0.95);
    color: #333;
    padding: 5px 15px;
    border-radius: 30px;
    font-size: 14px;
    font-weight: 600;
    border: 1px solid rgba(0, 0, 0, 0.1);
    backdrop-filter: blur(4px);
    z-index: 10;
}

/* Responsive scaling for mobile */
@media (max-width: 768px) {
    .campaign-tags-popup {
        align-items: flex-start;
        padding: 10px 0;
    }
    
    .tags-popup-content {
        padding: 20px 10px;
        margin: 20px auto;
        width: 98%;
    }
    
    .tags-container {
        gap: 8px;
        padding: 15px;
        border-radius: 40px;
    }
    
    .tag-badge {
        padding: 8px 16px;
        font-size: 14px;
        max-width: 200px;
    }
    
    .tags-close-btn {
        top: 10px;
        right: 10px;
        width: 40px;
        height: 40px;
        font-size: 20px;
    }
}

/* For very small screens */
@media (max-width: 480px) {
    .tag-badge {
        padding: 6px 12px;
        font-size: 13px;
        max-width: 150px;
    }
    
    .tags-container {
        padding: 12px;
        gap: 6px;
    }
}

/* Optional: Category grouping for many tags */
.tags-container.has-many-tags {
    justify-content: flex-start; /* Left align when many tags */
    background: rgba(0, 0, 0, 0.3);
}

/* Optional: Add tag count display */
.tags-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
    padding: 0 10px;
}

.tags-header h3 {
    color: white;
    font-size: 16px;
    font-weight: 400;
    margin: 0;
    text-shadow: 0 1px 2px rgba(0,0,0,0.3);
}

.tag-count-badge {
    background: rgba(255, 255, 255, 0.2);
    color: white;
    padding: 4px 12px;
    border-radius: 30px;
    font-size: 13px;
    backdrop-filter: blur(4px);
    border: 1px solid rgba(255, 255, 255, 0.2);
}
</style>
<div class="sub">
    <i class="fas fa-bullhorn"></i>
    <div>
        <h2>Cause Details</h2>
        <p>View full cause information, updates, and ways to support.</p>
    </div>
</div>



<div class="simple-campaigns-container">
    
    
      <div class="simple-campaign-card">
    <div class="creator-info">
    <a href="{% url 'profile_view' username=campaign.user.user.username %}" class="creator-pic">
        <img src="{{ campaign.user.image.url }}" alt="{{ campaign.user.user.username }}">
    </a>
    <div class="creator-details">
        <div class="creator-info-line web-version">
            <!-- Desktop: All in one line -->
            <span class="creator-name-text">{{ campaign.user.user.username }}</span>
            
            
            {% if campaign.user.profile_verified %}
            <span class="verified-badge">
                <i class="fas fa-check-circle"></i>
            </span>
            {% endif %}
            
            {% if campaign.is_changemaker %}
            <span class="changemaker-badge"><i class="far fa-star"></i></span>
            {% endif %}
            


            {% if request.user != campaign.user.user %}
            <span id="follow-btn-{{ campaign.user.user.id }}" 
                  class="follow-text {% if request.user in campaign.user.user.followers.all %}following{% endif %}" 
                  data-user-id="{{ campaign.user.user.id }}"
                  data-is-following="{% if request.user in campaign.user.user.followers.all %}true{% else %}false{% endif %}">
                {% if request.user in campaign.user.user.followers.all %}
                     Following
                {% else %}
                     Follow
                {% endif %}
            </span>
            {% endif %}
        </div>
        
        <!-- Desktop time (was missing) -->
        <div class="campaign-time web-version-time">
             {{ campaign.timestamp|timesince }} ago
            <span class="location-dot"></span>
            <i class="fas fa-map-marker-alt"></i> {{ campaign.user.location }}
        </div>
        
       <!-- Mobile: Two lines with proper alignment -->
<!-- Mobile: Two lines with proper alignment -->
<!-- Mobile: Two lines with proper alignment -->
<!-- Mobile: Two lines with proper alignment -->
<div class="creator-info-line mobile-version">
    <!-- Line 1: Username + Verification + Changemaker + Follow (all on one line) -->
    <div class="mobile-line-1">
        <span class="creator-name-text">{{ campaign.user.user.username }}</span>
        
        <!-- Dot before verified badge if it exists -->
        {% if campaign.user.profile_verified %}
       
        <span class="verified-badge">
            <i class="fas fa-check-circle"></i>
        </span>
        {% endif %}
        
        <!-- Dot before changemaker badge if it exists -->
        {% if campaign.is_changemaker %}
            <!-- Add dot before changemaker if verified exists, otherwise no dot needed yet -->
            {% if campaign.user.profile_verified %}
            <span class="badge-dot"></span>
            {% endif %}
            <span class="changemaker-badge">
                <i class="far fa-star"></i>
            </span>
        {% endif %}
        
        <!-- Dot before follow button if any badges exist -->
        {% if request.user != campaign.user.user %}
            {% if campaign.user.profile_verified or campaign.is_changemaker %}
            <span class="badge-dot"></span>
            {% endif %}
            <span id="follow-btn-mobile-{{ campaign.user.user.id }}" 
                  class="follow-text {% if request.user in campaign.user.user.followers.all %}following{% endif %}" 
                  data-user-id="{{ campaign.user.user.id }}"
                  data-is-following="{% if request.user in campaign.user.user.followers.all %}true{% else %}false{% endif %}">
                {% if request.user in campaign.user.user.followers.all %}
                    Following
                {% else %}
                    Follow
                {% endif %}
            </span>
        {% endif %}
    </div>
    
    <!-- Line 2: Time and location with icons -->
    <div class="mobile-line-2">
        <span class="campaign-time">
             {{ campaign.timestamp|timesince }} ago
            <span class="location-dot"></span>
            <i class="fas fa-map-marker-alt"></i> {{ campaign.user.location }}
        </span>
    </div>
</div>
</div>

    <!-- Campaign Menu - Positioned to the right -->
    <div class="campaign-menu" onclick="togglaMenu(this)" style="position: relative;">
       <i class="fas fa-ellipsis-h"></i>
        <div class="menu-dropdown">
            <!-- ===== Public Items ===== -->
            <a href="{% url 'view_campaign' campaign_id=campaign.pk %}">
                <i class="fas fa-eye"></i> View Details
            </a>

            <a href="{% url 'campaign_joiners' campaign.id %}" class="comment-count" aria-label="View joiners of this campaign">
                <i class="fas fa-user-plus"></i> Joiners ({{ campaign.user_profiles.count|format_count }})
            </a>

            <a href="{% url 'top_participants' campaign_id=campaign.pk %}" class="top-supporters-link">
                <i class="fas fa-trophy"></i> Top Participants
            </a>

            <a href="{% url 'report_campaign' campaign.id %}">
                <i class="fas fa-flag"></i> Report
            </a>

            <div class="not-interested-container">
                <form action="{% url 'mark_not_interested' campaign_id=campaign.pk %}" method="post" class="not-interested-form">
                    {% csrf_token %}
                    <div class="form-row">
                        <label for="not-interested" class="form-label">
                            <i class="fas fa-times-circle"></i> Not Interested
                        </label>
                        <div class="form-controls">
                            <input type="checkbox" id="not-interested" name="not_interested" class="form-checkbox">
                        </div>
                    </div>
                    <button type="submit" class="form-submit-button">Submit</button>
                </form>
            </div>
            
            <!-- ===== Owner-Only Items ===== -->
            {% if user == campaign.user.user %}
            <a href="{% url 'recreate_campaign' campaign.id %}">
                <i class="fas fa-edit"></i> Edit / Recreate
            </a>
            
            {% if campaign.supportcampaign_set.first.pledge_visible %}
            <a href="{% url 'campaign_pledgers' campaign.id %}">
                <i class="fas fa-donate"></i> Pledgers
            </a>
            {% endif %}

            <a href="{% url 'support' campaign_id=campaign.id %}" class="update-visibility-link">
                <i class="fas fa-mouse-pointer"></i> CTA Buttons
            </a>

            <a href="{% url 'campaign_engagement' campaign.id %}">
                <i class="fas fa-chart-bar"></i> Engagement
            </a>

            <!--  New link: Activity List -->
            <a href="{% url 'activity_list' campaign.id %}">
                <i class="fas fa-tasks"></i> Add Activity
            </a>

            <a href="{% url 'campaign-delete' campaign.pk %}" class="delete-link">
                <i class="fas fa-trash"></i> Delete
            </a>
            {% endif %}

            <!-- Optional: Visibility toggle could also be owner-only -->
            {% if user == campaign.user.user %}
            <a href="{% url 'update_visibilit' campaign.pk %}">
                <i class="fas fa-lock"></i> Visibility
            </a>
            {% endif %}
        </div>
    </div>
</div>
<!--

<!-- Campaign Image - Dominant Space -->


<!-- Campaign Image - Dominant Space -->
<div class="campaign-image-section" data-campaign-id="{{ campaign.id }}">

    {% if campaign.poster or campaign.additional_images %}
    <div class="campaign-image-container slideshow-container">
        <!-- Slideshow wrapper -->
        <div class="slideshow-wrapper">
            <div class="slideshow-track">
    <!-- Main poster as first slide -->
    {% if campaign.poster %}
    <div class="slide active" data-index="0">
        {% if user.is_authenticated and campaign|has_joined_tribe:user.profile %}
        <a href="{% url 'activity_list' campaign_id=campaign.id %}" class="campaign-poster-link">
        {% endif %}
        
        <img src="{{ campaign.poster.url }}" 
             alt="{{ campaign.title }}" 
             class="main-campaign-image {% if user.is_authenticated and campaign|has_joined_tribe:user.profile %}clickable-poster{% endif %}"
             style="{% if user.is_authenticated and campaign|has_joined_tribe:user.profile %}cursor: pointer;{% endif %}" loading="lazy">
        
        {% if user.is_authenticated and campaign|has_joined_tribe:user.profile %}
        </a>
        {% endif %}
    </div>
    {% endif %}
    
    <!-- Additional images as subsequent slides -->
    {% if campaign.additional_images %}
        {% for image_url in campaign.additional_images %}
        <div class="slide" data-index="{{ forloop.counter|add:1 }}">
            {% if user.is_authenticated and campaign|has_joined_tribe:user.profile %}
            <a href="{% url 'activity_list' campaign_id=campaign.id %}" class="campaign-poster-link">
            {% endif %}
            
            <img src="{{ image_url }}" 
                 alt="{{ campaign.title }} - Image {{ forloop.counter }}" 
                 class="main-campaign-image {% if user.is_authenticated and campaign|has_joined_tribe:user.profile %}clickable-poster{% endif %}"
                 style="{% if user.is_authenticated and campaign|has_joined_tribe:user.profile %}cursor: pointer;{% endif %}" loading="lazy">
            
            {% if user.is_authenticated and campaign|has_joined_tribe:user.profile %}
            </a>
            {% endif %}
        </div>
        {% endfor %}
    {% endif %}
</div>
            
            <!-- Slideshow Controls (only show if multiple images) -->
            {% if campaign.additional_images %}
            <div class="slideshow-controls">
                <button class="slideshow-prev" aria-label="Previous image">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <button class="slideshow-next" aria-label="Next image">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
            
            <!-- Dots indicator -->
            <div class="slideshow-dots">
                <button class="dot active" data-index="0" aria-label="Go to poster"></button>
                {% for image_url in campaign.additional_images %}
                <button class="dot" data-index="{{ forloop.counter }}" 
                        aria-label="Go to image {{ forloop.counter }}"></button>
                {% endfor %}
            </div>
            {% endif %}
        </div>
        <!-- Your existing overlay elements - FIXED POSITIONING -->
                <!-- Sound Community Icon - ONLY SHOW IF AUDIO EXISTS -->
              
  <!-- Audio Player Icon - Renamed -->



        <!-- Your existing # icon that triggers the popup -->
<!-- Campaign Tags Data for JavaScript - Place this FIRST -->
<script id="campaign-tags-data" type="application/json">
{{ campaign_tags_json|safe }}
</script>

<!-- Then your # icon -->
<div class="campaign-views-overlay" aria-label="View campaign tags" onclick="showTagsPopup('{{ campaign.id }}')">
    #</div>
        
        
        <div class="image-overlay-bottom">
            <!-- Action icons with data-title instead of title -->
         <!-- Campaign Interaction Buttons - with new design -->
    <div class="campaign-interaction-buttons">
        <!-- Donate button - only show if donation is enabled -->
        {% if campaign.supportcampaign_set.first.donate_monetary_visible %}
            <a href="{% url 'create_donation' campaign_id=campaign.id %}" class="interaction-btn donate-btn pulse-animation" data-title="Donate">
                <i class="fas fa-hand-holding-heart"></i>
                <span class="interaction-tooltip">Donate</span>
            </a>
        {% endif %}
       
        <!-- Pledge button - only show if pledge is enabled -->
        {% if campaign.supportcampaign_set.first.pledge_visible %}
            <a href="{% url 'create_pledge' campaign_id=campaign.id %}" class="interaction-btn pledge-btn" data-title="Pledge">
                <i class="fas fa-handshake"></i>
                <span class="interaction-tooltip">Pledge</span>
            </a>
        {% endif %}

        <!-- Purchase Products button - only show if campaign product is enabled -->
        {% if campaign.supportcampaign_set.first.campaign_product_visible %}
            <a href="{% url 'product_manage' campaign_id=campaign.id %}" class="interaction-btn shop-btn" data-title="Purchase Products">
                <i class="fas fa-shopping-cart"></i>
                <span class="interaction-tooltip">Shop</span>
            </a>
        {% endif %}
    </div>
            
            {% if campaign.supportcampaign_set.first.donate_monetary_visible %}
            <div class="progress-info">
                <span>Raised: ${{ campaign.total_donations }}</span>
                <span>Goal: ${{ campaign.funding_goal }}</span>
            </div>

            <div class="progress-container">
                <div class="progress-fill" style="width: {{ campaign.donation_percentage }}%;"></div>
            </div>

            <div class="campaign-stats">
                <span>{{ campaign.donation_percentage }}% funded</span>
                <span>${{ campaign.donation_remaining }} to go</span>
            </div>

            <div class="mobile-goal-display">
                {{ campaign.donation_percentage }}% funded  ${{ campaign.donation_remaining }} to go
            </div>
            {% endif %}

       
        </div>

       
    </div>
    {% else %}
    <div class="no-image-placeholder">
        <i class="fas fa-image"></i>
        <p>No image available</p>
    </div>
    {% endif %}
</div>
     <div class="campaign-caption">
    <div class="campaign-content-points">
        <!-- Desktop/Web version - 30 words with inline See More -->
        <div class="web-version content-preview">
            {% if campaign.content|wordcount > 30 %}
                {{ campaign.content|truncatewords:30|slice:"-8" }}... 
                <button class="inline-see-more" onclick="expandContent(this, 'desktop')">
                    See More
                </button>
            {% else %}
                {{ campaign.content }}
            {% endif %}
        </div>

        <!-- Mobile version - 8 words with inline See More -->
        <div class="mobile-version content-preview">
            {% if campaign.content|wordcount > 8 %}
                {{ campaign.content|truncatewords:8|slice:"-8" }}... 
                <button class="inline-see-more" onclick="expandContent(this, 'mobile')">
                    See More
                </button>
            {% else %}
                {{ campaign.content }}
            {% endif %}
        </div>

        <!-- Full content (hidden initially) -->
        <div class="full-content" style="display: none;">
            <div class="full-text">{{ campaign.content }}</div>
            <button class="see-less-btn" onclick="collapseContent(this)">
                See Less <i class="fas fa-chevron-up"></i>
            </button>
        </div>
    </div>

</div>

<div class="campaign-status">
    <!-- SIMPLE VIEWS COUNTER - FIRST ITEM, NO ICON -->
   
    {% if campaign.is_outdated %}
    <div class="status-badge outdated">
        <i class="fas fa-exclamation-circle"></i> Cause Ended
    </div>
    {% else %}
    <div class="status-badge active">
        <i class="fas fa-check-circle"></i> Active Now
    </div>
    {% endif %}
     <div class="views-info">
        {{ campaign.campaignview_set.count|format_count }} views
    </div>
    
    <div class="runtime-info">
        <i class="fas fa-calendar-alt"></i>
        {% if campaign.duration %}
            {{ campaign.duration }} {{ campaign.duration_unit }}
        {% else %}
            Ongoing
        {% endif %}
    </div>
    
    <!-- ADD TIME LEFT HERE -->
    <div class="time-left-info">
        <i class="fas fa-clock"></i>
        {% if campaign.days_left != None %}
            {% if campaign.days_left == 0 %}
                <span class="urgent">Ends today!</span>
            {% elif campaign.days_left == 1 %}
                <span class="urgent">1 day left</span>
            {% elif campaign.days_left <= 7 %}
                <span class="warning">{{ campaign.days_left }} days left</span>
            {% else %}
                <span>{{ campaign.days_left }} days left</span>
            {% endif %}
        {% else %}
            <span>No deadline</span>
        {% endif %}
    </div>
</div>
<!-- Simple Action Buttons - Renamed with camp-action-* prefix -->
<div class="camp-action-bar">
    <div class="camp-action-group">
        <button class="camp-action-btn camp-love-btn" onclick="toggleLove({{ campaign.id }})">
            <i id="love-icon-{{ campaign.id }}" class="fas fa-heart"></i> 
            <span id="love-count-{{ campaign.id }}" class="camp-count">{{ campaign.love_count|format_count }}</span>
            <span class="camp-label">Like</span>
        </button>
        
        <button class="camp-action-btn camp-comment-btn" onclick="showCommentPopup({{ campaign.id }})">
            <i class="far fa-comment"></i> 
            <span id="comment-count-{{ campaign.id }}" class="camp-count">{{ campaign.comments.count|default:0 }}</span>
            <span class="camp-label">Comment</span>
        </button>
        
        <button class="camp-action-btn camp-share-btn" onclick="showSharePopup({{ campaign.id }})">
            <i class="fas fa-share-alt"></i> 
            <span class="camp-label">Share</span>
        </button>
    </div>
    
<!-- SIMPLE JOIN BUTTON - TRIGGERS SOUND POPUP -->
<!-- SIMPLE JOIN BUTTON - TRIGGERS SOUND POPUP -->
<button onclick="soundManager.openPopup({{ campaign.id }})" 
        class="camp-join-btn {% if user_joined_status and user_joined_status|get_item:campaign.id %}joined{% endif %}"
        data-campaign-id="{{ campaign.id }}">
    <i class="fas {% if user_joined_status and user_joined_status|get_item:campaign.id %}fa-sign-out-alt{% else %}fa-headphones-alt{% endif %}"></i>
    <span>{% if user_joined_status and user_joined_status|get_item:campaign.id %}Leave{% else %}Join{% endif %}</span>

</button>

</div>
        

<!-- Share Popup Container -->
<div id="sharePopup" class="share-popup">
    <div class="share-popup-content">
        <span class="close-share" onclick="hideSharePopup()"></span>
        <h3>Share This Cause</h3>
        <div class="share-buttons">
            <a href="#" class="share-btn facebook" onclick="shareOnFacebook()" title="Share on Facebook">
                <i class="fab fa-facebook-f"></i>
            </a>
            <a href="#" class="share-btn twitter" onclick="shareOnTwitter()" title="Share on Twitter">
                <i class="fab fa-twitter"></i>
            </a>
            <a href="#" class="share-btn linkedin" onclick="shareOnLinkedIn()" title="Share on LinkedIn">
                <i class="fab fa-linkedin-in"></i>
            </a>
            <a href="#" class="share-btn whatsapp" onclick="shareOnWhatsApp()" title="Share on WhatsApp">
                <i class="fab fa-whatsapp"></i>
            </a>
            <a href="#" class="share-btn reddit" onclick="shareOnReddit()" title="Share on Reddit">
                <i class="fab fa-reddit-alien"></i>
            </a>
            <a href="#" class="share-btn telegram" onclick="shareOnTelegram()" title="Share on Telegram">
                <i class="fab fa-telegram-plane"></i>
            </a>
            <a href="#" class="share-btn pinterest" onclick="shareOnPinterest()" title="Share on Pinterest">
                <i class="fab fa-pinterest-p"></i>
            </a>
            <a href="#" class="share-btn email" onclick="shareViaEmail()" title="Share via Email">
                <i class="fas fa-envelope"></i>
            </a>
        </div>
        <div class="copy-link-container">
            <span class="copy-link-title">Or copy link</span>
            <div class="copy-link">
                <input type="text" id="campaignUrl" readonly>
                <button onclick="copyCampaignUrl()" title="Copy link">
                    <i class="fas fa-copy"></i>
                </button>
            </div>
        </div>
    </div>
</div>


        
        <!-- Hidden content that was in your original HTML -->
        <div class="hidden-content" style="display:none;">
            
            
            <div class="funding-progress-card">
                <!-- Your original funding progress card -->
            </div>
            
            <div class="activity-links">
                {% if user.profile in campaign.user_profiles.all %}
                <a href="{% url 'activity_list' campaign_id=campaign.id %}" class="activity-link">
                    <i class='fas'>&#xf6e3;</i> Activities
                </a>
                <a href="{% url 'support' campaign_id=campaign.id %}" class="support-link">
                    <i class="material-icons">&#xe925;</i> Participate
                </a>
                {% endif %}
            </div>
            
            <!-- Audio player -->
          

<!-- =======================
     PERCAMPAIGN AUDIO LOGIC
     ======================= -->
<!-- =======================
     PERCAMPAIGN AUDIO LOGIC
=========================== -->
{% if campaign.audio %}
    <audio class="campaign-audio" 
           data-campaign-id="{{ campaign.id }}" 
           preload="auto" 
           loop 
           muted>
        <source src="{{ campaign.audio.url }}" type="audio/mpeg">
    </audio>
{% else %}
    <audio class="campaign-audio" 
           data-campaign-id="{{ campaign.id }}" 
           preload="auto" 
           loop 
           muted>
        <source src="{{ campaign.get_default_audio }}" type="audio/mpeg">
    </audio>
{% endif %}

       
       
        </div>
    </div>


<!-- Sound Tribe Popup - Redesigned -->
<div id="soundCommunityPopup" class="sound-tribe-popup">
    <div class="popup-overlay"></div>
    <div class="popup-container">
        <!-- Loader -->
        <div class="popup-loader" id="popupLoader">
            <div class="loader-spinner"></div>
        </div>

        <!-- Main Popup Content -->
        <div class="popup-card">
            <!-- Header -->
            <div class="popup-header">
                <div class="header-left">
                    <div class="header-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <h2>Soundmark Tribe</h2>
                </div>
                <button class="popup-close" onclick="soundManager.closePopup()">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <!-- Cover Image Area -->
            <div class="popup-cover">
                <div class="cover-gradient"></div>
                <div class="cover-content">
                    <div class="tribe-badge">
                        <i class="fas fa-music"></i>
                        <span>Sound Tribe</span>
                    </div>
                </div>
            </div>

            <!-- Body -->
            <div class="popup-body">
                <!-- Tribe Info -->
                <div class="tribe-info">
                    <h3>Join the Movement</h3>
                    <p>Connect with others who stand with this cause</p>
                </div>

                <!-- Stats Card -->
                <div class="stats-card">
                    <div class="stat-item">
                        <span class="stat-value" id="tribeMemberCount">0</span>
                        <span class="stat-label">Tribe Members</span>
                    </div>
                    <div class="stat-divider"></div>
                  
                </div>
<!-- Update the Action Section in your popup -->
<div class="action-section">
    <!-- Join/Leave Button Container -->
    <div id="tribeActionContainer">
        <!-- Join Button (shown when not joined) -->
        <button id="joinTribeBtn" onclick="soundManager.joinSoundTribe()" class="join-button">
            <i class="fas fa-headphones-alt"></i>
            <span>Join Sound Tribe</span>
        </button>
        
        <!-- Leave Button (shown after joining) - Hidden by default -->
        <button id="leaveTribeBtn" onclick="soundManager.leaveSoundTribe()" class="leave-button" style="display: none;">
            <i class="fas fa-sign-out-alt"></i>
            <span>Leave Sound Tribe</span>
        </button>
    </div>

    <!-- Activities Link - Shows after joining -->
    <div id="activitiesContainer" class="activities-container" style="display: none;">
        <div class="activities-divider">
            <span>You're a member!</span>
        </div>
        
        <button onclick="soundManager.viewActivities()" class="activities-button">
            <div class="activities-icon">
                <i class="fas fa-map-marked-alt"></i>
            </div>
            <div class="activities-text">
                <span class="activities-title">View Cause Journey</span>
                <span class="activities-subtitle">See photos, updates & activities</span>
            </div>
            <i class="fas fa-arrow-right activities-arrow"></i>
        </button>
    </div>
</div>
                <!-- Recent Members -->
                <div class="members-section">
                    <div class="members-header">
                        <i class="fas fa-users"></i>
                        <span>Recent Tribe Members</span>
                    </div>
                    
                    <div id="recentMembersContainer" class="members-grid">
                        <!-- Members will be populated here -->
                        <div class="empty-state">
                            <i class="fas fa-music"></i>
                            <p>Be the first to join the Sound Tribe!</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Footer -->
            <div class="popup-footer">
                <span class="footer-text" style="padding-left: 14px;">Soundmark  Building community through sound</span>
            </div>
        </div>
    </div>
</div>

<!-- Campaign Tags Popup -->
<div id="campaignTagsPopup" class="campaign-tags-popup">
    <button class="tags-close-btn" onclick="closeTagsPopup()">
        <i class="fas fa-times"></i>
    </button>
    <div class="tags-popup-content">
        <div id="tagsContainer" class="tags-container">
            <!-- Tags will be dynamically inserted here -->
        </div>
    </div>
</div>
<!-- CSRF Token -->
{% csrf_token %}

<!-- Then your JavaScript -->
<script type="text/javascript">
// Function to show tags popup
function showTagsPopup(campaignId) {
    const popup = document.getElementById('campaignTagsPopup');
    const tagsContainer = document.getElementById('tagsContainer');
    
    // Clear previous tags
    tagsContainer.innerHTML = '';
    
    // Get tags from the JSON script tag
    const campaignTags = getCampaignTags(campaignId);
    
    if (campaignTags && campaignTags.length > 0) {
        // Create tag elements
        campaignTags.forEach(tag => {
            const tagElement = document.createElement('span');
            tagElement.className = 'tag-badge';
            tagElement.innerHTML = `<i class="fas fa-hashtag"></i>${tag}`;
            tagsContainer.appendChild(tagElement);
        });
    } else {
        // Show empty state
        tagsContainer.innerHTML = `
            <div class="no-tags-message">
                <i class="fas fa-tags"></i>
                <span>No tags yet</span>
            </div>
        `;
    }
    
    // Show popup
    popup.classList.add('active');
    document.body.style.overflow = 'hidden';
}

// Function to close tags popup
function closeTagsPopup() {
    const popup = document.getElementById('campaignTagsPopup');
    popup.classList.remove('active');
    document.body.style.overflow = '';
}

// Function to get campaign tags from JSON script
function getCampaignTags(campaignId) {
    const tagsScript = document.getElementById('campaign-tags-data');
    if (tagsScript) {
        try {
            const allTags = JSON.parse(tagsScript.textContent);
            return allTags[String(campaignId)] || [];
        } catch (e) {
            console.error('Error parsing tags:', e);
            return [];
        }
    }
    return [];
}

// Close popup when clicking outside
document.addEventListener('click', function(event) {
    const popup = document.getElementById('campaignTagsPopup');
    const tagsContent = document.querySelector('.tags-popup-content');
    const hashtagIcon = event.target.closest('.campaign-views-overlay');
    
    if (popup.classList.contains('active') && 
        tagsContent && 
        !tagsContent.contains(event.target) && 
        !hashtagIcon) {
        closeTagsPopup();
    }
});

// Close popup with Escape key
document.addEventListener('keydown', function(event) {
    if (event.key === 'Escape') {
        closeTagsPopup();
    }
});

// Debug - remove after testing
document.addEventListener('DOMContentLoaded', function() {
    console.log('Tags data:', document.getElementById('campaign-tags-data')?.textContent);
});
</script>

<script type="text/javascript">
    // Enhanced showTagsPopup function that handles many tags
function showTagsPopup(campaignId) {
    const popup = document.getElementById('campaignTagsPopup');
    const tagsContainer = document.getElementById('tagsContainer');
    
    // Clear previous tags
    tagsContainer.innerHTML = '';
    
    // Get tags
    const campaignTags = getCampaignTags(campaignId);
    
    if (campaignTags && campaignTags.length > 0) {
        // Add special class if many tags
        if (campaignTags.length > 20) {
            tagsContainer.classList.add('has-many-tags');
        }
        
        // Optional: Add tag count header
        const tagsHeader = document.createElement('div');
        tagsHeader.className = 'tags-header';
        tagsHeader.innerHTML = `
            <h3>${campaignTags.length} tags</h3>
            <span class="tag-count-badge">${campaignTags.length} total</span>
        `;
        tagsContainer.appendChild(tagsHeader);
        
        // Create tag elements
        campaignTags.forEach(tag => {
            const tagElement = document.createElement('span');
            tagElement.className = 'tag-badge';
            tagElement.innerHTML = `<i class="fas fa-hashtag"></i>${tag}`;
            
            // Add click handler
            tagElement.onclick = function(e) {
                e.stopPropagation();
                searchByTag(tag);
            };
            
            tagsContainer.appendChild(tagElement);
        });
    } else {
        tagsContainer.innerHTML = `
            <div class="no-tags-message">
                <i class="fas fa-tags"></i>
                <span>No tags yet</span>
            </div>
        `;
    }
    
    // Show popup
    popup.classList.add('active');
    document.body.style.overflow = 'hidden';
}
</script>



    <!-- ==================== -->
    <!-- SCRIPTS -->
    <!-- ==================== -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>


       <script src="{% static 'main/js/pwa.js' %}"></script>



    <script>
        // Add your JavaScript functionality here
        function toggleMenu(event) {
            if (event) event.preventDefault();
            const menu = document.getElementById('navbarDropdownMenu');
            const overlay = document.getElementById('menuOverlay');
            
            menu.classList.toggle('active');
            overlay.classList.toggle('active');
        }

        function handleCreateClick(event) {
            // Your create click handler logic
        }
    </script>










<script>
function togglaMenu(clickedElement) {
    // Close other open menus
    document.querySelectorAll('.menu-dropdown.active').forEach(menu => {
        if (!clickedElement.contains(menu)) {
            menu.classList.remove('active');
        }
    });

    // Toggle the clicked one
    const dropdown = clickedElement.querySelector('.menu-dropdown');
    dropdown.classList.toggle('active');
}

// Close the menu if clicked outside
document.addEventListener('click', function(event) {
    // Don't close if clicking on form elements within the menu
    const isFormElement = event.target.closest('.not-interested-form') || 
                         event.target.matches('input, select, textarea, label');
    
    const isClickInside = event.target.closest('.campaign-menu');
    
    if (!isClickInside && !isFormElement) {
        document.querySelectorAll('.menu-dropdown.active').forEach(menu => {
            menu.classList.remove('active');
        });
    }
});

// Prevent checkbox clicks from bubbling up and closing the menu
document.addEventListener('click', function(event) {
    if (event.target.matches('.form-checkbox, .form-label, .form-submit-button')) {
        event.stopPropagation();
    }
}, true);
</script>


<script>
function handleJoinClick(campaignId) {
    {% if not user.is_authenticated %}
        window.location.href = "{% url 'account_login' %}?next=" + encodeURIComponent(window.location.pathname);
    {% else %}
        soundManager.openPopup(campaignId);
    {% endif %}
}
</script>




<script type="text/javascript">
  document.addEventListener('DOMContentLoaded', function() {
  const searchInput = document.getElementById('mobile-search-input');
  const clearButton = document.querySelector('.clear-search');
  
  if (searchInput && clearButton) {
    // Show/hide clear button based on input
    searchInput.addEventListener('input', function() {
      clearButton.style.display = this.value.length > 0 ? 'flex' : 'none';
    });
    
    // Clear input when X is clicked
    clearButton.addEventListener('click', function() {
      searchInput.value = '';
      clearButton.style.display = 'none';
      searchInput.focus();
    });
    
    // Handle when popup is opened (in case there's existing text)
    const mobileSearchIcon = document.querySelector('.mobile-search-icon');
    if (mobileSearchIcon) {
      mobileSearchIcon.addEventListener('click', function() {
        setTimeout(() => {
          clearButton.style.display = searchInput.value.length > 0 ? 'flex' : 'none';
        }, 100);
      });
    }
  }
});
</script>



<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Toggle search popup
        const mobileSearchIcon = document.querySelector('.rallynex-mobile-search-icon');
        const mobileSearchPopup = document.querySelector('.rallynex-mobile-search-popup');
        const closeMobileSearch = document.querySelector('.rallynex-close-mobile-search');
        const searchInput = document.getElementById('mobile-search-input');
        const clearButton = document.querySelector('.rallynex-clear-search');
        
        if (mobileSearchIcon && mobileSearchPopup) {
            mobileSearchIcon.addEventListener('click', function() {
                mobileSearchPopup.classList.add('active');
                if (searchInput) searchInput.focus();
            });
            
            closeMobileSearch.addEventListener('click', function() {
                mobileSearchPopup.classList.remove('active');
            });
        }
        
        // Clear search functionality
        if (searchInput && clearButton) {
            searchInput.addEventListener('input', function() {
                clearButton.style.display = this.value.length > 0 ? 'flex' : 'none';
            });
            
            clearButton.addEventListener('click', function() {
                searchInput.value = '';
                clearButton.style.display = 'none';
                searchInput.focus();
            });
        }
    });
</script>

<script>
    function handleCreateClick(e) {
        // Optional: Add any animation or pre-submit logic here
        // e.preventDefault(); // Uncomment if you want to handle with AJAX
        
        // Example animation:
        const btn = e.target;
        btn.style.transform = 'scale(0.9)';
        setTimeout(() => {
            btn.style.transform = 'scale(1)';
        }, 100);
    }
</script>
<script>
// In your script tags or JS file
function blinkJoinPrompt() {
    const prompt = document.querySelector('.join-prompt');
    if (prompt) {
        setInterval(() => {
            prompt.style.opacity = prompt.style.opacity === '0' ? '1' : '0';
        }, 5000); // Toggle every 5 seconds
    }
}

// Call on page load
window.addEventListener('DOMContentLoaded', blinkJoinPrompt);
</script>






<script>

// Your existing functions
function toggleLove(campaignId) {
    // Existing love toggle functionality
}

function showSharePopup(campaignId) {
    // Existing share functionality
}
</script>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const queryField = document.getElementById('query-field');
        const resetBtn = document.getElementById('reset-field');
        
        // Show/hide reset button based on input
        queryField.addEventListener('input', function() {
            resetBtn.style.display = this.value ? 'block' : 'none';
        });
        
        // Reset field
        resetBtn.addEventListener('click', function() {
            queryField.value = '';
            this.style.display = 'none';
            queryField.focus();
        });
    });
</script>

<script type="text/javascript">
// Helper functions for cookies
function setCookie(name, value, days) {
    const expires = new Date(Date.now() + days*24*60*60*1000).toUTCString();
    document.cookie = `${name}=${value}; expires=${expires}; path=/`;
}

function getCookie(name) {
    const cookies = document.cookie.split(';').map(c => c.trim());
    for (let c of cookies) {
        if (c.startsWith(name + '=')) return c.split('=')[1];
    }
    return null;
}

// Function to toggle dark mode
function switchColor() {
    const body = document.body;
    const isDarkMode = body.classList.toggle('dark-mode'); // Toggle dark mode class

    // Save preference to cookie for 1 year
    setCookie('dark_mode', isDarkMode, 365);

    // Funding progress card
    document.querySelector('.funding-progress-card')?.classList.toggle('dark-mode', isDarkMode);

    // Elements to update background and text colors
    const elementsToUpdate = document.querySelectorAll(
        'header, footer, section, .left-aside, .right-aside, .upper-post, .campaign-content, .react, .search-container input, .search-container .btn-reset'
    );
    elementsToUpdate.forEach(el => el.classList.toggle('dark-mode', isDarkMode));

    // Text color updates
    const textElements = document.querySelectorAll(
        'h1, h2, h3, h4, p, li, .campaign-nav, .campaign-nav a, .btn, .reaction, .action-item, .action-item a, .carousel, .ad, .slide, .ad a, .explore-link, .love-count, #view-count, .comment-count'
    );
    textElements.forEach(el => el.style.color = isDarkMode ? '#ffffff' : '#000000');

    // Buttons
    const buttons = document.querySelectorAll('button:not(.btn-search, .btn-reset)');
    buttons.forEach(btn => {
        btn.style.backgroundColor = isDarkMode ? '#262626' : '';
        btn.style.color = isDarkMode ? '#ffffff' : '#000000';
    });

    // `.react` divs
    const reactDivs = document.querySelectorAll('.react');
    reactDivs.forEach(div => {
        div.style.backgroundColor = isDarkMode ? "#262626" : "";
        div.style.color = isDarkMode ? "white" : "black";
        if (isDarkMode) div.classList.add('react-hover');
        else div.classList.remove('react-hover');
    });

    // Input field and reset button
    const inputField = document.querySelector('.search-container input[type="text"]');
    if (inputField) {
        inputField.style.backgroundColor = isDarkMode ? '#333333' : '#ffffff';
        inputField.style.color = isDarkMode ? '#ffffff' : '#000000';
    }
    const inputResetButton = document.querySelector('.search-container .btn-reset');
    if (inputResetButton) inputResetButton.style.color = '#b0b0b0';
}

// Apply dark mode on page load based on cookie
window.addEventListener('DOMContentLoaded', () => {
    const darkModeCookie = getCookie('dark_mode');
    if (darkModeCookie === 'true') {
        switchColor();
    }
});
</script>



<script>



function toggleCommentForm() {
    var popup = document.getElementById("commentFormPopup");
    popup.style.display = "block";
}

function closeCommentForm() {
    var popup = document.getElementById("commentFormPopup");
    popup.style.display = "none";
}

document.addEventListener('DOMContentLoaded', function() {
    var campaignElement = document.querySelector('.campaign-details');
    var campaignId = {{ campaign.id }};
    var startTime;

    function recordCampaignView() {
        var endTime = Math.floor(Date.now() / 1000); // Get current time in seconds
        var timeSpent = endTime - startTime;
        
        fetch(`/record_campaign_view/${campaignId}/`, {
            method: 'POST',
            credentials: 'same-origin',
            headers: {
                'X-CSRFToken': '{{ csrf_token }}',
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ time_spent: timeSpent })
        })
        .then(response => {
            if (response.ok) {
                console.log('View recorded successfully');
            } else {
                console.error('Failed to record view');
            }
        })
        .catch(error => {
            console.error('Error:', error);
        });
    }

    function handleVisibilityChange() {
        if (document.visibilityState === 'visible') {
            startTime = Math.floor(Date.now() / 1000); // Get current time in seconds
        } else {
            recordCampaignView();
        }
    }

    function isInViewport(element) {
        var rect = element.getBoundingClientRect();
        return (
            rect.top >= 0 &&
            rect.left >= 0 &&
            rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
            rect.right <= (window.innerWidth || document.documentElement.clientWidth)
        );
    }

    function handleScroll() {
        if (isInViewport(campaignElement)) {
            startTime = Math.floor(Date.now() / 1000); // Get current time in seconds
        } else {
            recordCampaignView();
        }
    }

    document.addEventListener('visibilitychange', handleVisibilityChange);
    document.addEventListener('scroll', handleScroll);
});

document.addEventListener('DOMContentLoaded', function() {
    var mediaQuery = window.matchMedia('(max-width: 768px)');
    var leftAside = document.querySelector('.left-aside');
    var rightAside = document.querySelector('.right-aside');

    function handleMediaQueryChange(e) {
        if (e.matches) {
            leftAside.style.display = 'none';
            rightAside.style.display = 'none';
        } else {
            leftAside.style.display = 'block';
            rightAside.style.display = 'block';
        }
    }

    mediaQuery.addListener(handleMediaQueryChange);
    handleMediaQueryChange(mediaQuery);
});


</script>

<script type="text/javascript">
  function handleCreateClick() {
    console.log("Create button clicked!");
    // Add your custom logic here, if needed
}

</script>




<script>
// Store follow state in localStorage
function updateFollowState(userId, isFollowing) {
    const storageKey = `followState_${userId}`;
    localStorage.setItem(storageKey, isFollowing ? 'true' : 'false');
}

// Retrieve follow state from localStorage
function getFollowState(userId) {
    const storageKey = `followState_${userId}`;
    return localStorage.getItem(storageKey) === 'true';
}

document.addEventListener('DOMContentLoaded', function() {
    // Initialize text elements with correct state
    document.querySelectorAll('.follow-text').forEach(element => {
        const userId = element.getAttribute('data-user-id');
        const storedState = getFollowState(userId);
        const currentState = element.getAttribute('data-is-following') === 'true';
        
        // Use stored state if available, otherwise use server state
        const finalState = storedState !== null ? storedState : currentState;
        
        if (finalState) {
            element.classList.add('following');
            element.textContent = ' Following';
            element.setAttribute('data-is-following', 'true');
        } else {
            element.classList.remove('following');
            element.textContent = ' Follow';
            element.setAttribute('data-is-following', 'false');
        }
    });

    // Handle follow text clicks
    document.querySelectorAll('.follow-text').forEach(element => {
        element.addEventListener('click', async function() {
            const userId = this.getAttribute('data-user-id');
            
            try {
                const response = await fetch('/toggle-follow/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-CSRFToken': '{{ csrf_token }}'
                    },
                    body: JSON.stringify({
                        'user_id': userId
                    })
                });

                const data = await response.json();
                
                if (data.status === 'success') {
                    // Update text state
                    const newState = data.action === 'followed';
                    this.classList.toggle('following', newState);
                    this.textContent = newState ? ' Following' : ' Follow';
                    this.setAttribute('data-is-following', newState.toString());
                    
                    // Update followers count
                    const followersCount = document.getElementById(`followers-count-${userId}`);
                    if (followersCount) {
                        followersCount.textContent = `(${data.followers_count} followers)`;
                    }
                    
                    // Persist state in localStorage
                    updateFollowState(userId, newState);
                } else {
                    console.error('Error:', data.message);
                }
            } catch (error) {
                console.error('Error:', error);
                alert('An error occurred. Please try again.');
            }
        });
    });
});
</script>



<script>
function refreshTrending() {
  // Add AJAX call to refresh trending content
  console.log("Refreshing trending content...");
  // In a real implementation, you would fetch new trending data here
}

// Add this to your existing script section
document.addEventListener('DOMContentLoaded', function() {
  // Highlight the first three items more prominently
  const trendingItems = document.querySelectorAll('.trending-item');
  trendingItems.forEach((item, index) => {
    if (index < 3) {
      item.style.borderLeft = `3px solid ${
        index === 0 ? '#ff4d4f' : 
        index === 1 ? '#fa8c16' : '#fadb14'
      }`;
    }
  });
});
</script>




<script type="text/javascript">
    
document.addEventListener('submit', function (e) {
    if (e.target.classList.contains('reply-form')) {
        e.preventDefault();

        const form = e.target;
        const formData = new FormData(form);

        fetch('/post-comment/', {
            method: 'POST',
            headers: {
                'X-CSRFToken': getCSRFToken(),  // Make sure you include this helper
            },
            body: formData
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                // Optionally refresh replies list or insert new reply into DOM
                console.log('Reply posted:', data.comment);
                // e.g., appendReplyToDOM(data.comment);
                form.querySelector('.reply-textarea').value = ''; // clear field
            } else {
                alert(data.error || 'Error posting reply');
            }
        });
    }
});

function getCSRFToken() {
    const name = 'csrftoken';
    const cookies = document.cookie.split(';');
    for (let cookie of cookies) {
        cookie = cookie.trim();
        if (cookie.startsWith(name + '=')) {
            return decodeURIComponent(cookie.substring(name.length + 1));
        }
    }
    return '';
}

</script>

<script type="text/javascript">
let currentCampaignId = null;

function showSharePopup(campaignId) {
    currentCampaignId = campaignId;
    const popup = document.getElementById('sharePopup');
    popup.style.display = 'block';
    
    const campaignUrl = `${window.location.origin}/campaign/${campaignId}/`;
    document.getElementById('campaignUrl').value = campaignUrl;
    document.getElementById('sharePopupTitle').textContent = "Join thousands making a difference!";
    document.getElementById('sharePopupSubtitle').textContent = "Sharing takes just seconds but creates lasting impact.";
}

function hideSharePopup() {
    document.getElementById('sharePopup').style.display = 'none';
}

function shareOnFacebook() {
    const url = encodeURIComponent(document.getElementById('campaignUrl').value);
    const text = encodeURIComponent(
        ` Join me in supporting this life-changing cause!\n\nOver 10,000 people have already contributed - let's make an even bigger impact together.\n\n${document.getElementById('campaignUrl').value}\n\n#ChangeMakers`
    );
    window.open(`https://www.facebook.com/sharer/sharer.php?quote=${text}&u=${url}`, '_blank');
}

function shareOnTwitter() {
    const url = document.getElementById('campaignUrl').value;
    const baseText = " Just discovered this incredible cause that's changing lives! Join me in making a difference";
    
    const maxTextLength = 280 - 23 - 1 - 24;
    let tweetText = baseText;
    
    if (tweetText.length > maxTextLength) {
        tweetText = tweetText.substring(0, maxTextLength - 3) + "...";
    }
    
    const fullTweet = `${tweetText} ${url} #BeTheChange #MakeADifference`;
    window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(fullTweet)}`, '_blank');
}

function shareOnLinkedIn() {
    const url = encodeURIComponent(document.getElementById('campaignUrl').value);
    const text = encodeURIComponent(
        `Professional network alert: This is how we drive real change. Proud to support this cause that's transforming our community.\n\n${document.getElementById('campaignUrl').value}\n\nYour support matters!`
    );
    window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${url}&summary=${text}`, '_blank');
}

function shareOnWhatsApp() {
    const url = document.getElementById('campaignUrl').value;
    const text = `Hey! I just found this amazing cause that needs our support:\n\n${url}\n\nIt only takes 2 minutes to contribute, and together we can create something extraordinary!`;
    window.open(`https://wa.me/?text=${encodeURIComponent(text)}`, '_blank');
}

function shareOnReddit() {
    const url = encodeURIComponent(document.getElementById('campaignUrl').value);
    const title = encodeURIComponent(
        `This cause is changing lives  and your upvote could help it reach more people!\n\n${document.getElementById('campaignUrl').value}`
    );
    window.open(`https://www.reddit.com/submit?url=${url}&title=${title}`, '_blank');
}

function shareOnTelegram() {
    const url = document.getElementById('campaignUrl').value;
    const text = `URGENT: This cause needs our attention! \n\nJoin me in supporting this worthy cause before time runs out:\n\n${url}`;
    window.open(`https://t.me/share/url?url=${encodeURIComponent(url)}&text=${encodeURIComponent(text)}`, '_blank');
}

function shareOnPinterest() {
    const url = encodeURIComponent(document.getElementById('campaignUrl').value);
    const description = encodeURIComponent(
        `Pin this to make a difference! This cause is creating real change:\n\n${document.getElementById('campaignUrl').value}\n\nHelp spread the word and be part of something bigger.`
    );
    window.open(`https://pinterest.com/pin/create/button/?url=${url}&description=${description}`, '_blank');
}

function shareViaEmail() {
    const url = document.getElementById('campaignUrl').value;
    const subject = "Let's make a difference together - your support matters!";
    const body = `Hi there,\n\nI just discovered this incredible cause that's close to my heart:\n\n${url}\n\nWith your help, we can make an even bigger impact. Even just sharing this message helps!\n\nThank you for being part of this important movement!\n\nBest regards,`;
    window.location.href = `mailto:?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
}

function copyCampaignUrl() {
    const urlInput = document.getElementById('campaignUrl');
    urlInput.select();
    document.execCommand('copy');
    
    const button = event.target.closest('button');
    const originalText = button.innerHTML;
    button.innerHTML = '<i class="fas fa-check"></i> Link copied - you rock!';
    button.style.background = '#2ecc71';
    setTimeout(() => {
        button.innerHTML = originalText;
        button.style.background = '#4a6bff';
    }, 2000);
    
    showToast("Clickable link copied! Paste it anywhere to share!");
}

function showToast(message) {
    const toast = document.createElement('div');
    toast.className = 'share-toast';
    toast.innerHTML = `${message} <span style="font-weight:bold">${document.getElementById('campaignUrl').value}</span>`;
    document.body.appendChild(toast);
    setTimeout(() => toast.remove(), 3500);
}

window.onclick = function(event) {
    if (event.target == document.getElementById('sharePopup')) {
        hideSharePopup();
    }
}
</script>


<script>
    function toggleObjectives(element) {
        // Find the sibling objectives-activities div
        var objectivesDiv = element.nextElementSibling;
        
        // Toggle the visibility of the objectives-activities div
        if (objectivesDiv.style.display === "none") {
            objectivesDiv.style.display = "block";
        } else {
            objectivesDiv.style.display = "none";
        }
    }
</script>






<script>
    function goBack() {
        window.history.back(); // Navigates to the previous page
    }
</script>


   <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>


  <script>
        let currentSlide = 0;
        const slides = document.querySelector('.slides');
        const slideCount = document.querySelectorAll('.slide').length;
        const indicators = document.querySelectorAll('.indicator');
        
        function pauseCarousel() {
            clearInterval(carouselInterval);
        }
        
        function resumeCarousel() {
            carouselInterval = setInterval(nextSlide, 4000);
        }
        
        function nextSlide() {
            currentSlide = (currentSlide + 1) % slideCount;
            updateCarousel();
        }
        
        function moveSlide(direction) {
            currentSlide = (currentSlide + direction + slideCount) % slideCount;
            updateCarousel();
        }
        
        function updateCarousel() {
            slides.style.transform = `translateX(-${currentSlide * 100}%)`;
            
            // Update indicators
            indicators.forEach((indicator, index) => {
                indicator.classList.toggle('active', index === currentSlide);
            });
        }
        
        let carouselInterval = setInterval(nextSlide, 4000);
        
        // Click on indicator to navigate to specific slide
        indicators.forEach((indicator, index) => {
            indicator.addEventListener('click', () => {
                currentSlide = index;
                updateCarousel();
            });
        });
    </script>

<script type="text/javascript">


 
        // Function to handle file upload and playback
        function uploadAudio() {
            var input = document.createElement('input');
            input.type = 'file';
            input.accept = 'audio/*, video/*'; // Limit file selection to audio files

            // Listen for file selection
            input.onchange = function(e) {
                var file = e.target.files[0];
                var audio = document.getElementById('bgAudio');

                // Pause the current audio playback
                audio.pause();

                // Store the selected audio file and its playback position in local storage
                localStorage.setItem('bgAudioFile', URL.createObjectURL(file));
                localStorage.setItem('bgAudioPosition', audio.currentTime);

                // Set the audio source to the selected file
                audio.src = localStorage.getItem('bgAudioFile');

                // Resume audio playback
                audio.play();
            };

            // Trigger the file input
            input.click();
        }

        // Function to set background audio on page load
        window.onload = function() {
            var audio = document.getElementById('bgAudio');
            var bgAudioFile = localStorage.getItem('bgAudioFile');
            var audioPosition = parseFloat(localStorage.getItem('bgAudioPosition'));

            // Check if there's a stored audio file
            if (bgAudioFile) {
                // Set the audio source to the stored file
                audio.src = bgAudioFile;

                // Set the playback position if available
                if (!isNaN(audioPosition)) {
                    audio.currentTime = audioPosition;
                }

                // Autoplay the audio
                audio.play();
            }
        };

        // Store current playback position before page refresh
        window.addEventListener('beforeunload', function() {
            var audio = document.getElementById('bgAudio');
            localStorage.setItem('bgAudioPosition', audio.currentTime);
        });


        document.addEventListener('DOMContentLoaded', function() {
            const mysteryTexts = [
                "Unveil the secrets within...",
                "What lies beyond the horizon?",
                "Dive into the unknown...",
                "Mysteries await the curious..."
            ];

            const mysteryElement = document.querySelector('.mystery-text');

            function changeMysteryText() {
                const randomIndex = Math.floor(Math.random() * mysteryTexts.length);
                mysteryElement.textContent = mysteryTexts[randomIndex];
            }

            setInterval(changeMysteryText, 7000);
            changeMysteryText(); // Initial call to set the first mystery text
        });


    document.querySelector('.campaign-category').addEventListener('click', function() {
        const objectivesActivities = document.querySelector('.objectives-activities');
        if (objectivesActivities.style.display === 'none' || objectivesActivities.style.display === '') {
            objectivesActivities.style.display = 'block';
        } else {
            objectivesActivities.style.display = 'none';
        }
    });




        const slides = document.querySelector('.slides');
        const slideCount = document.querySelectorAll('.slide').length;
        const slideWidth = document.querySelector('.slide').clientWidth;
        let currentIndex = 0;

        setInterval(() => {
            currentIndex = (currentIndex + 1) % slideCount;
            slides.style.transform = `translateX(${-currentIndex * slideWidth}px)`;
        }, 4000);





  $(document).ready(function() {
            // Example: Preventing navigation link from refreshing the page
            $('a.nav-link').click(function(event) {
                event.preventDefault(); // Prevent default action (e.g., page refresh)
                
                // Get the href attribute of the clicked link
                var href = $(this).attr('href');
                
                // Perform your custom logic here
                console.log('Navigation link clicked! Performing custom action...');
                
                // Optionally, load new content or update UI dynamically here
                // Example: Load content using AJAX or manipulate DOM elements
                
                // For demonstration, you can simulate navigation
                // window.location.href = href;
            });
        });

</script>

<script type="text/javascript">
function toggleLove(campaignId) {
    var loveIcon = document.getElementById('love-icon-' + campaignId);
    var loveCount = document.getElementById('love-count-' + campaignId);
    var loveCountMobile = document.getElementById('love-count-mobile-' + campaignId);
    var loveText = "";

    // Play sound when love is toggled
    var audio = new Audio('{% static "main/files/sound.mp3" %}');
    audio.play();

    // Send AJAX request to add or remove love
    var xhr = new XMLHttpRequest();
    xhr.open('POST', '{% url "toggle_love" 0 %}'.replace('0', campaignId), true);
    xhr.setRequestHeader('X-CSRFToken', '{{ csrf_token }}');
    xhr.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');

    xhr.onload = function () {
        if (xhr.status === 200) {
            // Update love count only if there's a response from the server
            var response = JSON.parse(xhr.responseText);
            var countText = response.love_count + " " + loveText;
            loveCount.textContent = countText;
            if (loveCountMobile) {
                loveCountMobile.textContent = countText;
            }

            // Toggle the loved class based on response
            if (response.love_count > 0) {
                loveIcon.classList.add('loved');
                createHearts(loveIcon); // Create heart explosion effect
            } else {
                loveIcon.classList.remove('loved');
            }
        }
    };
    xhr.send();
}

function createHearts(element) {
    // Get position of the clicked element
    const rect = element.getBoundingClientRect();
    const x = rect.left + rect.width / 2;
    const y = rect.top + rect.height / 2;
    
    // Create 15 hearts (you can adjust this number)
    for (let i = 0; i < 15; i++) {
        const heart = document.createElement('div');
        heart.classList.add('heart');
        
        // Random size between 10px and 25px
        const size = Math.random() * 15 + 10;
        heart.style.width = `${size}px`;
        heart.style.height = `${size}px`;
        
        // Random initial position near the click
        heart.style.left = `${x + (Math.random() - 0.5) * 20}px`;
        heart.style.top = `${y + (Math.random() - 0.5) * 20}px`;
        
        // Random animation properties
        const duration = Math.random() * 3 + 2;
        const randomX = (Math.random() - 0.5) * 2;
        const randomY = Math.random() * 1.5 + 0.5;
        heart.style.setProperty('--random-x', randomX);
        heart.style.setProperty('--random-y', randomY);
        heart.style.animation = `float ${duration}s ease-in forwards`;
        
        // Random rotation
        heart.style.transform = `rotate(${Math.random() * 360}deg)`;
        
        document.body.appendChild(heart);
        
        // Remove heart after animation completes
        setTimeout(() => {
            heart.remove();
        }, duration * 1000);
    }
}
</script>
<script type="text/javascript">
document.addEventListener('DOMContentLoaded', function() {
    const header = document.querySelector('.rallynex-header-container');
    const headerSpacer = document.getElementById('header-spacer');
    let lastScroll = 0;
    
    // Show spacer only on mobile
    if (window.innerWidth <= 768) {
        headerSpacer.style.display = 'block';
    }
    
    window.addEventListener('scroll', function() {
        const currentScroll = window.pageYOffset;
        
        if (currentScroll <= 50) {
            // At top - semi-transparent Twitter blue
            header.style.transform = 'translateY(0)';
            header.style.backgroundColor = 'rgba(29, 155, 240, 0.95)';
            header.style.backdropFilter = 'blur(10px)';
            header.style.boxShadow = '0 2px 15px rgba(29, 155, 240, 0.2)';
            header.style.borderBottom = '1px solid rgba(255, 255, 255, 0.1)';
        } 
        else if (currentScroll > lastScroll && currentScroll > 100) {
            // Scrolling down - hide header
            header.style.transform = 'translateY(-100%)';
        } 
        else {
            // Scrolling up - show with solid but nice Twitter blue
            header.style.transform = 'translateY(0)';
            header.style.backgroundColor = 'rgba(29, 155, 240, 0.98)';
            header.style.backdropFilter = 'blur(15px)';
            header.style.boxShadow = '0 4px 20px rgba(29, 155, 240, 0.25)';
            header.style.borderBottom = '1px solid rgba(255, 255, 255, 0.15)';
        }
        
        lastScroll = currentScroll;
    });
    
    // Mobile search icon hover effect
    const searchIcon = document.querySelector('.rallynex-mobile-search-icon');
    if (searchIcon) {
        searchIcon.addEventListener('mouseenter', function() {
            this.style.backgroundColor = 'rgba(255, 255, 255, 0.15)';
        });
        
        searchIcon.addEventListener('mouseleave', function() {
            this.style.backgroundColor = 'transparent';
        });
    }
    
    // Mobile search functionality
    const mobileSearchIcon = document.querySelector('.rallynex-mobile-search-icon');
    const mobileSearchPopup = document.querySelector('.rallynex-mobile-search-popup');
    const closeSearch = document.querySelector('.rallynex-close-mobile-search');
    const clearSearch = document.querySelector('.rallynex-clear-search');
    const searchInput = document.getElementById('mobile-search-input');
    
    if (mobileSearchIcon && mobileSearchPopup && closeSearch) {
        mobileSearchIcon.addEventListener('click', function() {
            mobileSearchPopup.classList.add('active');
            setTimeout(() => searchInput.focus(), 100);
        });
        
        closeSearch.addEventListener('click', function() {
            mobileSearchPopup.classList.remove('active');
            searchInput.value = '';
            clearSearch.classList.remove('visible');
        });
        
        searchInput.addEventListener('input', function() {
            if (this.value.length > 0) {
                clearSearch.classList.add('visible');
            } else {
                clearSearch.classList.remove('visible');
            }
        });
        
        clearSearch.addEventListener('click', function() {
            searchInput.value = '';
            this.classList.remove('visible');
            searchInput.focus();
        });
    }
});
</script>

<script>
/**
 * Sound Tribe Manager - Complete Version
 * Works with your existing SoundTribe model and Django views
 * NO LOGIN REQUIRED - Anyone can join!
 */

class SoundTribeManager {
    constructor() {
        // State management
        this.currentCampaignId = null;
        this.isLoading = false;
        this.hasJoined = false;
        this.memberCount = 0;
        this.retryCount = 0;
        this.maxRetries = 2;
        
        // Bind methods
        this.openPopup = this.openPopup.bind(this);
        this.closePopup = this.closePopup.bind(this);
        this.joinSoundTribe = this.joinSoundTribe.bind(this);
        this.leaveSoundTribe = this.leaveSoundTribe.bind(this);
        this.viewActivities = this.viewActivities.bind(this);
        
        // Initialize when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => this.initialize());
        } else {
            this.initialize();
        }
    }

    /**
     * Initialize event listeners
     */
    initialize() {
        // Close on escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && this.isPopupOpen()) {
                this.closePopup();
            }
        });

        // Close on overlay click
        const popup = document.getElementById('soundCommunityPopup');
        if (popup) {
            popup.addEventListener('click', (e) => {
                if (e.target.classList.contains('popup-overlay') || 
                    e.target.classList.contains('sound-tribe-popup')) {
                    this.closePopup();
                }
            });
        }

        // Add animation styles
        this.addAnimationStyles();
    }

    /**
     * Add necessary animation styles
     */
    addAnimationStyles() {
        if (document.getElementById('tribe-animation-styles')) return;
        
        const style = document.createElement('style');
        style.id = 'tribe-animation-styles';
        style.textContent = `
            @keyframes fadeIn {
                from { opacity: 0; }
                to { opacity: 1; }
            }

            @keyframes slideDown {
                from {
                    opacity: 0;
                    transform: translateY(-15px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            @keyframes slideUp {
                from {
                    opacity: 0;
                    transform: translateY(20px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            @keyframes pulse {
                0% { transform: scale(1); }
                50% { transform: scale(1.05); }
                100% { transform: scale(1); }
            }

            @keyframes spin {
                to { transform: rotate(360deg); }
            }

            .pulse-animation {
                animation: pulse 0.3s ease;
            }

            .fade-in {
                animation: fadeIn 0.3s ease;
            }

            .slide-down {
                animation: slideDown 0.3s ease;
            }
        `;
        document.head.appendChild(style);
    }

    /**
     * Check if popup is open
     */
    isPopupOpen() {
        const popup = document.getElementById('soundCommunityPopup');
        return popup && popup.classList.contains('active');
    }

    /**
     * Show/hide loader
     */
    showLoader(show) {
        const loader = document.getElementById('popupLoader');
        if (loader) {
            loader.style.display = show ? 'flex' : 'none';
        }
    }

    /**
     * Open popup for a campaign
     */
    async openPopup(campaignId) {
        if (!campaignId) {
            console.error('No campaign ID provided');
            this.showNotification('Invalid campaign', 'error');
            return;
        }

        this.currentCampaignId = campaignId;
        const popup = document.getElementById('soundCommunityPopup');
        
        if (!popup) {
            console.error('Popup element not found');
            return;
        }

        // Show popup with loader
        popup.classList.add('active');
        this.showLoader(true);
        document.body.style.overflow = 'hidden'; // Prevent scrolling
        
        try {
            await this.loadTribeData();
            this.retryCount = 0; // Reset on success
        } catch (error) {
            console.error('Error loading tribe data:', error);
            this.retryCount++;
            
            if (this.retryCount <= this.maxRetries) {
                this.showNotification(`Retrying... (${this.retryCount}/${this.maxRetries})`, 'info');
                setTimeout(() => this.openPopup(campaignId), 1500);
            } else {
                this.showError('Failed to load tribe data. Please refresh the page.');
            }
        } finally {
            this.showLoader(false);
        }
    }

    /**
     * Close popup
     */
    closePopup() {
        const popup = document.getElementById('soundCommunityPopup');
        if (popup) {
            popup.classList.remove('active');
            document.body.style.overflow = ''; // Restore scrolling
            this.currentCampaignId = null;
            this.retryCount = 0;
        }
    }

    /**
     * Load tribe data from server
     */
    async loadTribeData() {
        if (!this.currentCampaignId) {
            throw new Error('No campaign ID');
        }

        try {
            const response = await fetch(`/campaign/${this.currentCampaignId}/sound-tribe-data/`, {
                method: 'GET',
                headers: {
                    'X-Requested-With': 'XMLHttpRequest',
                    'Cache-Control': 'no-cache'
                },
                credentials: 'same-origin'
            });

            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }

            const data = await response.json();

            if (data.success) {
                this.hasJoined = data.has_joined || false;
                this.memberCount = data.member_count || 0;
                this.updateUI(data);
                this.updateJoinButton(data.has_joined);
                this.toggleActivitiesLink(data.has_joined);
            } else {
                throw new Error(data.error || 'Failed to load data');
            }
        } catch (error) {
            console.error('Error loading tribe data:', error);
            throw error;
        }
    }

    /**
     * Update UI with tribe data
     */
    updateUI(data) {
        this.updateMemberCount(data.member_count);
        this.updateBadgeCount(data.member_count);
        this.updateRecentMembers(data.recent_members);
        
        // Update active count (random for now - you can modify this)
        const activeCount = Math.floor(Math.random() * 30) + 10;
        this.updateActiveCount(activeCount);
    }

    /**
     * Update member count display
     */
    updateMemberCount(count) {
        const element = document.getElementById('tribeMemberCount');
        if (element) {
            const currentCount = parseInt(element.textContent) || 0;
            element.textContent = count;
            if (currentCount !== count) {
                element.classList.add('pulse-animation');
                setTimeout(() => element.classList.remove('pulse-animation'), 300);
            }
        }
    }

    /**
     * Update active count
     */
    updateActiveCount(count) {
        const element = document.getElementById('tribeActiveCount');
        if (element) {
            element.textContent = count;
        }
    }

    /**
     * Update all badge counts across the site
     */
    updateBadgeCount(count) {
        const badges = document.querySelectorAll('.sound-badge, .tribe-count, .audio-listener-count');
        badges.forEach(badge => {
            if (badge) {
                badge.textContent = count;
                badge.classList.add('pulse-animation');
                setTimeout(() => badge.classList.remove('pulse-animation'), 300);
            }
        });
    }

    /**
     * Update join/leave buttons based on user state
     */
    updateJoinButton(hasJoined) {
        const joinBtn = document.getElementById('joinTribeBtn');
        const leaveBtn = document.getElementById('leaveTribeBtn');
        
        if (!joinBtn || !leaveBtn) return;

        if (hasJoined) {
            joinBtn.style.display = 'none';
            leaveBtn.style.display = 'flex';
            // Reset leave button text in case it was stuck
            leaveBtn.innerHTML = '<i class="fas fa-sign-out-alt"></i><span>Leave Tribe</span>';
            leaveBtn.disabled = false;
            leaveBtn.classList.add('fade-in');
            this.hasJoined = true;
        } else {
            joinBtn.style.display = 'flex';
            leaveBtn.style.display = 'none';
            // Reset join button text in case it was stuck
            joinBtn.innerHTML = '<i class="fas fa-headphones-alt"></i><span>Join Sound Tribe</span>';
            joinBtn.disabled = false;
            joinBtn.classList.add('fade-in');
            this.hasJoined = false;
        }
    }

    /**
     * Toggle activities link visibility
     */
    toggleActivitiesLink(hasJoined) {
        const container = document.getElementById('activitiesContainer');
        if (container) {
            if (hasJoined) {
                container.style.display = 'block';
                container.classList.add('slide-down');
            } else {
                container.style.display = 'none';
            }
        }
    }

    /**
     * Update recent members display
     */
    updateRecentMembers(members) {
        const container = document.getElementById('recentMembersContainer');
        if (!container) return;
        
        if (!members || members.length === 0) {
            container.innerHTML = `
                <div class="empty-state">
                    <i class="fas fa-music"></i>
                    <p>Be the first to join the Sound Tribe!</p>
                </div>
            `;
            return;
        }

        const membersHTML = members.map(member => {
            const username = this.escapeHtml(member.username || 'Anonymous Listener');
            const profilePic = member.profile_pic || '/static/images/default-avatar.png';
            const profileUrl = member.profile_url || '#';
            
            return `
                <a href="${profileUrl}" 
                   class="member-badge" 
                   title="${username}"
                   target="_blank"
                   rel="noopener noreferrer">
                    <img src="${profilePic}" 
                         alt="${username}" 
                         class="member-avatar"
                         loading="lazy"
                         onerror="this.onerror=null; this.src='/static/images/default-avatar.png'">
                    <span class="member-username">${this.truncateUsername(username)}</span>
                </a>
            `;
        }).join('');

        container.innerHTML = membersHTML;
    }

    /**
     * Truncate long usernames
     */
    truncateUsername(username, maxLength = 12) {
        if (username.length > maxLength) {
            return username.substring(0, maxLength) + '...';
        }
        return username;
    }

    /**
     * Join the sound tribe - NO LOGIN REQUIRED!
     */
    async joinSoundTribe() {
        // Validation
        if (this.isLoading) {
            this.showNotification('Please wait...', 'info');
            return;
        }

        if (!this.currentCampaignId) {
            this.showNotification('Campaign not found', 'error');
            return;
        }

        // Prevent joining if already joined
        if (this.hasJoined) {
            this.showNotification('You have already joined the tribe!', 'info');
            return;
        }

        this.isLoading = true;
        const button = document.getElementById('joinTribeBtn');
        
        if (!button) return;

        const originalContent = button.innerHTML;
        
        try {
            // Get CSRF token
            const csrftoken = this.getCSRFToken();
            
            // Update button state
            button.innerHTML = '<i class="fas fa-spinner fa-spin"></i><span>Joining...</span>';
            button.disabled = true;

            const response = await fetch(`/campaign/${this.currentCampaignId}/join-sound-tribe/`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-CSRFToken': csrftoken,
                    'X-Requested-With': 'XMLHttpRequest'
                },
                credentials: 'same-origin'
            });

            const data = await response.json();

            if (data.success) {
                this.hasJoined = true;
                this.memberCount = data.member_count;
                
                // Update UI
                this.updateMemberCount(data.member_count);
                this.updateBadgeCount(data.member_count);
                this.updateRecentMembers(data.recent_members);
                this.updateJoinButton(true);
                this.toggleActivitiesLink(true);
                
                this.showNotification(data.message || 'Welcome to the Sound Tribe! ', 'success');
                
                // Play subtle sound effect (optional)
                this.playJoinSound();
            } else {
                throw new Error(data.error || 'Failed to join');
            }
        } catch (error) {
            console.error('Error joining tribe:', error);
            this.showNotification(error.message || 'Failed to join. Please try again.', 'error');
            // Reset button properly on error
            button.innerHTML = '<i class="fas fa-headphones-alt"></i><span>Join Sound Tribe</span>';
            button.disabled = false;
        } finally {
            this.isLoading = false;
        }
    }

    /**
     * Leave the sound tribe - NO LOGIN REQUIRED!
     */
    async leaveSoundTribe() {
        // Validation
        if (this.isLoading) {
            this.showNotification('Please wait...', 'info');
            return;
        }

        if (!this.currentCampaignId) {
            this.showNotification('Campaign not found', 'error');
            return;
        }

        // Prevent leaving if not joined
        if (!this.hasJoined) {
            this.showNotification('You are not a member of this tribe', 'info');
            return;
        }

        // Show confirmation
        const confirmed = await this.showConfirmation(
            'Leave Sound Tribe?',
            'Are you sure you want to leave? You can always join again later.'
        );

        if (!confirmed) return;

        this.isLoading = true;
        const button = document.getElementById('leaveTribeBtn');
        
        if (!button) return;

        const originalContent = button.innerHTML;
        
        try {
            // Get CSRF token
            const csrftoken = this.getCSRFToken();
            
            // Update button state
            button.innerHTML = '<i class="fas fa-spinner fa-spin"></i><span>Leaving...</span>';
            button.disabled = true;

            const response = await fetch(`/campaign/${this.currentCampaignId}/leave-sound-tribe/`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-CSRFToken': csrftoken,
                    'X-Requested-With': 'XMLHttpRequest'
                },
                credentials: 'same-origin'
            });

            const data = await response.json();

            if (data.success) {
                this.hasJoined = false;
                this.memberCount = data.member_count;
                
                // Update UI
                this.updateMemberCount(data.member_count);
                this.updateBadgeCount(data.member_count);
                this.updateRecentMembers(data.recent_members);
                this.updateJoinButton(false);
                this.toggleActivitiesLink(false);
                
                this.showNotification('You\'ve left the tribe. Hope to see you again! ', 'info');
            } else {
                throw new Error(data.error || 'Failed to leave');
            }
        } catch (error) {
            console.error('Error leaving tribe:', error);
            this.showNotification(error.message || 'Failed to leave. Please try again.', 'error');
            // Reset button properly on error
            button.innerHTML = '<i class="fas fa-sign-out-alt"></i><span>Leave Tribe</span>';
            button.disabled = false;
        } finally {
            this.isLoading = false;
        }
    }

    /**
     * View tribe activities
     */
    viewActivities() {
        if (!this.currentCampaignId) {
            this.showNotification('Campaign not found', 'error');
            return;
        }

        const campaignId = this.currentCampaignId;
        this.closePopup();
        window.location.href = `/campaign/${campaignId}/activity_list/`;
    }

    /**
     * Show confirmation dialog
     */
    showConfirmation(title, message) {
        return Promise.resolve(confirm(`${title}\n\n${message}`));
    }

    /**
     * Get CSRF token from cookie
     */
    getCSRFToken() {
        const cookies = document.cookie.split(';');
        for (let cookie of cookies) {
            const [name, value] = cookie.trim().split('=');
            if (name === 'csrftoken' || name === 'csrf_token') {
                return value;
            }
        }
        
        // Try to get from meta tag
        const metaToken = document.querySelector('meta[name="csrf-token"]');
        if (metaToken) {
            return metaToken.getAttribute('content');
        }
        
        return '';
    }

    /**
     * Show notification toast
     */
    showNotification(message, type = 'info') {
        // Remove existing notification
        const existing = document.querySelector('.tribe-notification');
        if (existing) existing.remove();

        const notification = document.createElement('div');
        notification.className = 'tribe-notification';
        
        const icons = {
            success: 'check-circle',
            error: 'exclamation-circle',
            info: 'info-circle'
        };
        
        notification.innerHTML = `
            <i class="fas fa-${icons[type] || 'info-circle'}"></i>
            <span>${message}</span>
        `;
        
        // Style
        notification.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            background: ${type === 'success' ? '#34c759' : type === 'error' ? '#ff3b30' : '#1DA1F2'};
            color: white;
            padding: 12px 20px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 10000;
            animation: slideDown 0.3s ease;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 350px;
        `;
        
        document.body.appendChild(notification);
        
        setTimeout(() => {
            if (notification.parentNode) {
                notification.style.animation = 'fadeIn 0.3s reverse';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.remove();
                    }
                }, 300);
            }
        }, 3000);
    }

    /**
     * Show error in popup
     */
    showError(message) {
        const popupBody = document.querySelector('.popup-body');
        if (popupBody) {
            popupBody.innerHTML = `
                <div class="error-state" style="text-align: center; padding: 30px 20px;">
                    <i class="fas fa-exclamation-circle" style="font-size: 48px; color: #ff3b30; margin-bottom: 15px;"></i>
                    <h3 style="color: #1a1a1a; margin-bottom: 10px;">Something went wrong</h3>
                    <p style="color: #666; margin-bottom: 20px;">${message}</p>
                    <button onclick="location.reload()" 
                            style="background: #1DA1F2; color: white; border: none; padding: 10px 25px; border-radius: 8px; font-weight: 600; cursor: pointer; margin-right: 10px;">
                        <i class="fas fa-redo-alt"></i> Retry
                    </button>
                    <button onclick="soundManager.closePopup()" 
                            style="background: #f0f0f0; color: #666; border: none; padding: 10px 25px; border-radius: 8px; font-weight: 600; cursor: pointer;">
                        Close
                    </button>
                </div>
            `;
        }
    }

    /**
     * Play join sound (optional)
     */
    playJoinSound() {
        try {
            const audio = new Audio('/static/sounds/join.mp3');
            audio.volume = 0.3;
            audio.play().catch(() => {});
        } catch (e) {}
    }

    /**
     * Escape HTML
     */
    escapeHtml(text) {
        if (!text) return '';
        const div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML;
    }
}

// Initialize the sound manager
window.soundManager = new SoundTribeManager();
</script>





<script>
document.addEventListener('DOMContentLoaded', function() {
    // Initialize all slideshows on the page
    document.querySelectorAll('.slideshow-container').forEach(initSlideshow);
    
    function initSlideshow(container) {
        const track = container.querySelector('.slideshow-track');
        const slides = container.querySelectorAll('.slide');
        const dots = container.querySelectorAll('.dot');
        const prevBtn = container.querySelector('.slideshow-prev');
        const nextBtn = container.querySelector('.slideshow-next');
        
        let currentSlide = 0;
        const totalSlides = slides.length;
        let slideInterval = null;
        let isPaused = false;
        
        if (totalSlides <= 1) {
            if (prevBtn) prevBtn.style.display = 'none';
            if (nextBtn) nextBtn.style.display = 'none';
            if (dots.length > 0) container.querySelector('.slideshow-dots').style.display = 'none';
            return;
        }
        
        // Function to update slideshow
        function updateSlideshow() {
            track.style.transform = `translateX(-${currentSlide * 100}%)`;
            
            dots.forEach((dot, index) => {
                dot.classList.toggle('active', index === currentSlide);
            });
        }
        
        // Next slide
        function nextSlide() {
            currentSlide = (currentSlide + 1) % totalSlides;
            updateSlideshow();
        }
        
        // Previous slide
        function prevSlide() {
            currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;
            updateSlideshow();
        }
        
        // Start auto-advance
        function startAutoAdvance() {
            if (!slideInterval) {
                slideInterval = setInterval(nextSlide, 5000);
            }
        }
        
        // Stop auto-advance
        function stopAutoAdvance() {
            if (slideInterval) {
                clearInterval(slideInterval);
                slideInterval = null;
            }
        }
        
        // Start initially
        startAutoAdvance();
        
        // Pause on hover
        container.addEventListener('mouseenter', () => {
            if (!isPaused) {
                stopAutoAdvance();
                isPaused = true;
            }
        });
        
        container.addEventListener('mouseleave', () => {
            if (isPaused) {
                startAutoAdvance();
                isPaused = false;
            }
        });
        
        // Button events
        if (prevBtn) {
            prevBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                stopAutoAdvance();
                prevSlide();
                startAutoAdvance();
            });
        }
        
        if (nextBtn) {
            nextBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                stopAutoAdvance();
                nextSlide();
                startAutoAdvance();
            });
        }
        
        // Dot click events
        dots.forEach(dot => {
            dot.addEventListener('click', (e) => {
                e.stopPropagation();
                stopAutoAdvance();
                currentSlide = parseInt(dot.getAttribute('data-index'));
                updateSlideshow();
                startAutoAdvance();
            });
        });
        
        // Touch swipe
        let touchStartX = 0;
        
        container.addEventListener('touchstart', (e) => {
            touchStartX = e.touches[0].clientX;
            stopAutoAdvance();
        });
        
        container.addEventListener('touchend', (e) => {
            const touchEndX = e.changedTouches[0].clientX;
            const diff = touchStartX - touchEndX;
            const threshold = 50;
            
            if (Math.abs(diff) > threshold) {
                if (diff > 0) {
                    nextSlide();
                } else {
                    prevSlide();
                }
            }
            startAutoAdvance();
        });
        
        // Pause when page is hidden
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                stopAutoAdvance();
            } else {
                startAutoAdvance();
            }
        });
    }
});
</script>


<script>
document.addEventListener('DOMContentLoaded', function() {
    // Force images to reflow on mobile after load
    const images = document.querySelectorAll('.campaign-image-section img');
    
    images.forEach(img => {
        img.addEventListener('load', function() {
            // Trigger reflow on mobile
            if (window.innerWidth <= 768) {
                this.style.display = 'none';
                void this.offsetHeight; // Trigger reflow
                this.style.display = 'block';
            }
        });
    });
    
    // Handle window resize
    let resizeTimer;
    window.addEventListener('resize', function() {
        clearTimeout(resizeTimer);
        resizeTimer = setTimeout(function() {
            if (window.innerWidth <= 768) {
                const sections = document.querySelectorAll('.campaign-image-section');
                sections.forEach(section => {
                    section.style.height = 'auto';
                    void section.offsetHeight;
                });
            }
        }, 250);
    });
});
</script>



<script>
document.addEventListener("DOMContentLoaded", () => {

    // All audio elements
    const audios = document.querySelectorAll(".campaign-audio");

    // Campaign image sections (poster)
    const campaignSections = document.querySelectorAll(".campaign-image-section");

    // Map campaignId  audio element
    const audioMap = {};
    const audioTimeMap = {}; // Track last known time for each audio
    audios.forEach(a => {
        const id = a.dataset.campaignId;
        audioMap[id] = a;
        audioTimeMap[id] = 0; // start at 0
        a.pause(); // ensure paused initially
    });

    const observer = new IntersectionObserver(
        entries => {
            entries.forEach(entry => {
                const section = entry.target;
                const campaignId = section.dataset.campaignId;
                const audio = audioMap[campaignId];

                if (!audio) return;

                if (entry.isIntersecting) {

                    // Pause all other audios and save their time
                    Object.values(audioMap).forEach(a => {
                        if (a !== audio) {
                            audioTimeMap[a.dataset.campaignId] = a.currentTime;
                            a.pause();
                        }
                    });

                    // Resume this audio from last saved time
                    audio.currentTime = audioTimeMap[campaignId] || 0;
                    audio.muted = false;
                    audio.play().catch(() => {});

                } else {
                    // Save current time and pause
                    audioTimeMap[campaignId] = audio.currentTime;
                    audio.pause();
                }
            });
        },
        { threshold: 0.60 } // 60% of poster visible
    );

    campaignSections.forEach(section => observer.observe(section));
});
</script>

<script>
// Premium Image Enhancer - Best Balance of Quality & Performance
document.addEventListener('DOMContentLoaded', function() {
    const ImageMagic = {
        init: function() {
            this.enhanceAllImages();
            this.addLoadingEffects();
            this.addInteractiveEffects();
        },
        
        enhanceAllImages: function() {
            document.querySelectorAll('.main-campaign-image').forEach(img => {
                this.markAsLoading(img);
                
                if (img.complete) {
                    this.applyMagic(img);
                } else {
                    img.addEventListener('load', () => this.applyMagic(img));
                    // Fallback for slow loading
                    setTimeout(() => {
                        if (!img.classList.contains('magic-enhanced')) {
                            this.applyMagic(img);
                        }
                    }, 2000);
                }
            });
        },
        
        markAsLoading: function(img) {
            img.classList.add('magic-loading');
        },
        
        applyMagic: function(img) {
            // Remove loading state
            img.classList.remove('magic-loading');
            img.classList.add('magic-enhanced');
            
            // Apply premium visual effects
            this.applyVisualEnhancements(img);
            
            // Add smooth entrance animation
            setTimeout(() => {
                img.style.opacity = '1';
                img.style.transform = 'scale(1)';
            }, 50);
        },
        
        applyVisualEnhancements: function(img) {
            // Smart enhancement based on image
            const isDark = this.isDarkImage(img);
            
            if (isDark) {
                // Dark images get brightness boost
                img.style.filter = 'brightness(1.08) contrast(1.1) saturate(1.05)';
            } else {
                // Bright images get contrast boost
                img.style.filter = 'brightness(1.02) contrast(1.08) saturate(1.1)';
            }
            
         
            
            // Smooth transitions
            img.style.transition = 'all 0.4s cubic-bezier(0.23, 1, 0.32, 1)';
            
            // Ensure high quality rendering
            img.style.imageRendering = 'crisp-edges';
        },
        
        isDarkImage: function(img) {
            // Simple check for dark images
            const brightness = this.getImageBrightness(img);
            return brightness < 0.5;
        },
        
        getImageBrightness: function(img) {
            // Simple brightness estimation without canvas
            // (More reliable than canvas method)
            const color = this.getAverageColor(img);
            if (!color) return 0.5;
            
            // Calculate perceived brightness
            return (0.299 * color.r + 0.587 * color.g + 0.114 * color.b) / 255;
        },
        
        getAverageColor: function(img) {
            // This is simplified - in production, use a proper color analysis
            // For now, return a neutral default
            return { r: 128, g: 128, b: 128 };
        },
        
        addLoadingEffects: function() {
            // Add CSS for loading effects
            const style = document.createElement('style');
            style.textContent = `
                .magic-loading {
                    background: linear-gradient(
                        90deg,
                        rgba(240, 240, 240, 0.9) 25%,
                        rgba(230, 230, 230, 0.95) 50%,
                        rgba(240, 240, 240, 0.9) 75%
                    );
                    background-size: 200% 100%;
                    animation: magic-shimmer 1.5s infinite;
                    border-radius: 4px;
                }
                
                .magic-enhanced {
                    animation: magic-appear 0.6s cubic-bezier(0.23, 1, 0.32, 1);
                }
                
                @keyframes magic-shimmer {
                    0% { background-position: -200% 0; }
                    100% { background-position: 200% 0; }
                }
                
                @keyframes magic-appear {
                    0% {
                        opacity: 0;
                        transform: scale(0.96) translateY(8px);
                        filter: blur(3px) brightness(0.95);
                    }
                    100% {
                        opacity: 1;
                        transform: scale(1) translateY(0);
                        filter: blur(0) brightness(1.02);
                    }
                }
                
                /* Hover effects */
                .slide {
                    overflow: hidden;
                }
                
                .slide:hover .main-campaign-image {
                    transform: scale(1.03) !important;
                    filter: brightness(1.06) contrast(1.1) saturate(1.15) !important;
                    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15) !important;
                }
                
                /* Dark mode adjustments */
                .dark-mode .magic-loading {
                    background: linear-gradient(
                        90deg,
                        rgba(40, 40, 40, 0.9) 25%,
                        rgba(50, 50, 50, 0.95) 50%,
                        rgba(40, 40, 40, 0.9) 75%
                    );
                }
                
                
                .dark-mode .slide:hover .main-campaign-image {
                    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3) !important;
                }
            `;
            document.head.appendChild(style);
        },
        
        addInteractiveEffects: function() {
            // Add click feedback
            document.querySelectorAll('.slide').forEach(slide => {
                slide.addEventListener('click', () => {
                    const img = slide.querySelector('.main-campaign-image');
                    if (img) {
                        img.style.transform = 'scale(0.98)';
                        setTimeout(() => {
                            img.style.transform = '';
                        }, 150);
                    }
                });
            });
        }
    };
    
    // Initialize
    ImageMagic.init();
    
    // Also enhance images added dynamically
    const observer = new MutationObserver((mutations) => {
        mutations.forEach((mutation) => {
            if (mutation.addedNodes) {
                mutation.addedNodes.forEach((node) => {
                    if (node.querySelectorAll) {
                        node.querySelectorAll('.main-campaign-image').forEach(img => {
                            if (!img.classList.contains('magic-enhanced')) {
                                ImageMagic.markAsLoading(img);
                                if (img.complete) {
                                    ImageMagic.applyMagic(img);
                                } else {
                                    img.addEventListener('load', () => ImageMagic.applyMagic(img));
                                }
                            }
                        });
                    }
                });
            }
        });
    });
    
    observer.observe(document.body, { childList: true, subtree: true });
});
</script>



<script>
// More sophisticated loader that matches your 20-second load
class SyncedLoader {
    constructor() {
        this.loader = document.getElementById('page-loader');
        this.phases = {
            'initial': { target: 15, duration: 3000 },
            'django_render': { target: 40, duration: 7000 },
            'assets_load': { target: 70, duration: 5000 },
            'data_fetch': { target: 90, duration: 5000 },
            'complete': { target: 100, duration: 1000 }
        };
        this.currentPhase = 'initial';
    }
    
    start() {
        console.log('Loader started - expecting ~20 second load');
        this.animatePhase('initial');
        
        // Auto-progress (fallback if no events fire)
        setTimeout(() => this.animatePhase('django_render'), 3000);
        setTimeout(() => this.animatePhase('assets_load'), 10000);
        setTimeout(() => this.animatePhase('data_fetch'), 15000);
        setTimeout(() => this.animatePhase('complete'), 20000);
    }
    
    animatePhase(phase) {
        if (!this.phases[phase]) return;
        
        this.currentPhase = phase;
        const { target, duration } = this.phases[phase];
        
        this.loader.style.transition = `width ${duration}ms ease`;
        this.loader.style.width = `${target}%`;
        
        console.log(`Loader phase: ${phase}  ${target}% in ${duration}ms`);
    }
    
    // Call these from your Django template at different stages
    markDjangoReady() {
        this.animatePhase('django_render');
    }
    
    markAssetsLoaded() {
        this.animatePhase('assets_load');
    }
    
    markDataFetched() {
        this.animatePhase('data_fetch');
    }
    
    complete() {
        this.animatePhase('complete');
        setTimeout(() => {
            this.loader.style.opacity = '0';
            setTimeout(() => {
                this.loader.style.width = '0';
            }, 1000);
        }, 500);
    }
}

// Initialize and start the loader
window.addEventListener('DOMContentLoaded', function() {
    window.syncedLoader = new SyncedLoader();
    window.syncedLoader.start();
});
</script>




<script>
function expandContent(button, device) {
    const contentPoints = button.closest('.campaign-content-points');
    const preview = contentPoints.querySelector('.content-preview');
    const fullContent = contentPoints.querySelector('.full-content');
    
    // Hide preview, show full content
    preview.style.display = 'none';
    fullContent.style.display = 'block';
}

function collapseContent(button) {
    const fullContent = button.closest('.full-content');
    const contentPoints = button.closest('.campaign-content-points');
    const preview = contentPoints.querySelector('.content-preview');
    
    // Hide full content, show preview
    fullContent.style.display = 'none';
    preview.style.display = 'block';
}
</script>



<script type="text/javascript">
  const CampaignTags = {
    showPopup(campaignId) {
      // Close any other open popups first
      this.hideAllPopups();
      
      // Show the popup for this campaign
      const popup = document.getElementById(`tagsPopup-${campaignId}`);
      if (popup) {
        popup.style.display = 'flex';
        
        // Add click event listener to close when clicking outside
        setTimeout(() => {
          const handleOutsideClick = (e) => {
            if (!popup.contains(e.target) && !e.target.closest('.campaign-views-overlay')) {
              popup.style.display = 'none';
              document.removeEventListener('click', handleOutsideClick);
            }
          };
          
          document.addEventListener('click', handleOutsideClick);
        }, 100);
      }
    },

    hidePopup(campaignId) {
      const popup = document.getElementById(`tagsPopup-${campaignId}`);
      if (popup) {
        popup.style.display = 'none';
      }
    },

    hideAllPopups() {
      const popups = document.querySelectorAll('[id^="tagsPopup-"]');
      popups.forEach(popup => {
        popup.style.display = 'none';
      });
    }
  };
</script>






<script type="text/javascript">
// In your main JS file
document.addEventListener('DOMContentLoaded', () => {
  document.documentElement.classList.add('loaded');
});</script>
<script type="text/javascript">
// Add this method to your SoundTribeManager class
updateMainButton(hasJoined) {
    const mainButton = document.querySelector(`.camp-join-btn[data-campaign-id="${this.currentCampaignId}"]`);
    
    if (mainButton) {
        const icon = mainButton.querySelector('i');
        const text = mainButton.querySelector('span:not(.join-btn-count)');
        
        if (hasJoined) {
            mainButton.classList.add('joined');
            icon.className = 'fas fa-sign-out-alt';
            text.textContent = 'Leave';
        } else {
            mainButton.classList.remove('joined');
            icon.className = 'fas fa-headphones-alt';
            text.textContent = 'Join';
        }
    }
}

// Update your joinSoundTribe method to call updateMainButton
async joinSoundTribe() {
    // ... existing code ...
    if (data.success) {
        // ... existing code ...
        this.updateMainButton(true); // Add this line
        // ... rest of the code ...
    }
}

// Update your leaveSoundTribe method to call updateMainButton
async leaveSoundTribe() {
    // ... existing code ...
    if (data.success) {
        // ... existing code ...
        this.updateMainButton(false); // Add this line
        // ... rest of the code ...
    }
}
</script>


<script>
function handleCommentClick(campaignId) {
    {% if not user.is_authenticated %}
        window.location.href = "{% url 'account_login' %}?next=" + encodeURIComponent(window.location.pathname);
    {% else %}
        showCommentPopup(campaignId);
    {% endif %}
}
</script>


<script>
function handleTagsPopupClick(campaignId) {
    {% if not user.is_authenticated %}
        window.location.href = "{% url 'account_login' %}?next=" + encodeURIComponent(window.location.pathname);
    {% else %}
        showTagsPopup(campaignId);
    {% endif %}
}
</script>



<script>
function handleFollowClick(element, userId) {
    {% if not user.is_authenticated %}
        window.location.href = "{% url 'account_login' %}?next=" + encodeURIComponent(window.location.pathname);
    {% else %}
        // Call your existing follow function here
        // This depends on how your follow functionality is implemented
        toggleFollow(userId, element);
    {% endif %}
}

// If you have a separate follow function, keep it as is
function toggleFollow(userId, element) {
    // Your existing follow logic here
    // This might be an AJAX call to follow/unfollow
}
</script>
 <script src="{% static 'main/js/comments.js' %}"></script>




<!-- Comment Popup Container -->
<div id="commentPopup" class="comment-popup-container" style="display: none;">
    <div class="comment-popup-content">
        <span class="close-comment-popup">&times;</span>
        <h3>Comments</h3>
        
        <!-- Comment Form -->
      <div class="comment-form-container">
    <div class="current-user-preview">
        <img src="{{ user.profile.image.url }}" alt="Your profile picture" class="current-user-img">
        <span>Posting as {{ user.username }}</span>
    </div>
    <form id="commentForm" method="post">
        {% csrf_token %}
        <input type="hidden" id="campaignIdInput" name="campaign_id">
        <textarea name="text" class="comment-textarea" placeholder="Write your comment here..."></textarea>
        <button type="submit" class="submit-comment-btn">Post Comment</button>
    </form>
</div>

        
        <!-- Comment List -->
        <div class="comment-list-container" id="commentList">
            <!-- Comments will be loaded here dynamically -->
            <div class="loading-comments">Loading comments...</div>
        </div>
    </div>
</div>


               {% endblock %}       <!-- Campaign Title Here -->
